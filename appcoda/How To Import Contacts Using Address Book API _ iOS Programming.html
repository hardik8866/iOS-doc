<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0067)http://www.appcoda.com/ios-programming-import-contact-address-book/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" class="wf-montserrat7cbreeserif7copensans-n4-inactive wf-inactive"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>How To Import Contacts Using Address Book API | iOS Programming</title><link href="http://www.appcoda.com/prismjs/prism.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- This site is optimized with the Yoast WordPress SEO plugin v2.1.1 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="The Address Book API in iOS SDK provides a way to access the contact information. This iOS programming tutorial will demo how to use the API.">
<link rel="canonical" href="./How To Import Contacts Using Address Book API _ iOS Programming_files/How To Import Contacts Using Address Book API _ iOS Programming.html">
<meta name="twitter:card" content="summary">
<meta name="twitter:description" content="The Address Book API in iOS SDK provides a way to access the contact information. This iOS programming tutorial will demo how to use the API.">
<meta name="twitter:title" content="How To Import Contacts Using Address Book API | iOS Programming">
<meta name="twitter:site" content="@appcodamobile">
<meta name="twitter:domain" content="AppCoda">
<meta name="twitter:image:src" content="http://www.appcoda.com/wp-content/uploads/2013/12/addressbook-featured1.jpg">
<meta name="twitter:creator" content="@appcodamobile">
<script id="facebook-jssdk" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/all.js"></script><script async="" type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/ca-pub-8501671653071605.js"></script><script type="text/javascript" async="" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/ga.js"></script><script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"WebSite","url":"http:\/\/www.appcoda.com\/","name":"AppCoda"}</script>
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="AppCoda » Feed" href="http://feeds.feedburner.com/appcoda">
<link rel="alternate" type="application/rss+xml" title="AppCoda » Comments Feed" href="http://www.appcoda.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="AppCoda » How To Import Contacts Using Address Book Framework Comments Feed" href="http://www.appcoda.com/ios-programming-import-contact-address-book/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.appcoda.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.1"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f;c.supports={simple:d("simple"),flag:d("flag")},c.supports.simple&&c.supports.flag||(f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./How To Import Contacts Using Address Book API _ iOS Programming_files/wp-emoji-release.min.js" type="text/javascript"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="mediaelement-css" href="./How To Import Contacts Using Address Book API _ iOS Programming_files/mediaelementplayer.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-mediaelement-css" href="./How To Import Contacts Using Address Book API _ iOS Programming_files/wp-mediaelement.css" type="text/css" media="all">
<link rel="stylesheet" id="eleven40-theme-css" href="./How To Import Contacts Using Address Book API _ iOS Programming_files/style.css" type="text/css" media="all">
<link rel="stylesheet" id="contact-form-7-css" href="./How To Import Contacts Using Address Book API _ iOS Programming_files/styles.css" type="text/css" media="all">
<link rel="stylesheet" id="ej-socialslideout-content-style-css" href="./How To Import Contacts Using Address Book API _ iOS Programming_files/slideout.css" type="text/css" media="all">
<link rel="stylesheet" id="et_monarch-open-sans-css" href="./How To Import Contacts Using Address Book API _ iOS Programming_files/css" type="text/css" media="all">
<link rel="stylesheet" id="et_monarch-css-css" href="./How To Import Contacts Using Address Book API _ iOS Programming_files/style(1).css" type="text/css" media="all">
<link rel="stylesheet" id="codecolorer-css" href="./How To Import Contacts Using Address Book API _ iOS Programming_files/codecolorer.css" type="text/css" media="screen">
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/jquery.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/jquery-migrate.min.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/fluidimage.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/slideout.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/api.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/iframeResizer.min.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/iframeResizer.contentWindow.min.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.appcoda.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.appcoda.com/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 4.2.1">
<link rel="shortlink" href="http://www.appcoda.com/?p=2799">
<style type="text/css" id="et-social-custom-css">
				 
			</style><link rel="Shortcut Icon" href="http://www.appcoda.com/wp-content/themes/eleven40/images/favicon.ico" type="image/x-icon">
<link rel="pingback" href="http://www.appcoda.com/xmlrpc.php">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-223304-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><script type="text/javascript" async="" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/embed.js"></script><script type="text/javascript" async="" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/bsa.js"></script><script async="" type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/count.js"></script><script type="text/javascript" id="_bsap_js_459a84cf8fa0d5ea9dccfcfd1c3531e0" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/s_459a84cf8fa0d5ea9dccfcfd1c3531e0.js" async="async"></script><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Montserrat%7CBree+Serif%7COpen+Sans"><script async="" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/count-data.js"></script><script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/pro.js" id="_bsap_premium_pro"></script><script type="text/javascript" id="_bsaPRO_js" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/saved_resource" async="async"></script></head>
<body class="single single-post postid-2799 single-format-standard et_monarch header-image content-sidebar"><div id="wrap"><div id="header"><div class="wrap"><div id="title-area"><p id="title"><a href="http://www.appcoda.com/">AppCoda</a></p><p id="description">Your iOS Programming Community</p></div><div class="widget-area header-widget-area"><div id="nav_menu-2" class="widget widget_nav_menu"><div class="widget-wrap"><div class="menu-default-container"><ul id="menu-default" class="menu genesis-nav-menu js-superfish sf-js-enabled sf-arrows"><li id="menu-item-26" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a href="http://www.appcoda.com/about/">About</a></li>
<li id="menu-item-28" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-28"><a href="http://www.appcoda.com/tutorials/">Tutorials</a></li>
<li id="menu-item-530" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-530"><a href="http://www.appcoda.com/ios-programming-course/">Course</a></li>
<li id="menu-item-3045" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3045"><a title="Swift Programming Book for iOS 8" href="http://www.appcoda.com/swift">Book</a></li>
<li id="menu-item-2140" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2140"><a href="http://www.appcoda.com/ios-app-kit/ios-game-kit.html">Game Kit</a></li>
<li id="menu-item-710" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-710"><a href="http://www.appcoda.com/marketplace/">Marketplace</a></li>
<li id="menu-item-34" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-34"><a href="http://www.appcoda.com/contact/">Contact</a></li>
</ul></div></div></div>
</div></div></div><div id="inner"><div class="wrap"><script async="" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/adsbygoogle.js"></script>
<!-- Leaderboard Responsive Ad -->
<ins class="adsbygoogle" style="display: block; height: 90px;" data-ad-client="ca-pub-8501671653071605" data-ad-slot="1756840139" data-ad-format="auto" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:1140px;background-color:transparent"><ins id="aswift_1_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:1140px;background-color:transparent"><iframe width="1140" height="90" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script><div id="content-sidebar-wrap"><div id="content" class="hfeed"><div class="post-2799 post type-post status-publish format-standard hentry category-course category-intermediate category-tutorials tag-abrecordref tag-address-book tag-ios-programming tag-ios-sdk tag-objective-c entry"><h1 class="entry-title">How To Import Contacts Using Address Book Framework</h1> 
<div class="post-info"><span class="date published time" title="2013-12-28T00:09:03+00:00">December 28, 2013</span>  by <span class="author vcard"><span class="fn"><a href="http://www.appcoda.com/author/gabrielth/" rel="author">Gabriel Theodoropoulos</a></span></span> <span class="post-comments"><a href="http://www.appcoda.com/ios-programming-import-contact-address-book/#disqus_thread" data-disqus-identifier="2799 http://www.appcoda.com/?p=2799">20 Comments</a></span> </div><div class="entry-content">
<!-- Quick Adsense WordPress Plugin: http://quicksense.net/ -->
<div style="float:right;margin:10px 0 10px 10px;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8501671653071605";
/* Appcoda_300x250_iPhone_Development */
google_ad_slot = "8132041053";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/show_ads.js">
</script><ins id="aswift_0_expand" style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><ins id="aswift_0_anchor" style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><iframe width="300" height="250" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;"></iframe></ins></ins>
</div>
<p>One of the most well-known and most used feature of iPhone devices to all users, developers or not, is the <strong>Address Book</strong>. For those who use a lot the device as a phone (rather than a mobile mini computer), all important and vital information they need exist in their contacts. Till today, many applications have been developed, and even more can be built that make use the device’s address book data.</p>
<p>Apple makes developers’ life easy, as it provides frameworks that allow to access the address book and deal with its records. Knowing how to work with address book and how to perform some basic tasks (at least), is a knowledge necessary to all developers, as either sooner or later they’ll come in need of integrating address book info into their applications.</p>
<p>Before we proceed to take a tour on the most important aspects of the address book framework through a demo application, it would be a nice idea to make an introductory discussion first that will make easier to everyone to comprehend what comes next in this tutorial. So, keep reading and surely you’ll find some pretty interesting stuff as food for thinking and study.</p>
<div class="figure"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/addressbook-featured1.jpg" alt="addressbook-featured" class="aligncenter size-full wp-image-2830" style="width:NaN%;"><br>
<span id="more-2799"></span></div>
<h2>Address Book Overview</h2>
<p>Initially, it will might seem a bit weird the way the address book and its records are managed. Even though at a first glance it doesn’t look the most straightforward programming topic to work with, once someone gets familiarized with it, it becomes really easy to handle contact information. Let’s begin digging into the address book concepts, trying to keep things as simple as possible. We won’t see every aspect of it, neither will we analyze all of its provided features. However, we will focus on the most common type of usage, how we can get a person’s contact information.</p>
<p>First of all, it’s necessary to make clear that there is not just one address book. Many address books can be created and be handled, even by the same application. Our goal however is to access the address book that the device uses, so we won’t care about how to create or manage numerous address books.</p>
<p>An address book record, represented programmatically by a <em><a href="https://developer.apple.com/library/ios/documentation/AddressBook/Reference/ABRecordRef_iPhoneOS/Reference/reference.html">ABRecordRef</a></em> object, contains all data that someone may desire to import into an app. A record can contain data either for a person, or for a group of persons. In this tutorial, we’ll focus on a single person’s data only. The structure that represents a person is the <em>ABPerson</em> class, and all of its related data is a collection of properties. As we are going to work with properties in details, it’s important to stay a little longer on it. <em>A property can be either single-value, or multi-value</em>. The set of properties regarding a person consist of both these kinds. Examples of single-value properties are the first and last name of a person. On the other hand, the e-mail addresses of a person, or the phone numbers are pretty nice examples of multi-value properties, as one may have more than one e-mail addresses and more than one phone numbers respectively.</p>
<p>A multi-value property consists of a list of single values. Each single value is associated with a label and an identifier, which uniquely identifies a single value inside a multi-value property. For example, as I previously said, a person’s e-mail is a multi-value property, which can be composed by a work e-mail address and a label describing it, a personal (home) e-mail address and a label describing it, etc.</p>
<p>It worths denoting that when it’s needed to keep track of a single value of a multi-value property, the identifier value should be used instead of its index in the value list, as it doesn’t get changed for any reason in a device. The index of a single value inside a multi-value property is not a reliable point of reference, as it can be changed while new values are added or existing ones get deleted (think of a mutable array where new values are added or deleted). This is useful information for all those who would like to explore the address book framework beyond the scope of this tutorial.</p>
<p>Even though that all information mentioned above looks somehow complicated, it will become pretty clear how everything works upon usage. Keep in mind that in bottom line, you always deal with properties and functions related to them. Before ending this introduction, I should also make one more step and say a few more words, programmatically speaking this time. So, first of all, address book framework requires to do some <em>C-level</em> working. The framework provides functions that allows to copy values from C structures in Objective-C properties and then work with familiar stuff. Actually, copying values is almost mandatory, otherwise access in address book data is not allowed. Further than that, each property in the address book framework is in the form of kABPersonPROPERTYNAMEProperty, a fact that makes it easy to everyone to see all available properties in Xcode, simply by starting to type <em>kABPerson…</em>. For example, the kABPersonFirstNameProperty indicates the first name property of a person. For multi-value properties, it’s allowed to get all values in a <em>NSArray</em> array, and then using specific functions to copy values and/or the respective labels and identifiers in appropriate Objective-C variables.</p>
<p>Enough with theory though. Let’s move forward to see some action!</p>
<h2>Demo App Overview</h2>
<p>For the purposes of this tutorial, we are going to create a sample application that will demonstrate how we can import contact info from the device’s address book into it. It will consist of two view controllers:</p>
<ul>
<li>A master view controller that will contain a table view, where all imported contacts will appear only with the first and last name.</li>
<li>A secondary view controller, where details of a selected contact will show on-screen.</li>
</ul>
<p>The workflow will be as follows: In the first, primary view controller, an <em>Add</em> button will exist, which when is tapped the address book controller will appear to let us pick a contact. Once a selection has been made, the first and last name of the selected contact will be displayed on the table view. When tapping on a name on the table view, the secondary view controller will come in front, where the next contact details will be made available:</p>
<ul>
<li>Full name (first and last name).</li>
<li>Contact image (if exists).</li>
<li>Both work and home e-mail addresses.</li>
<li>Both mobile and home phone numbers.</li>
<li>Street address info.</li>
</ul>
<p>The last three pieces of information will be populated on a table view.</p>
<p>Previously I mentioned that when the add button is tapped, then the address book controller will be displayed. This <em>address book controller</em> is actually a navigation controller, provided by iOS directly when importing the appropriate framework. So, there is nothing regarding design that we have to implement in order to list all address book contacts. It’s provided for free by the system.</p>
<div class="figure"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/address-book-app-overview.jpg" alt="address book app overview" class="aligncenter size-full wp-image-2833" style="width:NaN%;"></div>
<p>Beyond importing contacts from the address book, listing them and viewing their details, there is also a bonus in this application. We will implement two extra features: How to make a call and how to send SMS messages using phone numbers existing on our app!</p>
<p>As a final note I must say that the root view controller of our demo application is going to be a navigation controller, so we can navigate from the list of the imported contacts into a contact’s details and backwards by taking advantage of the system built-in transitions. In other words, we are going to develop a master-detail view application.</p>
<h2>Creating the Xcode Project</h2>
<p>Time to make our hands dirty. Launch Xcode and in the welcome screen select to create a new project.</p>
<div class="figure"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/t2_1_xcode_welcome.jpeg" alt="Create a new Xcode Project" class="aligncenter size-full wp-image-2809" style="width:NaN%;"></div>
<p>As the template for the new project, select the <strong>Master-Detail Application</strong> option. This one will setup a nice base for us, even though we’ll have got rid of some unnecessary code. Click on the <strong>Next</strong> button.</p>
<div class="figure"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/t2_2_template_1.jpeg" alt="Select a Xcode template" class="aligncenter size-full wp-image-2810" style="width:NaN%;"></div>
<p>In the second step, add the <strong>AddressBook</strong> value in the <strong>Product Name</strong> field. Leave everything else as it is, but make sure that in the <strong>Devices</strong> drop down menu the <strong>iPhone</strong> value is selected. Click on the <strong>Next</strong> button.</p>
<div class="figure"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/t2_3_template_2.jpeg" alt="Fill in Xcode Project Options" class="aligncenter size-full wp-image-2811" style="width:NaN%;"></div>
<p>In the last step of the guide, select a place to save your project and click on the <strong>Create</strong> button.</p>
<p>The project is ready!</p>
<h2>Clear Unnecessary Code</h2>
<p>The Master-Detail template we chose for our project sets up a navigation controller as the root view controller for our application. Along with that, it adds some default code, but we don’t want all of it in our project. Therefore, in this sample app instead of starting our work by adding code as it is traditionally done, we are going to begin by deleting targeted code snippets.</p>
<p>Let’s begin from the <em>MasterViewController.m</em>. At first, go at the private interface section and delete the next line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> <span style="color: #002200;">*</span>_objects;</div></td></tr></tbody></table></div>
<p>Next, head down to the <em>viewDidLoad</em> method and remove the following:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">self.navigationItem.leftBarButtonItem <span style="color: #002200;">=</span> self.editButtonItem;</div></td></tr></tbody></table></div>
<p>Fine. After that, delete the entire next method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>insertNewObject<span style="color: #002200;">:</span><span style="color: #002200;">(</span><span style="color: #a61390;">id</span><span style="color: #002200;">)</span>sender<br>
<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span><span style="color: #002200;">!</span>_objects<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; _objects <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> alloc<span style="color: #002200;">]</span> init<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>_objects insertObject<span style="color: #002200;">:</span><span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/"><span style="color: #400080;">NSDate</span></a> date<span style="color: #002200;">]</span> atIndex<span style="color: #002200;">:</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/"><span style="color: #400080;">NSIndexPath</span></a> <span style="color: #002200;">*</span>indexPath <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/"><span style="color: #400080;">NSIndexPath</span></a> indexPathForRow<span style="color: #002200;">:</span><span style="color: #2400d9;">0</span> inSection<span style="color: #002200;">:</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>self.tableView insertRowsAtIndexPaths<span style="color: #002200;">:</span>@<span style="color: #002200;">[</span>indexPath<span style="color: #002200;">]</span> withRowAnimation<span style="color: #002200;">:</span>UITableViewRowAnimationAutomatic<span style="color: #002200;">]</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Don’t worry if on the way Xcode shows warnings or errors. Everything will be resolved during development. Go to the <em>tableView:numberOfRowsInSection:</em> table view delegate method and remove this:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">return</span> _objects.count;</div></td></tr></tbody></table></div>
<p>Next, in the <em>tableView:cellForRowAtIndexPath:</em> table view method delete these two lines:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/"><span style="color: #400080;">NSDate</span></a> <span style="color: #002200;">*</span>object <span style="color: #002200;">=</span> _objects<span style="color: #002200;">[</span>indexPath.row<span style="color: #002200;">]</span>;<br>
cell.textLabel.text <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>object description<span style="color: #002200;">]</span>;</div></td></tr></tbody></table></div>
<p>Also, delete entirely the implementation of the next table view methods:</p>
<ul>
<li><em>tableView:canEditRowAtIndexPath:</em></li>
<li><em>tableView:commitEditingStyle:forRowAtIndexPath:</em></li>
<li><em>tableView:moveRowAtIndexPath:toIndexPath:</em></li>
<li><em>tableView:canMoveRowAtIndexPath:</em></li>
</ul>
<p>Finally, go to the <em>prepareForSegue:sender:</em> method and delete the contents of the condition body:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/"><span style="color: #400080;">NSIndexPath</span></a> <span style="color: #002200;">*</span>indexPath <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>self.tableView indexPathForSelectedRow<span style="color: #002200;">]</span>;<br>
<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/"><span style="color: #400080;">NSDate</span></a> <span style="color: #002200;">*</span>object <span style="color: #002200;">=</span> _objects<span style="color: #002200;">[</span>indexPath.row<span style="color: #002200;">]</span>;<br>
<span style="color: #002200;">[</span><span style="color: #002200;">[</span>segue destinationViewController<span style="color: #002200;">]</span> setDetailItem<span style="color: #002200;">:</span>object<span style="color: #002200;">]</span>;</div></td></tr></tbody></table></div>
<p>A couple more points to clear code: Open the <em>DetailViewController.h</em> file and delete the <em>detailItem</em> property:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@property</span> <span style="color: #002200;">(</span>strong, nonatomic<span style="color: #002200;">)</span> <span style="color: #a61390;">id</span> detailItem;</div></td></tr></tbody></table></div>
<p>Navigate your self in the <em>DetailViewController.m</em> file. In the private interface section, delete the <em>configureView</em> method declaration…</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>configureView;</div></td></tr></tbody></table></div>
<p>… and completely delete the implementation of both the <em>setDetailItem:</em> and the <em>configureView</em> methods:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>setDetailItem<span style="color: #002200;">:</span><span style="color: #002200;">(</span><span style="color: #a61390;">id</span><span style="color: #002200;">)</span>newDetailItem<br>
<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>_detailItem <span style="color: #002200;">!=</span> newDetailItem<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; _detailItem <span style="color: #002200;">=</span> newDetailItem;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Update the view.</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>self configureView<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span><br>
<br>
<span style="color: #002200;">-</span> <span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>configureView<br>
<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Update the user interface for the detail item.</span><br>
<br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>self.detailItem<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; self.detailDescriptionLabel.text <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>self.detailItem description<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Lastly, in the <em>viewDidLoad</em> method just remove the call to the <em>configureView</em> method (which no longer exists):</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">[</span>self configureView<span style="color: #002200;">]</span>;</div></td></tr></tbody></table></div>
<h2>Designing the interface</h2>
<p>At this point we get rid of any unwanted code and it’s time to setup the interface of our application. On the <strong>Project Navigator</strong>, click on the <em>Main.storyboard</em> file to let it open on Interface Builder. Initially, this is what you should see on your screen:</p>
<div class="figure"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/t2_4_ib_initial.jpeg" alt="Address Book App Initial Storyboard" class="aligncenter size-full wp-image-2812" style="width:NaN%;"></div>
<p>Begin by changing the title in the navigation bar of the MasterViewController scene. Click on the navigation bar area, on the title, and then by going to the <strong>Utilities pane &gt; Attributes Inspector &gt; Title field</strong> modify the title by setting the <strong>My Contacts</strong> value.</p>
<div class="figure"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/t2_5_change_title.jpeg" alt="Address Book Change Title" class="aligncenter size-full wp-image-2813" style="width:NaN%;"></div>
<p>Follow the same process and change the title of the DetailViewController scene. Set the <strong>Contact Details</strong> value instead of the default one.</p>
<div class="figure"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/t2_6_change_title_2.jpeg" alt="Address Book Change Title" class="aligncenter size-full wp-image-2814" style="width:NaN%;"></div>
<p>The MasterViewController scene seems suitable for our sample application in the way it currently is. Therefore, we will focus on configuring the DetailViewController scene. Start off by deleting the pre-made UILabel with title <strong>Detail view content goes here</strong> in the center of the scene. Continue by adding the next subviews:</p>
<ul>
<li><strong>UIImageView</strong>. X:220 Y:73 Width:80 Heigh:80</li>
<li><strong>UILabel</strong>. X:20 Y:73 Width:192 Height:80, Font: System Bold 15.0, Text Alignment: Centered</li>
<li><strong>UITableView</strong>. X:0 Y:161 Width:320 Height:363</li>
<li><strong>UIToolBar</strong>. X:0 Y:524 Width:320 Height:44</li>
</ul>
<p>On the toolbar, add the next bar button items, right next to the default one:</p>
<ul>
<li><strong>Flexible Space Bar Button Item</strong></li>
<li><strong>UIBarButtonItem</strong></li>
</ul>
<p>Double-Click on the left bar button item of the toolbar to change its name. Give the <strong>Call</strong> value on it. Do the same for the right bar button item and set the <strong>SMS</strong> value.</p>
<p>Our interface is ready. All needed subviews for the purpose of the sample application have been added through the Interface Builder. Here is how the DetailViewConrtoller scene should look like:</p>
<div class="figure"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/t2_7_detail_scene.jpeg" alt="Address Book Detail View" class="aligncenter size-full wp-image-2815" style="width:NaN%;"></div>
<p>However, we are not still ready to move on, because one more major task needs to be performed. We must declare IBOutlet properties and connect them to the subviews we just added in order to access them later through our code.</p>
<p>Open the <em>DetailViewController.h</em> file and declare the next three IBOutlet properties:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> DetailViewController <span style="color: #002200;">:</span> UIViewController<br>
<br>
<span style="color: #a61390;">@property</span> <span style="color: #002200;">(</span>nonatomic, weak<span style="color: #002200;">)</span> IBOutlet UILabel <span style="color: #002200;">*</span>lblContactName;<br>
<span style="color: #a61390;">@property</span> <span style="color: #002200;">(</span>nonatomic, weak<span style="color: #002200;">)</span> IBOutlet UIImageView <span style="color: #002200;">*</span>imgContactImage;<br>
<span style="color: #a61390;">@property</span> <span style="color: #002200;">(</span>nonatomic, weak<span style="color: #002200;">)</span> IBOutlet UITableView <span style="color: #002200;">*</span>tblContactDetails;<br>
<br>
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Next, go back to the <em>Main.storyboard</em> file to make any necessary connections. Inside the <strong>Document Outline</strong> pane, <em>Control-Click or Right-Click on the DetailViewController object</em>. A (black) popup window appears, where all declared IBOutlets properties list there, under the <strong>Outlets</strong> section. For each IBOutlet property, <em>click on the circle on the right side and drag and drop to the appropriate control</em>, just as it’s shown at the next figure:</p>
<div class="figure"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/t2_8_iboutlet_connection.jpeg" alt="Address Book Storyboard Outlets" class="aligncenter size-full wp-image-2816" style="width:NaN%;"></div>
<p>Make sure to connect the <em>imgContactImage</em> to the image view, the <em>lblContactName</em> to the label object and the <em>tblContactDetails</em>  property to the table view of the DetailViewController scene.</p>
<p>Now we are completely ready regarding the interface! Let’s move full ahead to enable the add button and display all device’s contacts existing into the address book.</p>
<h2>Display Address Book Contacts</h2>
<p>Summarizing what we’ve done so far, we could say that we have setup the base for building the essential part of the application on it. Once the project got prepared, we deleted any redundant code from it, we configured the interface using the Interface Builder and declared and connected all necessary IBOutlet properties. From this point on, we are able to start making some real work!</p>
<p>Our first concern is to enable the <em>Add</em> button, which when is tapped must display the address book controller, so as we pick a contact. Before doing so, we must link two necessary frameworks to the application. Fortunately, thanks to new Xcode 5 <em>Auto Linking</em> compiler feature which will work on our behalf, we don’t need to manually add the required frameworks on the project. Simply we’ll import them, and the compiler is responsible for linking them. So, open the <em>MasterViewController.h</em> file, and at the top of it import the next two:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #6e371a;">#import &lt;AddressBook/AddressBook.h&gt;</span><br>
<span style="color: #6e371a;">#import &lt;AddressBookUI/AddressBookUI.h&gt;</span></div></td></tr></tbody></table></div>
<p>The first framework will provide us with all the necessary libraries and classes we need to work with address book contacts. The second one, is required in order to display the address book navigation controller and list all existing contacts.</p>
<p>Further than that, it’s also necessary to adopt the <em><a href="https://developer.apple.com/library/ios/documentation/AddressBookUI/Reference/ABPeoplePickerNavigationControllerDelegate_Protocol/Reference/Reference.html">ABPeoplePickerNavigationControllerDelegate</a></em> protocol, so as to give our app the right to handle any selections been made on the address book controller and interact with it, simply by being its delegate. Therefore, while still being on the <em>MasterViewController.h</em> file, modify the interface header so as to be similar to this one:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> MasterViewController <span style="color: #002200;">:</span> UITableViewController &lt;ABPeoplePickerNavigationControllerDelegate&gt;<br>
<br>
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Our progress up to this point is perfect! Let’s head now to the <em>MasterViewController.m</em> file, directly into the private section of the interface. In here, we will declare a private method, the one that will be called every time the Add button gets tapped and the address book controller should show up. Add the following:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> MasterViewController <span style="color: #002200;">(</span><span style="color: #002200;">)</span> <br>
<br>
<span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>showAddressBook;<br>
<br>
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Besides that, at the same place we will declare a <em>ABPeoplePickerNavigationController</em> in order to handle the address book controller. So, here is the snippet above, a bit enriched:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> MasterViewController <span style="color: #002200;">(</span><span style="color: #002200;">)</span> <br>
<br>
<span style="color: #a61390;">@property</span> <span style="color: #002200;">(</span>nonatomic, strong<span style="color: #002200;">)</span> ABPeoplePickerNavigationController <span style="color: #002200;">*</span>addressBookController;<br>
<br>
<span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>showAddressBook;<br>
<br>
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>The <em>addressBookController</em> object is the key for accessing the device’s address book and getting its contacts.</p>
<p>Now, let’s do a small fix. Go straight ahead to the <em>viewDidLoad</em> and locate the following commands:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">UIBarButtonItem <span style="color: #002200;">*</span>addButton <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">[</span>UIBarButtonItem alloc<span style="color: #002200;">]</span> initWithBarButtonSystemItem<span style="color: #002200;">:</span>UIBarButtonSystemItemAdd target<span style="color: #002200;">:</span>self action<span style="color: #002200;">:</span><span style="color: #a61390;">@selector</span><span style="color: #002200;">(</span>insertNewObject<span style="color: #002200;">:</span><span style="color: #002200;">)</span><span style="color: #002200;">]</span>;<br>
<br>
self.navigationItem.rightBarButtonItem <span style="color: #002200;">=</span> addButton;</div></td></tr></tbody></table></div>
<p>This first line of code creates a bar button item, the Add button, which is then (second line) positioned on the right side of the navigation bar. Everything here is perfect, except for one thing: The <em>selector</em> method of the bar button item. As you see, there is still set the <em>insertNewObject:</em> method, which had been created by default by Xcode and we deleted earlier. We must replace it with the one we previously declared, so every time the Add button gets tapped our method is called. To fix this, simply replace the <em>selector</em> method, just as follows:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">UIBarButtonItem <span style="color: #002200;">*</span>addButton <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">[</span>UIBarButtonItem alloc<span style="color: #002200;">]</span> initWithBarButtonSystemItem<span style="color: #002200;">:</span>UIBarButtonSystemItemAdd target<span style="color: #002200;">:</span>self action<span style="color: #002200;">:</span><span style="color: #a61390;">@selector</span><span style="color: #002200;">(</span>showAddressBook<span style="color: #002200;">)</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <br>
self.navigationItem.rightBarButtonItem <span style="color: #002200;">=</span> addButton;</div></td></tr></tbody></table></div>
<p>What’s left? Just to implement the <em>showAddressBook</em> method. Inside the <em>MasterViewController.m</em> file, add the next code fragment:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>showAddressBook<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; _addressBookController <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">[</span>ABPeoplePickerNavigationController alloc<span style="color: #002200;">]</span> init<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>_addressBookController setPeoplePickerDelegate<span style="color: #002200;">:</span>self<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>self presentViewController<span style="color: #002200;">:</span>_addressBookController animated<span style="color: #002200;">:</span><span style="color: #a61390;">YES</span> completion<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">]</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>At first we are initializing the <em>addressBookController</em> object, then we are setting <em>self</em> (the <em>MasterViewController</em> class) as its delegate, and we are finally presenting modally the address book controller on the screen. Quite simple.</p>
<p>If you temporarily silent any errors and you run the application for the first time either on the Simulator or on a real device, you’ll find out that when tapping on the Add bar button item the address book controller (the well-known address book window) appears. Amazing! However, nothing else seems to be working yet. A contact cannot be selected, nor the <strong>Cancel</strong> button of the controller works so we can simply dismiss it. Don’t worry though; all these consist of the heart of this tutorial and are coming next.</p>
<h2>Select and Handle Contact Info</h2>
<p>In order to keep things simple and at the same time to make a comprehensive demonstration on how to handle various kind of address book properties, here is what we are going to import to our application from the address book:</p>
<ul>
<li>First and Last name</li>
<li>Contact image</li>
<li>Mobile and Home Phone numbers</li>
<li>Work and Home E-mail addresses</li>
<li>Street address info</li>
</ul>
<p>All this data is a combination of both single-value and multi-value properties. Once a contact gets selected, it will be added to a mutable array. Actually, the imported data for each contact will be stored to a mutable dictionary object, and this object will be stored then to a position of the mutable array.</p>
<p>So, as a first step go and declare a mutable array object in the private section of the interface:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> MasterViewController <span style="color: #002200;">(</span><span style="color: #002200;">)</span> <br>
<br>
<span style="color: #a61390;">@property</span> <span style="color: #002200;">(</span>nonatomic, strong<span style="color: #002200;">)</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> <span style="color: #002200;">*</span>arrContactsData;<br>
<br>
...<br>
<br>
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Good, now that the storing structure exists, we are able to proceed. Let’s continue by doing some easy stuff and let’s enable the <strong>Cancel</strong> button of the address book controller, so when it’s tapped the controller goes away. Add the next delegate method in the <em>MasterViewController.m</em> file:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>peoplePickerNavigationControllerDidCancel<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABPeoplePickerNavigationController <span style="color: #002200;">*</span><span style="color: #002200;">)</span>peoplePicker<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>_addressBookController dismissViewControllerAnimated<span style="color: #002200;">:</span><span style="color: #a61390;">YES</span> completion<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">]</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>The method’s name is self-explanatory. The only thing we do is to dismiss the address book controller using the <em>addressBookController</em> object. If you want, go and give it another try. You’ll find out that the Cancel button works great.</p>
<p>Selecting a contact can be done in two ways. The first one is to simply tap on a contact’s record in order to select it and let the address book controller be dismissed. The second one goes one step further, where when tapping on a contact’s record a new view appears containing all the contact’s detailed info. From this view (which is part of the address book controller also) a specific property can be selected and then the address book controller gets dismissed. We are going to use the first way, as we don’t care about selecting single properties, but we’d rather get the whole record.</p>
<p>The behavior I just described can be achieved using the following delegate method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">BOOL</span><span style="color: #002200;">)</span>peoplePickerNavigationController<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABPeoplePickerNavigationController <span style="color: #002200;">*</span><span style="color: #002200;">)</span>peoplePicker shouldContinueAfterSelectingPerson<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABRecordRef<span style="color: #002200;">)</span>person<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #a61390;">NO</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Inside this delegate method we’ll do our most important job, and that is to handle the address book data. Let’s begin doing so by making one step at the time.</p>
<p>Previously I mentioned that the imported data of each contact is going to be stored into a mutable dictionary object, and then this object is going to be added into the mutable array. Now it’s time to create this dictionary by initializing a <em>NSMutableDictionary</em> object. In the following code, note that we are setting the empty string value as the default one for all keys upon initialization.</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">BOOL</span><span style="color: #002200;">)</span>peoplePickerNavigationController<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABPeoplePickerNavigationController <span style="color: #002200;">*</span><span style="color: #002200;">)</span>peoplePicker shouldContinueAfterSelectingPerson<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABRecordRef<span style="color: #002200;">)</span>person<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/"><span style="color: #400080;">NSMutableDictionary</span></a> <span style="color: #002200;">*</span>contactInfoDict <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/"><span style="color: #400080;">NSMutableDictionary</span></a> alloc<span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; initWithObjects<span style="color: #002200;">:</span>@<span style="color: #002200;">[</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span><span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; forKeys<span style="color: #002200;">:</span>@<span style="color: #002200;">[</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"firstName"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"lastName"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"mobileNumber"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeNumber"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeEmail"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"workEmail"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"address"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"zipCode"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"city"</span><span style="color: #002200;">]</span><span style="color: #002200;">]</span>;<br>
<br>
&nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #a61390;">NO</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>I think that it’s now quite clear from the key values the contact info we are interested in this application. Now, let’s see how we can get the first name of the selected person. The address book framework provides a function named <em>ABRecordCopyValue</em>, and it accepts two parameters. The first one is an address book record, and in our case it’s the last parameter of the delegate method, the <em>person</em> object. The <em>ABRecordRef</em> type represents a record in the address book. The second parameter of the <em>ABRecordCopyValue</em> function is the name of the property that we are looking for.</p>
<p>The <em>ABRecordCopyValue</em> function returns a <em>Core Foundation</em> object. Therefore, we will declare a Core Foundation object for general use inside this delegate method and we will assign the results of every function that returns such a type into it. Here is what I mean exactly:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">CFTypeRef generalCFObject;<br>
generalCFObject <span style="color: #002200;">=</span> ABRecordCopyValue<span style="color: #002200;">(</span>person, kABPersonFirstNameProperty<span style="color: #002200;">)</span>;</div></td></tr></tbody></table></div>
<p>The <em>CFTypeRef</em> type is a general type that represents any Core Foundation object.</p>
<p>Before getting the first name from the <em>generalCFObject</em>, we need to check at first if it contains a value indeed or not (if it’s <em>nil</em> or not). If it contains a value, then we will store it in the dictionary. Note that the previous code allocates memory, and after we have finished working with it is necessary to release it using the <em>CFRelease</em> function. Here is how we check for an existing value and how to store it to the dictionary:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>generalCFObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>generalCFObject forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"firstName"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>generalCFObject<span style="color: #002200;">)</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Note the <em>(__bridge NSString *)generalCFObject</em> point. This is the so-called <strong>bridged cast</strong> and is used to resolve any ARC compatibility issues between pointers in C and Objective-C objects. In the dictionary we cannot add a Core Foundation object, as it’s not one of the supported types that can be stored in it. So, we must convert it to a <em>NSString</em> object. If we want to do that without make Xcode complain and show errors, this casting is more than necessary. If you feel so, please go and do some research about all this on the web to get more info. Going in more details will lead us out of the scope of this tutorial.</p>
<p>So, putting everything together up to now, here is how the delegate method is formed:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">BOOL</span><span style="color: #002200;">)</span>peoplePickerNavigationController<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABPeoplePickerNavigationController <span style="color: #002200;">*</span><span style="color: #002200;">)</span>peoplePicker shouldContinueAfterSelectingPerson<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABRecordRef<span style="color: #002200;">)</span>person<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/"><span style="color: #400080;">NSMutableDictionary</span></a> <span style="color: #002200;">*</span>contactInfoDict <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/"><span style="color: #400080;">NSMutableDictionary</span></a> alloc<span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; initWithObjects<span style="color: #002200;">:</span>@<span style="color: #002200;">[</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span><span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; forKeys<span style="color: #002200;">:</span>@<span style="color: #002200;">[</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"firstName"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"lastName"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"mobileNumber"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeNumber"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeEmail"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"workEmail"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"address"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"zipCode"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"city"</span><span style="color: #002200;">]</span><span style="color: #002200;">]</span>;<br>
<br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; CFTypeRef generalCFObject;<br>
&nbsp; &nbsp; generalCFObject <span style="color: #002200;">=</span> ABRecordCopyValue<span style="color: #002200;">(</span>person, kABPersonFirstNameProperty<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>generalCFObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>generalCFObject forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"firstName"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>generalCFObject<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span> <br>
&nbsp; &nbsp;<br>
&nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #a61390;">NO</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>It’s not too hard, right? As I said in the introduction, it might not be the most straightforward thing to work with, but on the other hand it’s not difficult to get used to it. So, let’s do the same for the next one single-value property we want, the last name of the contact.</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">BOOL</span><span style="color: #002200;">)</span>peoplePickerNavigationController<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABPeoplePickerNavigationController <span style="color: #002200;">*</span><span style="color: #002200;">)</span>peoplePicker shouldContinueAfterSelectingPerson<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABRecordRef<span style="color: #002200;">)</span>person<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ...<br>
<br>
&nbsp; &nbsp; generalCFObject <span style="color: #002200;">=</span> ABRecordCopyValue<span style="color: #002200;">(</span>person, kABPersonLastNameProperty<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>generalCFObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>generalCFObject forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"lastName"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>generalCFObject<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp;<br>
&nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #a61390;">NO</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Next, let’s try to get the phone numbers we want, and let’s work for first time with a multi-value property. The general idea is more or less the same as before, as once again we’ll make use of the <em>ABRecordCopyValue</em> function. This time however, we won’t assign the returned value into a single object, but instead we will use a <em>ABMultiValueRef</em> object. The <em>ABMultiValueRef</em> type represents a multi-value property, and the normal way to assign a value to it is the next one:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">ABMultiValueRef phonesRef <span style="color: #002200;">=</span> ABRecordCopyValue<span style="color: #002200;">(</span>person, kABPersonPhoneProperty<span style="color: #002200;">)</span>;</div></td></tr></tbody></table></div>
<p>Here is how we are going to proceed next:<br>
We will make a loop, and for every single value of the multi-value property, we will get its label and its value. If the label is equal to the pre-defined mobile or home phone number label constants, then we will set the respective value to the dictionary. If no match is found, then there is no entry regarding the specific phone value for the selected contact. Let’s see the code to make everything more clear:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">for</span> <span style="color: #002200;">(</span><span style="color: #a61390;">int</span> i<span style="color: #002200;">=</span><span style="color: #2400d9;">0</span>; i &lt; ABMultiValueGetCount<span style="color: #002200;">(</span>phonesRef<span style="color: #002200;">)</span>; i<span style="color: #002200;">++</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; CFStringRef currentPhoneLabel <span style="color: #002200;">=</span> ABMultiValueCopyLabelAtIndex<span style="color: #002200;">(</span>phonesRef, i<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; CFStringRef currentPhoneValue <span style="color: #002200;">=</span> ABMultiValueCopyValueAtIndex<span style="color: #002200;">(</span>phonesRef, i<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>CFStringCompare<span style="color: #002200;">(</span>currentPhoneLabel, kABPersonPhoneMobileLabel, <span style="color: #2400d9;">0</span><span style="color: #002200;">)</span> <span style="color: #002200;">==</span> kCFCompareEqualTo<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>currentPhoneValue forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"mobileNumber"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>CFStringCompare<span style="color: #002200;">(</span>currentPhoneLabel, kABHomeLabel, <span style="color: #2400d9;">0</span><span style="color: #002200;">)</span> <span style="color: #002200;">==</span> kCFCompareEqualTo<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>currentPhoneValue forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeNumber"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>currentPhoneLabel<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>currentPhoneValue<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>phonesRef<span style="color: #002200;">)</span>;</div></td></tr></tbody></table></div>
<p>Using the <em>ABMultiValueGetCount</em> function we get the total number of items the multi-value property contains. Note that the label and value for each loop is defined using the <em>ABMultiValueCopyLabelAtIndex</em> function, which accepts two parameters. The multi-value property (the <em>phonesRef</em> in our case) and the index of the current single value. Next, by making a simple comparison between the current label and a pre-defined label constant (<em>kABPersonPhoneMobileLabel</em>, <em>kABHomeLabel</em>) we make sure that the value we’re looking for exists or not. If found, then we set the respective value to the dictionary. Note that the casting is necessary once again. Also, don’t forget to release the memory allocated by the Core Foundation objects.</p>
<p>When the loop above ends, the dictionary will contain the desired phone numbers (if exist). Using the exact same logic, we can get the e-mail addresses of the selected contact:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">ABMultiValueRef emailsRef <span style="color: #002200;">=</span> ABRecordCopyValue<span style="color: #002200;">(</span>person, kABPersonEmailProperty<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #a61390;">for</span> <span style="color: #002200;">(</span><span style="color: #a61390;">int</span> i<span style="color: #002200;">=</span><span style="color: #2400d9;">0</span>; i&lt;ABMultiValueGetCount<span style="color: #002200;">(</span>emailsRef<span style="color: #002200;">)</span>; i<span style="color: #002200;">++</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; CFStringRef currentEmailLabel <span style="color: #002200;">=</span> ABMultiValueCopyLabelAtIndex<span style="color: #002200;">(</span>emailsRef, i<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; CFStringRef currentEmailValue <span style="color: #002200;">=</span> ABMultiValueCopyValueAtIndex<span style="color: #002200;">(</span>emailsRef, i<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>CFStringCompare<span style="color: #002200;">(</span>currentEmailLabel, kABHomeLabel, <span style="color: #2400d9;">0</span><span style="color: #002200;">)</span> <span style="color: #002200;">==</span> kCFCompareEqualTo<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>currentEmailValue forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeEmail"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>CFStringCompare<span style="color: #002200;">(</span>currentEmailLabel, kABWorkLabel, <span style="color: #2400d9;">0</span><span style="color: #002200;">)</span> <span style="color: #002200;">==</span> kCFCompareEqualTo<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>currentEmailValue forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"workEmail"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>currentEmailLabel<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>currentEmailValue<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>emailsRef<span style="color: #002200;">)</span>;</div></td></tr></tbody></table></div>
<p>So far, so good. Let’s get the street address data now. We are going to change our approach, as the street address is a little bit peculiar case. At first, we’ll get the address multi-value property just like we did in all the previous cases, and then we will get the data of the first address value (if any exist) as a <em>NSDictionary</em> object. We’ll do that because when talking about an address, we talk for a set of values, including street address, zip code, city, etc. Once  we get the first address in the collection of addresses as a dictionary, then we will directly add all individual values into the mutable dictionary where we store all data.</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">&nbsp; &nbsp; ABMultiValueRef addressRef <span style="color: #002200;">=</span> ABRecordCopyValue<span style="color: #002200;">(</span>person, kABPersonAddressProperty<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>ABMultiValueGetCount<span style="color: #002200;">(</span>addressRef<span style="color: #002200;">)</span> &gt; <span style="color: #2400d9;">0</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>addressDict <span style="color: #002200;">=</span> <span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>ABMultiValueCopyValueAtIndex<span style="color: #002200;">(</span>addressRef, <span style="color: #2400d9;">0</span><span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">[</span>addressDict objectForKey<span style="color: #002200;">:</span><span style="color: #002200;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>kABPersonAddressStreetKey<span style="color: #002200;">]</span> forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"address"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">[</span>addressDict objectForKey<span style="color: #002200;">:</span><span style="color: #002200;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>kABPersonAddressZIPKey<span style="color: #002200;">]</span> forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"zipCode"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">[</span>addressDict objectForKey<span style="color: #002200;">:</span><span style="color: #002200;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>kABPersonAddressCityKey<span style="color: #002200;">]</span> forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"city"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>addressRef<span style="color: #002200;">)</span>;</div></td></tr></tbody></table></div>
<p>Finally, let’s get the contact image as a <em>NSData</em> object, if exists of course. Without commenting anything further, I present the code which is pretty clear:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>ABPersonHasImageData<span style="color: #002200;">(</span>person<span style="color: #002200;">)</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/"><span style="color: #400080;">NSData</span></a> <span style="color: #002200;">*</span>contactImageData <span style="color: #002200;">=</span> <span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/"><span style="color: #400080;">NSData</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>ABPersonCopyImageDataWithFormat<span style="color: #002200;">(</span>person, kABPersonImageFormatThumbnail<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span>contactImageData forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"image"</span><span style="color: #002200;">]</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>All desired values now exist in the <em>contactInfoDict</em> dictionary, which needs to be added to the <em>arrContactsData</em> array:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>_arrContactsData <span style="color: #002200;">==</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; _arrContactsData <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> alloc<span style="color: #002200;">]</span> init<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>_arrContactsData addObject<span style="color: #002200;">:</span>contactInfoDict<span style="color: #002200;">]</span>;</div></td></tr></tbody></table></div>
<p>Two easy final steps have been left and we are ready. The first one is to reload the table view data, and the second one is to dismiss the address book controller. Here it is:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">[</span>self.tableView reloadData<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <br>
<span style="color: #002200;">[</span>_addressBookController dismissViewControllerAnimated<span style="color: #002200;">:</span><span style="color: #a61390;">YES</span> completion<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">]</span>;</div></td></tr></tbody></table></div>
<p>The heart of our application has been implemented. Go ahead and test the application. You’ll see that when you select a contact from the address book, it will appear on the table view of our app after the address book controller has gone away. Right below, you see the delegate method with its code all-together:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">BOOL</span><span style="color: #002200;">)</span>peoplePickerNavigationController<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABPeoplePickerNavigationController <span style="color: #002200;">*</span><span style="color: #002200;">)</span>peoplePicker shouldContinueAfterSelectingPerson<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABRecordRef<span style="color: #002200;">)</span>person<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/"><span style="color: #400080;">NSMutableDictionary</span></a> <span style="color: #002200;">*</span>contactInfoDict <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/"><span style="color: #400080;">NSMutableDictionary</span></a> alloc<span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; initWithObjects<span style="color: #002200;">:</span>@<span style="color: #002200;">[</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span><span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; forKeys<span style="color: #002200;">:</span>@<span style="color: #002200;">[</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"firstName"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"lastName"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"mobileNumber"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeNumber"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeEmail"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"workEmail"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"address"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"zipCode"</span>, <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"city"</span><span style="color: #002200;">]</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; CFTypeRef generalCFObject <span style="color: #002200;">=</span> ABRecordCopyValue<span style="color: #002200;">(</span>person, kABPersonFirstNameProperty<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>generalCFObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>generalCFObject forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"firstName"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>generalCFObject<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; generalCFObject <span style="color: #002200;">=</span> ABRecordCopyValue<span style="color: #002200;">(</span>person, kABPersonLastNameProperty<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>generalCFObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>generalCFObject forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"lastName"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>generalCFObject<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; ABMultiValueRef phonesRef <span style="color: #002200;">=</span> ABRecordCopyValue<span style="color: #002200;">(</span>person, kABPersonPhoneProperty<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #a61390;">for</span> <span style="color: #002200;">(</span><span style="color: #a61390;">int</span> i<span style="color: #002200;">=</span><span style="color: #2400d9;">0</span>; i&lt;ABMultiValueGetCount<span style="color: #002200;">(</span>phonesRef<span style="color: #002200;">)</span>; i<span style="color: #002200;">++</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; CFStringRef currentPhoneLabel <span style="color: #002200;">=</span> ABMultiValueCopyLabelAtIndex<span style="color: #002200;">(</span>phonesRef, i<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; CFStringRef currentPhoneValue <span style="color: #002200;">=</span> ABMultiValueCopyValueAtIndex<span style="color: #002200;">(</span>phonesRef, i<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>CFStringCompare<span style="color: #002200;">(</span>currentPhoneLabel, kABPersonPhoneMobileLabel, <span style="color: #2400d9;">0</span><span style="color: #002200;">)</span> <span style="color: #002200;">==</span> kCFCompareEqualTo<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>currentPhoneValue forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"mobileNumber"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>CFStringCompare<span style="color: #002200;">(</span>currentPhoneLabel, kABHomeLabel, <span style="color: #2400d9;">0</span><span style="color: #002200;">)</span> <span style="color: #002200;">==</span> kCFCompareEqualTo<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>currentPhoneValue forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeNumber"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>currentPhoneLabel<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>currentPhoneValue<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>phonesRef<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; ABMultiValueRef emailsRef <span style="color: #002200;">=</span> ABRecordCopyValue<span style="color: #002200;">(</span>person, kABPersonPhoneProperty<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #a61390;">for</span> <span style="color: #002200;">(</span><span style="color: #a61390;">int</span> i<span style="color: #002200;">=</span><span style="color: #2400d9;">0</span>; i <span style="color: #2400d9;">0</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>addressDict <span style="color: #002200;">=</span> <span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>ABMultiValueCopyValueAtIndex<span style="color: #002200;">(</span>addressRef, <span style="color: #2400d9;">0</span><span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">[</span>addressDict objectForKey<span style="color: #002200;">:</span><span style="color: #002200;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>kABPersonAddressStreetKey<span style="color: #002200;">]</span> forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"address"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">[</span>addressDict objectForKey<span style="color: #002200;">:</span><span style="color: #002200;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>kABPersonAddressZIPKey<span style="color: #002200;">]</span> forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"zipCode"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span><span style="color: #002200;">[</span>addressDict objectForKey<span style="color: #002200;">:</span><span style="color: #002200;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>kABPersonAddressCityKey<span style="color: #002200;">]</span> forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"city"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; CFRelease<span style="color: #002200;">(</span>addressRef<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>ABPersonHasImageData<span style="color: #002200;">(</span>person<span style="color: #002200;">)</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/"><span style="color: #400080;">NSData</span></a> <span style="color: #002200;">*</span>contactImageData <span style="color: #002200;">=</span> <span style="color: #002200;">(</span>__bridge <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/"><span style="color: #400080;">NSData</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>ABPersonCopyImageDataWithFormat<span style="color: #002200;">(</span>person, kABPersonImageFormatThumbnail<span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>contactInfoDict setObject<span style="color: #002200;">:</span>contactImageData forKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"image"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>_arrContactsData <span style="color: #002200;">==</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; _arrContactsData <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> alloc<span style="color: #002200;">]</span> init<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>_arrContactsData addObject<span style="color: #002200;">:</span>contactInfoDict<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>self.tableView reloadData<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>_addressBookController dismissViewControllerAnimated<span style="color: #002200;">:</span><span style="color: #a61390;">YES</span> completion<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #a61390;">NO</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Before closing this chapter and move forward, go and add the next delegate method implementation to silence a warning that Xcode will show:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">BOOL</span><span style="color: #002200;">)</span>peoplePickerNavigationController<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABPeoplePickerNavigationController <span style="color: #002200;">*</span><span style="color: #002200;">)</span>peoplePicker shouldContinueAfterSelectingPerson<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABRecordRef<span style="color: #002200;">)</span>person property<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABPropertyID<span style="color: #002200;">)</span>property identifier<span style="color: #002200;">:</span><span style="color: #002200;">(</span>ABMultiValueIdentifier<span style="color: #002200;">)</span>identifier<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #a61390;">NO</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<h2>Display Contact Details</h2>
<p>It’s time now to concentrate on setting up the view controller that a contact’s details will be displayed to. So, open the <em>DetailViewController.h</em> and do the following:</p>
<ul>
<li>Adopt the <em>UITableViewDelegate</em> and <em>UITableViewDataSource</em> protocols.</li>
<li>Declare a public <em>NSDictionary</em> object that will contain the data passed from the master view controller.</li>
</ul>
<p>Remember that earlier we had declared some IBOutlet properties as well in this file, so having all those in mind edit your file and make it look like this:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> DetailViewController <span style="color: #002200;">:</span> UIViewController &lt;UITableViewDelegate, UITableViewDataSource&gt;<br>
<br>
<span style="color: #a61390;">@property</span> <span style="color: #002200;">(</span>nonatomic, strong<span style="color: #002200;">)</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>dictContactDetails;<br>
<br>
<span style="color: #a61390;">@property</span> <span style="color: #002200;">(</span>nonatomic, weak<span style="color: #002200;">)</span> IBOutlet UILabel <span style="color: #002200;">*</span>lblContactName;<br>
<span style="color: #a61390;">@property</span> <span style="color: #002200;">(</span>nonatomic, weak<span style="color: #002200;">)</span> IBOutlet UIImageView <span style="color: #002200;">*</span>imgContactImage;<br>
<span style="color: #a61390;">@property</span> <span style="color: #002200;">(</span>nonatomic, weak<span style="color: #002200;">)</span> IBOutlet UITableView <span style="color: #002200;">*</span>tblContactDetails;<br>
<br>
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Move now to the <em>DetailViewController.m</em> file and in the private section of the interface directly. In there declare just one private method that we will use to populate our data to the appropriate subviews.</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> DetailViewController <span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>populateContactData;<br>
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>After that, go to the <em>viewDidLoad</em> method to perform two tasks: Firstly, to make <em>self</em> (the <em>DetailViewController</em> class) the delegate and datasource of the table view. Next, to call the private method we just declared.</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>viewDidLoad<br>
<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>super viewDidLoad<span style="color: #002200;">]</span>;<br>
<br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>_tblContactDetails setDelegate<span style="color: #002200;">:</span>self<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>_tblContactDetails setDataSource<span style="color: #002200;">:</span>self<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>self populateContactData<span style="color: #002200;">]</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Our next goal is to implement the <em>populateContactData</em> private method. This one is going to be a really small method, as only three tasks will take place in it: The full name of the contact, composed by the first and last name will be displayed on the label, the contact image if exists it will be shown on the image view and finally the table view data will be reloaded, so as to show all values existing in the <em>dictContactDetails</em> dictionary.</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>populateContactData<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>contactFullName <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithFormat<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"%@ %@"</span>, <span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"firstName"</span><span style="color: #002200;">]</span>, <span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"lastName"</span><span style="color: #002200;">]</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>_lblContactName setText<span style="color: #002200;">:</span>contactFullName<span style="color: #002200;">]</span>;<br>
<br>
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Set the contact image.</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span><span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"image"</span><span style="color: #002200;">]</span> <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>_imgContactImage setImage<span style="color: #002200;">:</span><span style="color: #002200;">[</span>UIImage imageWithData<span style="color: #002200;">:</span><span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"image"</span><span style="color: #002200;">]</span><span style="color: #002200;">]</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>_tblContactDetails reloadData<span style="color: #002200;">]</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Let’s discuss a little bit about the table view now. The <em>tblContactDetails</em> table view will be used to display all the imported contact values except for the first and last name, as well as the contact image, whose value will be assigned directly to the image view and the label we created for them. In the table view we will create three sections; in the first one they will be displayed the two phone numbers, in the second one they will be displayed the two e-mail addresses and in the last section the street address info will appear. Each section is going to have its title. So, having said that, let’s add the next table view delegate methods:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">(</span>NSInteger<span style="color: #002200;">)</span>numberOfSectionsInTableView<span style="color: #002200;">:</span><span style="color: #002200;">(</span>UITableView <span style="color: #002200;">*</span><span style="color: #002200;">)</span>tableView<br>
<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #2400d9;">3</span>;<br>
<span style="color: #002200;">}</span><br>
<br>
<span style="color: #002200;">-</span> <span style="color: #002200;">(</span>NSInteger<span style="color: #002200;">)</span>tableView<span style="color: #002200;">:</span><span style="color: #002200;">(</span>UITableView <span style="color: #002200;">*</span><span style="color: #002200;">)</span>tableView numberOfRowsInSection<span style="color: #002200;">:</span><span style="color: #002200;">(</span>NSInteger<span style="color: #002200;">)</span>section<br>
<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>section <span style="color: #002200;">==</span> <span style="color: #2400d9;">0</span> || section <span style="color: #002200;">==</span> <span style="color: #2400d9;">1</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #2400d9;">2</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #2400d9;">3</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span><br>
<br>
<br>
<span style="color: #002200;">-</span><span style="color: #002200;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>tableView<span style="color: #002200;">:</span><span style="color: #002200;">(</span>UITableView <span style="color: #002200;">*</span><span style="color: #002200;">)</span>tableView titleForHeaderInSection<span style="color: #002200;">:</span><span style="color: #002200;">(</span>NSInteger<span style="color: #002200;">)</span>section<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">switch</span> <span style="color: #002200;">(</span>section<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">0</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"Phone Numbers"</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">1</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"E-mail Addresses"</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">2</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"Address Info"</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">default</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>The data display will take place in the <em>tableView:cellForRowAtIndexPath:</em> datasource method. In this one, depending on the <em>index path </em> section and row, the appropriate data will be assigned to both the cell’s text label and detail text label (subtitle text). The method doesn’t have any difficult part in it, so I’m pretty sure that just by looking at the code you’ll understand everything:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">(</span>UITableViewCell <span style="color: #002200;">*</span><span style="color: #002200;">)</span>tableView<span style="color: #002200;">:</span><span style="color: #002200;">(</span>UITableView <span style="color: #002200;">*</span><span style="color: #002200;">)</span>tableView cellForRowAtIndexPath<span style="color: #002200;">:</span><span style="color: #002200;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/"><span style="color: #400080;">NSIndexPath</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>indexPath<br>
<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; UITableViewCell <span style="color: #002200;">*</span>cell <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>tableView dequeueReusableCellWithIdentifier<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"Cell"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>cell <span style="color: #002200;">==</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; cell <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">[</span>UITableViewCell alloc<span style="color: #002200;">]</span> initWithStyle<span style="color: #002200;">:</span>UITableViewCellStyleSubtitle reuseIdentifier<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"Cell"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>cellText <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>;<br>
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>detailText <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span>;<br>
&nbsp; &nbsp; <span style="color: #a61390;">switch</span> <span style="color: #002200;">(</span>indexPath.section<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">0</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">switch</span> <span style="color: #002200;">(</span>indexPath.row<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">0</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cellText <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"mobileNumber"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; detailText <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"Mobile Number"</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">1</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cellText <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeNumber"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; detailText <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"Home Number"</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">1</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">switch</span> <span style="color: #002200;">(</span>indexPath.row<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">0</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cellText <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeEmail"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; detailText <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"Home E-mail"</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">1</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cellText <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"workEmail"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; detailText <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"Work E-mail"</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">2</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">switch</span> <span style="color: #002200;">(</span>indexPath.row<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">0</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cellText <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"address"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; detailText <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"Street Address"</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">1</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cellText <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"zipCode"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; detailText <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"ZIP Code"</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> <span style="color: #2400d9;">2</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cellText <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"city"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; detailText <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"City"</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">default</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">break</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; cell.textLabel.text <span style="color: #002200;">=</span> cellText;<br>
&nbsp; &nbsp; cell.detailTextLabel.text <span style="color: #002200;">=</span> detailText;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; <span style="color: #a61390;">return</span> cell;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Ready to test it? Well, don’t rush! The detail view controller might be ready, but one important thing has not yet been done; and that is to pass data from one view controller to another.</p>
<h2>Pass Contact Details</h2>
<p>Thankfully, this task is really easy and just a matter of a few lines. Head back to the <em>MasterViewController.m</em> file, and locate the <em>prepareForSegue:sender:</em> method. If you remember, at the beginning of this tutorial while deleting any unnecessary code we visited this one too, and we removed all code existed inside the condition block. Now it’s turn to add some code at the same place, therefore edit the method and make it exactly like the next code fragment:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>prepareForSegue<span style="color: #002200;">:</span><span style="color: #002200;">(</span>UIStoryboardSegue <span style="color: #002200;">*</span><span style="color: #002200;">)</span>segue sender<span style="color: #002200;">:</span><span style="color: #002200;">(</span><span style="color: #a61390;">id</span><span style="color: #002200;">)</span>sender<br>
<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span><span style="color: #002200;">[</span><span style="color: #002200;">[</span>segue identifier<span style="color: #002200;">]</span> isEqualToString<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"showDetail"</span><span style="color: #002200;">]</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>contactDetailsDictionary <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>_arrContactsData objectAtIndex<span style="color: #002200;">:</span>self.tableView.indexPathForSelectedRow.row<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span><span style="color: #002200;">[</span>segue destinationViewController<span style="color: #002200;">]</span> setDictContactDetails<span style="color: #002200;">:</span>contactDetailsDictionary<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>What we are doing here is clear enough. We are getting the dictionary object existing in the position of the <em>arrContactsData</em> array that’s equal to the selected row index, and then we are assigning it to the <em>dictContactDetails</em> dictionary object of the detail view controller, using the setter method shown above.</p>
<p>Our sample application is now almost ready, and almost fully functional. Go and give it a try if you want. Admire how contact details appear when selecting one listed on the master view controller.</p>
<h2>The Bonus Features!</h2>
<p>At the beginning of this tutorial I mentioned that we are going to add two bonus features on the sample application; how to make a call and how to send a SMS message through the app. Also, if you recall, when we designed the interface, we added a toolbar with two respective bar button items. Now that the app’s functionality has been completed, it’s time to work with these.</p>
<p>First of all, we need to create two <em>IBAction</em> methods that will trigger each action when those buttons get tapped. To implement the call feature, as you will later see, things are easy. The SMS message sending however is more complex, as it’s required to use one more framework, but it’s not too hard though. Let’s start creating all these, and everything will be explained on the way.</p>
<p>Start off by opening the <em>DetailViewController.h</em> file and add the next two <em>IBAction</em> method declaration:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span>IBAction<span style="color: #002200;">)</span>makeCall<span style="color: #002200;">:</span><span style="color: #002200;">(</span><span style="color: #a61390;">id</span><span style="color: #002200;">)</span>sender;<br>
<span style="color: #002200;">-</span><span style="color: #002200;">(</span>IBAction<span style="color: #002200;">)</span>sendSMS<span style="color: #002200;">:</span><span style="color: #002200;">(</span><span style="color: #a61390;">id</span><span style="color: #002200;">)</span>sender;</div></td></tr></tbody></table></div>
<p>It’s pretty clear what they are for. Before proceeding and while still being in this file, let’s add the following framework which we’ll need to implement the SMS sending functionality:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #6e371a;">#import &lt;MessageUI/MessageUI.h&gt;</span></div></td></tr></tbody></table></div>
<p>Also, it’s necessary to modify the <em>@interface</em> header, so to enable our class to adopt the message protocol. Besides that, let’s make our class conform to the <em>UIActionSheetDelegate</em> protocol, because we’ll use an <em>action sheet</em> to let users select a phone number.</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> DetailViewController <span style="color: #002200;">:</span> UIViewController &lt;UITableViewDelegate, UITableViewDataSource, UIActionSheetDelegate, MFMessageComposeViewControllerDelegate&gt;</div></td></tr></tbody></table></div>
<p>Now we can go to the next step. Open the <em>Main.storyboard</em> file to connect the two action methods to the bar button items, applying the same logic just like you did when you connected the IBOutlet properties to the subviews. The next figure will also help you:</p>
<div class="figure"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/t2_9_ibaction_connect.jpeg" alt="Storyboard Connecting IBAction" class="aligncenter size-full wp-image-2817" style="width:NaN%;"></div>
<p>Now head to the <em>DetailViewController.m</em> file, at the private section of the interface and declare the following three private methods:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>performPhoneAction<span style="color: #002200;">:</span><span style="color: #002200;">(</span><span style="color: #a61390;">BOOL</span><span style="color: #002200;">)</span>shouldMakeCall;<br>
<span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>makeCallToNumber<span style="color: #002200;">:</span><span style="color: #002200;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>numberToCall;<br>
<span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>sendSMSToNumber<span style="color: #002200;">:</span><span style="color: #002200;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>numberToSend;</div></td></tr></tbody></table></div>
<p>In the first method we will add code common for both making a call and sending a SMS message. Its parameter will define if its code will work for the first or the second case. This method will be called by our <em>IBAction</em> methods, where each one of them will set a different parameter value.</p>
<p>The next two methods are used to either make the actual call (the first one), or to send the SMS message (the second one). Which one will be called depends on the outcome of the previous method. You’ll find out upon implementation how everything will work.</p>
<p>Let’s create now the <em>performPhoneAction:</em> method. Let me present its logic first, and then I’ll provide the respective code. It’s known that when importing a contact from the address book, up to two phone numbers will be stored to our application (mobile and home numbers). If both phone numbers exist, it’s required to let user select what number wants to use in order to make a call or send a SMS message. Therefore, after checking if both of the numbers exist indeed, we will display an <em>action sheet</em> and allow user to make a choice. Depending on this choice and the parameter value, we will call then either the <em>makeCallToNumber:</em> or <em>sendSMSToNumber:</em> method through the action sheet delegate method (that’s why we adopted earlier its protocol). However, if not both phone numbers exist, then we need to check if any of them exists, and if that’s the case, then make the appropriate method call depending once again on the parameter value. Below it’s presented the code mathing to all these, and as you’ll see, there is nothing especially hard there:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>performPhoneAction<span style="color: #002200;">:</span><span style="color: #002200;">(</span><span style="color: #a61390;">BOOL</span><span style="color: #002200;">)</span>shouldMakeCall<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span><span style="color: #002200;">!</span><span style="color: #002200;">[</span><span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"mobileNumber"</span><span style="color: #002200;">]</span> isEqualToString<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span><span style="color: #002200;">]</span> <span style="color: #002200;">&amp;</span>amp;<span style="color: #002200;">&amp;</span>amp;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">!</span><span style="color: #002200;">[</span><span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeNumber"</span><span style="color: #002200;">]</span> isEqualToString<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span><span style="color: #002200;">]</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; UIActionSheet <span style="color: #002200;">*</span>phoneOptions <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">[</span>UIActionSheet alloc<span style="color: #002200;">]</span> initWithTitle<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"Pick a number"</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; delegate<span style="color: #002200;">:</span>self<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cancelButtonTitle<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"Cancel"</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; destructiveButtonTitle<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;otherButtonTitles<span style="color: #002200;">:</span><span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"mobileNumber"</span><span style="color: #002200;">]</span>, <span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeNumber"</span><span style="color: #002200;">]</span>, <span style="color: #a61390;">nil</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>phoneOptions showInView<span style="color: #002200;">:</span>self.view<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>shouldMakeCall<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>phoneOptions setTag<span style="color: #002200;">:</span><span style="color: #2400d9;">101</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>phoneOptions setTag<span style="color: #002200;">:</span><span style="color: #2400d9;">102</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>selectedPhoneNumber <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span><span style="color: #002200;">!</span><span style="color: #002200;">[</span><span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"mobileNumber"</span><span style="color: #002200;">]</span> isEqualToString<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span><span style="color: #002200;">]</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; selectedPhoneNumber <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"mobileNumber"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span><span style="color: #002200;">!</span><span style="color: #002200;">[</span><span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeNumber"</span><span style="color: #002200;">]</span> isEqualToString<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">""</span><span style="color: #002200;">]</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; selectedPhoneNumber <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>_dictContactDetails objectForKey<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"homeNumber"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>selectedPhoneNumber <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>shouldMakeCall<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>self makeCallToNumber<span style="color: #002200;">:</span>selectedPhoneNumber<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>self sendSMSToNumber<span style="color: #002200;">:</span>selectedPhoneNumber<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>If you’re curious why I’m setting a tag value depending on the parameter value, I just need to say that based on this value later inside the action sheet delegate method we will specify whether a call should  be made or a SMS message should be sent. The 101 and 102 values I set are random, so you may use any value you wish. Beyond that, notice that when they don’t exist both of the phone numbers, we only proceed if the <em>selectedPhoneNumber</em> value is not nil. Don’t worry about the <em>makeCallToNumber:</em> and the <em>sendSMSToNumber:</em> methods. We’ll implement them in a while.</p>
<p>Now that this method has been created, let’s call it. At first, implement the <em>makeCall:</em> IBAction method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span>IBAction<span style="color: #002200;">)</span>makeCall<span style="color: #002200;">:</span><span style="color: #002200;">(</span><span style="color: #a61390;">id</span><span style="color: #002200;">)</span>sender<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>self performPhoneAction<span style="color: #002200;">:</span><span style="color: #a61390;">YES</span><span style="color: #002200;">]</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>The <em>YES</em> value means that we call the <em>performPhoneAction</em> to perform a phone call. Similarly, implement the next IBaction method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span>IBAction<span style="color: #002200;">)</span>sendSMS<span style="color: #002200;">:</span><span style="color: #002200;">(</span><span style="color: #a61390;">id</span><span style="color: #002200;">)</span>sender<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>self performPhoneAction<span style="color: #002200;">:</span><span style="color: #a61390;">NO</span><span style="color: #002200;">]</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Inside the <em>performPhoneAction:</em> method we used an action sheet to provide a way of picking a phone number. Now, we need to handle the user selection, so any choice been made to trigger the appropriate action. At first, get the code and then we’ll discuss it:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>actionSheet<span style="color: #002200;">:</span><span style="color: #002200;">(</span>UIActionSheet <span style="color: #002200;">*</span><span style="color: #002200;">)</span>actionSheet clickedButtonAtIndex<span style="color: #002200;">:</span><span style="color: #002200;">(</span>NSInteger<span style="color: #002200;">)</span>buttonIndex<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>buttonIndex <span style="color: #002200;">!=</span> <span style="color: #2400d9;">3</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>selectedPhoneNumber <span style="color: #002200;">=</span> <span style="color: #002200;">[</span>actionSheet buttonTitleAtIndex<span style="color: #002200;">:</span>buttonIndex<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span><span style="color: #002200;">[</span>actionSheet tag<span style="color: #002200;">]</span> <span style="color: #002200;">==</span> <span style="color: #2400d9;">101</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>self makeCallToNumber<span style="color: #002200;">:</span>selectedPhoneNumber<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>self sendSMSToNumber<span style="color: #002200;">:</span>selectedPhoneNumber<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>All of our logic in this delegate method is based on the value of the index of the tapped button. When the Cancel button is tapped, there is no need to take any action, so using the condition shown above we exclude it from everything else. For any of the rest two buttons, we get the title of the tapped one. Having done so, it’s time to use the tag value of the action sheet. So, depending on the tag value, we make a call to the appropriate method so as to perform a proper action.</p>
<p>Right now we are a step away from getting finished with the call feature. Let’s implement the private method that does exactly that:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>makeCallToNumber<span style="color: #002200;">:</span><span style="color: #002200;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>numberToCall<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/"><span style="color: #400080;">NSURL</span></a> <span style="color: #002200;">*</span>phoneURL <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/"><span style="color: #400080;">NSURL</span></a> URLWithString<span style="color: #002200;">:</span><span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithFormat<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"tel:%@"</span>, numberToCall<span style="color: #002200;">]</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span><span style="color: #002200;">[</span><span style="color: #002200;">[</span>UIApplication sharedApplication<span style="color: #002200;">]</span> canOpenURL<span style="color: #002200;">:</span>phoneURL<span style="color: #002200;">]</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span><span style="color: #002200;">[</span>UIApplication sharedApplication<span style="color: #002200;">]</span> openURL<span style="color: #002200;">:</span>phoneURL<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Using a URL scheme it’s possible through the <em>sharedApplication</em> instance to make a phone call. Keep in mind that it’s very important to check if a call can be made using the way presented above, before continuing to the actual action. In fact, this mechanism makes use of the <em>Phone App</em> of the device and provides it with the number we want to call in the form of a <em>NSURL</em> object.</p>
<p>We are now ready with that! Let’s go to see how we can send a SMS message. The most important thing is to know whether the device can send a SMS (text) message or not. In this example, if the test device cannot do so, we will simply log a message regarding it. On the other hand, if the device is capable to send SMS messages, then it’s needed to initialize and use a <em>MFMessageComposeViewController</em> object. That’s the reason we imported the <em>MessageUI</em> framework. Managing this object is easy, as we just have to provide it with the target phone number (or a list of numbers, not in our case though), the text to be sent and present the message view controller. Let’s see how all this can be done:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>sendSMSToNumber<span style="color: #002200;">:</span><span style="color: #002200;">(</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">)</span>numberToSend<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span><span style="color: #002200;">!</span><span style="color: #002200;">[</span>MFMessageComposeViewController canSendText<span style="color: #002200;">]</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; NSLog<span style="color: #002200;">(</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"Unable to send SMS message."</span><span style="color: #002200;">)</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; MFMessageComposeViewController <span style="color: #002200;">*</span>sms <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">[</span>MFMessageComposeViewController alloc<span style="color: #002200;">]</span> init<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>sms setMessageComposeDelegate<span style="color: #002200;">:</span>self<span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>sms setRecipients<span style="color: #002200;">:</span><span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="color: #400080;">NSArray</span></a> arrayWithObjects<span style="color: #002200;">:</span>numberToSend, <span style="color: #a61390;">nil</span><span style="color: #002200;">]</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>sms setBody<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">"This is a SMS message from Appcoda.com"</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">[</span>self presentViewController<span style="color: #002200;">:</span>sms animated<span style="color: #002200;">:</span><span style="color: #a61390;">YES</span> completion<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">]</span>;<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>As you notice, there is the <em>canSendText</em> class method which returns YES or NO, depending on whether the device can send text messages or not.</p>
<p>Lastly, just before reaching the end, one last thing is remaining. To implement a required delegate method (and silence a Xcode warning):</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">(</span><span style="color: #a61390;">void</span><span style="color: #002200;">)</span>messageComposeViewController<span style="color: #002200;">:</span><span style="color: #002200;">(</span>MFMessageComposeViewController <span style="color: #002200;">*</span><span style="color: #002200;">)</span>controller didFinishWithResult<span style="color: #002200;">:</span><span style="color: #002200;">(</span>MessageComposeResult<span style="color: #002200;">)</span>result<span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #002200;">[</span>controller dismissViewControllerAnimated<span style="color: #002200;">:</span><span style="color: #a61390;">YES</span> completion<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">]</span>;<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>When this method it’s called, the text message view controller will get dismissed.</p>
<p>Everything is ready now! Note before trying to test the application that phone call and SMS sending features work only on real devices with a SIM card on them.</p>
<h2>Compile and Run the App</h2>
<p>If you haven’t done so in previous steps, then go ahead and run the application. Import contacts and view their details. Use real devices to test all features. Right next there are some screenshots of the app running.</p>
<div class="figure"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/addressbook-demo.jpg" alt="addressbook-demo" class="aligncenter size-full wp-image-2822" style="width:NaN%;"></div>
<h2>Summary</h2>
<p>Importing contact info from the address book into an application is a quite common task, and it’s almost certain that most of the developers will have to deal with it some time. The way the address book and its records are managed might seem a little bit peculiar at the beginning, but it’s not hard to work with it once you get to know it. Undoubtably, the most important part of this tutorial was the contact data importing process, and how the address book framework works. However, many more useful programming techniques were also presented and used, in order to become tools for making this sample project real. Working with address book doesn’t stop here, and of course it’s required a lot of reading to succeed to do more than just importing data. Nevertheless, I’m confident that this tutorial will become a guide for many readers who want to get involved with all these stuff. Happy reading!</p>
<p>For your complete reference, you can <a href="https://dl.dropboxusercontent.com/u/2857188/AddressBook.zip">download the address book project from here</a>. Make sure you use Xcode 5.0 (or up) to build the project.</p>
<p>As always, leave me comment and share your thought about the tutorial.</p>

<!-- Quick Adsense WordPress Plugin: http://quicksense.net/ -->
<div style="float:none;margin:20px 0 20px 0;text-align:center;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8501671653071605";
/* Appcoda_336_280_Ad */
google_ad_slot = "4009415334";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/show_ads.js">
</script><ins id="aswift_2_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><ins id="aswift_2_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><iframe width="336" height="280" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;"></iframe></ins></ins>
</div>

<div style="font-size:0px;height:0px;line-height:0px;margin:0;padding:0;clear:both"></div><h3>You May Like These:</h3><div style="clear: both"></div><div style="border: 0pt none ; margin: 0pt; padding: 0pt;"><a onmouseout="this.style.backgroundColor=&#39;#FFFFFF&#39;" onmouseover="this.style.backgroundColor=&#39;#EEEEEF&#39;" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/video-recording-playback-ios-programming/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2013/04/video-1-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">Create a Simple App for Video Recording and Playback</div></div></a><a onmouseout="this.style.backgroundColor=&#39;#FFFFFF&#39;" onmouseover="this.style.backgroundColor=&#39;#EEEEEF&#39;" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/ios-programming-tutorial-localization-apps/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2013/09/Localization-Feature-Photo-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">iOS Localization Tutorial: Localize Your Apps to Support Multiple Languages</div></div></a><a onmouseout="this.style.backgroundColor=&#39;#FFFFFF&#39;" onmouseover="this.style.backgroundColor=&#39;#EEEEEF&#39;" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/understanding-key-value-observing-coding/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2014/08/kvo-featured-150x150.png) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">Understanding Key-Value Observing and Coding</div></div></a><a onmouseout="this.style.backgroundColor=&#39;#FFFFFF&#39;" onmouseover="this.style.backgroundColor=&#39;#EEEEEF&#39;" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/local-notifications-ios8/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2014/12/ios8-local-notification-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">Creating Interactive Local Notifications in iOS 8</div></div></a></div><div style="clear: both"></div><span class="et_social_bottom_trigger"></span><!--<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.appcoda.com/ios-programming-import-contact-address-book/"
    dc:identifier="http://www.appcoda.com/ios-programming-import-contact-address-book/"
    dc:title="How To Import Contacts Using Address Book Framework"
    trackback:ping="http://www.appcoda.com/ios-programming-import-contact-address-book/trackback/" />
</rdf:RDF>-->
</div><div class="post-meta"><span class="categories">Filed Under: <a href="http://www.appcoda.com/course/" rel="category tag">Course</a>, <a href="http://www.appcoda.com/course/intermediate/" rel="category tag">Intermediate</a>, <a href="http://www.appcoda.com/tutorials/" rel="category tag">Tutorials</a></span> <span class="tags">Tagged With: <a href="http://www.appcoda.com/tag/abrecordref/" rel="tag">ABRecordRef</a>, <a href="http://www.appcoda.com/tag/address-book/" rel="tag">address book</a>, <a href="http://www.appcoda.com/tag/ios-programming/" rel="tag">iOS Programming</a>, <a href="http://www.appcoda.com/tag/ios-sdk/" rel="tag">iOS SDK</a>, <a href="http://www.appcoda.com/tag/objective-c/" rel="tag">Objective C</a></span></div><div class="after-post widget-area"><div id="text-8" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Get Free Chapters of Our Swift Book</h4>
			<div class="textwidget"><a href="http://www.appcoda.com/swift/"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/swift-book-cover-227x300.png" alt="Beginning iOS 8 Programming with Swift" class="alignright size-medium wp-image-4153" style="width:26.31578947368421%;"></a>If you want to create an app but don't know where to begin, this book covers the whole aspect of Swift programming and iOS 8 development and shows you every step from an idea to a real app on App Store. This book features a lot of hands-on exercises and projects. You will first create a simple app, then prototype an app idea, and later add some features to it in each chapter, until a real app is built. Want to learn more? <a href="http://www.appcoda.com/swift/">Check it out here and get three free chapters.</a>
<p></p>
<br></div>
		</div></div>
<div id="featured-page-2" class="widget featured-content featuredpage"><div class="widget-wrap"><h4 class="widget-title widgettitle">Sign Up for our Free Tutorials</h4>
<div class="post-38 page type-page status-publish has-post-thumbnail hentry entry"><ul>
<li>Learn iOS Programming From Scratch</li>
<li>Step by Step Guide to Build Your First iPhone App</li>
<li>Complete Source Code for Your Reference</li>
<li>More Programming Tips and Tutorials to Come</li>
</ul>
<div class="enews">
<h4 class="widgettitle">Whatcha waiting for?</h4>
<form action="http://sendy.appcoda.com/sendy/subscribe" method="post" id="subscribe" name="mc-embedded-subscribe-form" class="validate" target="_blank" accept-charset="utf-8">
	<input type="email" id="subbox" value="" name="email" class="email" placeholder="Enter your email address" required=""><input type="submit" value="Subscribe" name="subscribe" id="subbutton" class="button"><br>
	<input type="hidden" name="list" value="KEdC8BeT8EC8znOnfjSQAw"><br>
</form>
</div>
</div></div></div>
</div></div><div class="author-box"><div><img alt="" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/582c964c3dafd700a4df627225d859fe" srcset="http://2.gravatar.com/avatar/582c964c3dafd700a4df627225d859fe?s=140&amp;d=mm&amp;r=g 2x" class="avatar avatar-70 photo" height="70" width="70"> <strong>About Gabriel Theodoropoulos</strong><br><p>Gabriel has been a software developer for about two decades. He has long experience in developing software solutions for various platforms in many programming languages. Since middle-2010 he has been developing almost exclusively for iOS. Tutorials consist of the best way to share knowledge with people all over the world. Follow Gabriel at <a href="http://plus.google.com/+gabrieltheodoropoulos">Google+</a> and <a href="https://twitter.com/gabtheodor">Twitter</a>.</p>
</div></div>
<div id="disqus_thread"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/saved_resource.html" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 0px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div>

<script type="text/javascript">
var disqus_url = 'http://www.appcoda.com/ios-programming-import-contact-address-book/';
var disqus_identifier = '2799 http://www.appcoda.com/?p=2799';
var disqus_container_id = 'disqus_thread';
var disqus_shortname = 'appcoda';
var disqus_title = "How To Import Contacts Using Address Book Framework";
var disqus_config_custom = window.disqus_config;
var disqus_config = function () {
    /*
    All currently supported events:
    onReady: fires when everything is ready,
    onNewComment: fires when a new comment is posted,
    onIdentify: fires when user is authenticated
    */
    
    
    this.language = '';
        this.callbacks.onReady.push(function () {

        // sync comments in the background so we don't block the page
        var script = document.createElement('script');
        script.async = true;
        script.src = '?cf_action=sync_comments&post_id=2799';

        var firstScript = document.getElementsByTagName('script')[0];
        firstScript.parentNode.insertBefore(script, firstScript);
    });
    
    if (disqus_config_custom) {
        disqus_config_custom.call(this);
    }
};

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>

</div><div id="sidebar" class="sidebar widget-area"><div id="search-4" class="widget widget_search"><div class="widget-wrap"><form role="search" method="get" id="searchform" class="searchform" action="http://www.appcoda.com/">
                    <div><label class="screen-reader-text" for="s">Search for:</label>
                    <input type="text" value="" name="s" id="s">
                    <input type="submit" id="searchsubmit" value="Search">
                    </div>
                    </form></div></div>
<div id="text-2" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Sign Up for Our Free Tutorials</h4>
			<div class="textwidget"><div class="enews"><form action="http://sendy.appcoda.com/sendy/subscribe" method="post" id="subscribe" name="mc-embedded-subscribe-form" class="validate" target="_blank" accept-charset="utf-8">
	<input type="email" id="subbox" value="" name="email" class="email" placeholder="Enter your email address" required=""><input type="submit" value="Subscribe" name="subscribe" id="subbutton" class="button">
	<input type="hidden" name="list" value="KEdC8BeT8EC8znOnfjSQAw">
</form>
</div></div>
		</div></div>
<div id="text-6" class="widget widget_text"><div class="widget-wrap">			<div class="textwidget"><!-- BuySellAds Zone Code -->
<div id="bsap_1283996" class="bsap bsap_1283996" data-serve="CYAD42T">
<style type="text/css">
div.bsap_1283996{width:100%;display:block;}div.bsap_1283996 a{width:125px;}div.bsap_1283996 a img{padding:0;}div.bsap_1283996 a em{font-style:normal;}div.bsap_1283996 a{display:block;font-size:11px;color:#888;font-family:verdana,sans-serif;margin:0 4px 10px 0;text-align:center;text-decoration:none;overflow:hidden;float:left;}
div.bsap_1283996 img{border:0;clear:right;}
div.bsap_1283996 a.adhere{color:#666;font-weight:bold;font-size:12px;border:1px solid #ccc;background:#e7e7e7;text-align:center;}
div.bsap_1283996 a.adhere:hover{border:1px solid #999;background:#ddd;color:#333;}div.bsap_1283996 a{line-height:100%;}div.bsap_1283996 a.adhere{width:125px;height:125px;line-height:1000%;}html>body div.bsap_1283996 a.adhere{width:123px;height:123px;}div.bsap_1283996 img.s{height:0;width:0;}
</style>
<!-- no ad --><iframe width="125" height="125" id="ad_4768828_frame" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/raw_42c0cf2a90cc2f5010ffba311bdd2af7.html" frameborder="0" class="bsap_adframe" scrolling="no"></iframe>

<script type="text/javascript" id="auto_1" class="ignoreme"> if (typeof(_bsap_serving_callback) !== 'undefined') _bsap_serving_callback(16771, 'CYAD42T', ''); </script><a href="http://srv.buysellads.com/ads/click/x/GTND423ICTAI4KJJF6Y4YKQWCKYDE53WFTAITZ3JCE7IT53NFTBIP23KC6BDCK37CTSDVK3EHJNCLSIZ" class="ad2  even" title="Easy way from YouTube to iTunes!" id="bsa_5594993" target="_blank" rel="nofollow">
<img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/265412-1428507577.png" width="" height="" alt=""></a><a href="http://srv.buysellads.com/ads/click/x/GTND423ICTAI4KJJF6Y4YKQWCKYDE5QECEYDVZ3JCE7IT537CWSDV53KC6BDCK37CTSDVK3EHJNCLSIZ" class="ad3 odd " title="Native, Instant, Automatic iOS to Android Code Conversion" id="bsa_5269316" target="_blank" rel="nofollow">
<img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/248127-1416917132.gif" width="" height="" alt=""></a><a href="http://srv.buysellads.com/ads/click/x/GTND423ICTAI4KJJF6Y4YKQWCKYDE5QECEYDPZ3JCE7IT537CWSDPK3KC6BDCK37CTSDVK3EHJNCLSIZ" class="ad4  even" title="FREE Advanced prototyping app for iOS." id="bsa_4950222" target="_blank" rel="nofollow">
<img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/232301-1406587609.png" width="" height="" alt=""></a><a href="http://srv.buysellads.com/ads/click/x/GTND423ICTAI4KJJF6Y4YKQWCKYDE5QECEYDKZ3JCE7IT537CWSDPKQKC6BDCK37CTSDVK3EHJNCLSIZ" class="ad5 odd " title="Design iOS apps with Swift" id="bsa_4974784" target="_blank" rel="nofollow">
<img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/233738-1407626335.png" width="" height="" alt=""></a>
<script type="text/javascript" id="auto_2" class="ignoreme"> if (typeof(BSACallback) !== 'undefined') BSACallback(); </script></div>
<!-- End BuySellAds Zone Code --></div>
		</div></div>
<div id="text-4" class="widget widget_text"><div class="widget-wrap">			<div class="textwidget"><div class="fb-like-box" data-href="http://www.facebook.com/appcodamobile" data-width="300" data-height="260" data-show-faces="true" data-border-color="#F1F1F1" data-stream="false" data-header="false"></div></div>
		</div></div>
		<div id="recent-posts-3" class="widget widget_recent_entries"><div class="widget-wrap">		<h4 class="widget-title widgettitle">Recent Posts</h4>
		<ul>
					<li>
				<a href="http://www.appcoda.com/react-native-introduction/">Introduction to React Native: Building iOS Apps with JavaScript</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/cloudkit-introduction-tutorial/">Working with CloudKit in iOS 8</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/instagram-app-parse-swift/">Building an Instagram-Like App with Parse and Swift</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/google-maps-api-tutorial/">A Swift Tutorial for Google Maps SDK</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/ios8-share-extension-swift/">Building a Simple Share Extension in iOS 8 App</a>
						</li>
				</ul>
		</div></div>
<div id="wp_insert_ad_widget-3" class="widget widget_wp_insert_ad_widget"><div class="widget-wrap"><div class="wpInsert wpInsertAdWidget" style="margin: 5px; padding: 0px;"><script async="" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/adsbygoogle.js"></script>
<!-- Premium Large Skyscraper -->
<ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-8501671653071605" data-ad-slot="6120307730" data-adsbygoogle-status="done"><ins id="aswift_3_expand" style="display:inline-table;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><ins id="aswift_3_anchor" style="display:block;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><iframe width="300" height="600" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_3" name="aswift_3" style="left:0;position:absolute;top:0;"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></div></div>
<div id="nav_menu-3" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Connect With Us</h4>
<div class="menu-sidebar-container"><ul id="menu-sidebar" class="menu"><li id="menu-item-57" class="social-twitter menu-item menu-item-type-custom menu-item-object-custom menu-item-57"><a href="http://twitter.com/appcodamobile">Twitter</a></li>
<li id="menu-item-58" class="social-facebook menu-item menu-item-type-custom menu-item-object-custom menu-item-58"><a href="http://facebook.com/appcodamobile">Facebook</a></li>
<li id="menu-item-59" class="social-rss menu-item menu-item-type-custom menu-item-object-custom menu-item-59"><a href="http://feeds.feedburner.com/appcoda">RSS</a></li>
<li id="menu-item-68" class="social-plus menu-item menu-item-type-custom menu-item-object-custom menu-item-68"><a href="https://plus.google.com/b/118438564257465271998/">Google Plus</a></li>
</ul></div></div></div>
</div></div></div></div><div id="footer-widgets" class="footer-widgets"><div class="wrap"><div class="footer-widgets-1 widget-area"><div id="nav_menu-4" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">About AppCoda</h4>
<div class="menu-default-container"><ul id="menu-default-1" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a href="http://www.appcoda.com/about/">About</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-28"><a href="http://www.appcoda.com/tutorials/">Tutorials</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-530"><a href="http://www.appcoda.com/ios-programming-course/">Course</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3045"><a title="Swift Programming Book for iOS 8" href="http://www.appcoda.com/swift">Book</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2140"><a href="http://www.appcoda.com/ios-app-kit/ios-game-kit.html">Game Kit</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-710"><a href="http://www.appcoda.com/marketplace/">Marketplace</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-34"><a href="http://www.appcoda.com/contact/">Contact</a></li>
</ul></div></div></div>
</div><div class="footer-widgets-2 widget-area"><div id="text-9" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Get Our New Book</h4>
			<div class="textwidget"><a href="http://www.appcoda.com/swift/"><img src="./How To Import Contacts Using Address Book API _ iOS Programming_files/swift-book-cover-227x300.png" alt="Beginning iOS 8 Programming with Swift" class="alignleft size-medium wp-image-4153"></a></div>
		</div></div>
</div><div class="footer-widgets-3 widget-area"><div id="nav_menu-5" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Connect With Us</h4>
<div class="menu-sidebar-container"><ul id="menu-sidebar-1" class="menu"><li class="social-twitter menu-item menu-item-type-custom menu-item-object-custom menu-item-57"><a href="http://twitter.com/appcodamobile">Twitter</a></li>
<li class="social-facebook menu-item menu-item-type-custom menu-item-object-custom menu-item-58"><a href="http://facebook.com/appcodamobile">Facebook</a></li>
<li class="social-rss menu-item menu-item-type-custom menu-item-object-custom menu-item-59"><a href="http://feeds.feedburner.com/appcoda">RSS</a></li>
<li class="social-plus menu-item menu-item-type-custom menu-item-object-custom menu-item-68"><a href="https://plus.google.com/b/118438564257465271998/">Google Plus</a></li>
</ul></div></div></div>
<div id="text-3" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Email Newsletter</h4>
			<div class="textwidget"><p>Sign up to receive free tutorial and
to hear what's going on with AppCoda!</p>
<div class="enews"><form action="http://sendy.appcoda.com/sendy/subscribe" method="post" id="subscribe" name="mc-embedded-subscribe-form" class="validate" target="_blank" accept-charset="utf-8">
	<input type="email" id="subbox" value="" name="email" class="email" placeholder="Enter your email address" required=""><input type="submit" value="Subscribe" name="subscribe" id="subbutton" class="button">
	<input type="hidden" name="list" value="KEdC8BeT8EC8znOnfjSQAw">
</form>
</div></div>
		</div></div>
</div></div></div><div id="footer" class="footer"><div class="wrap">    <p>© Copyright 2015 <a href="http://appcoda.com/">AppCoda</a> · All Rights Reserved · Powered by <a href="http://wordpress.org/">WordPress · </a><a href="http://www.appcoda.com/privacy-policy">Privacy Policy</a> · <a href="http://www.appcoda.com/terms-of-service/">Terms of Service</a></p>
    </div></div></div><!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
<script src="./How To Import Contacts Using Address Book API _ iOS Programming_files/prism.js"></script>        <script type="text/javascript">
        // <![CDATA[
        var disqus_shortname = 'appcoda';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('data-dsqidentifier'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) { url = url[0]; }
                    else { url = url[1]; }
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script'); 
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        // ]]>
        </script>
                    <!-- Version: 0.3.3 -->
            <script type="text/javascript">
                var EjSocialSlideoutJsApi_Settings =
                {
                    SliderImage: "<img width=\"150\" height=\"150\" src=\"http:\/\/www.appcoda.com\/wp-content\/uploads\/2015\/04\/appcoda-300-150x150.png\" class=\"attachment-thumbnail\" alt=\"appcoda-300\" \/>",
                    SocialProfiles: {"Facebook":{"Name":"Facebook","NetworkId":"Facebook","IsActive":true,"Id":"appcodamobile","Title":"Follow Us on Facebook","Description":"And get free tutorial updates"},"Twitter":{"Name":"Twitter","NetworkId":"Twitter","IsActive":true,"Id":"appcodamobile","Title":"Follow Us on Twitter","Description":"And get free tutorial updates"}},
                    Preview: false
                                    };

                if (typeof (EjSocialSlideoutJsApi) !== "undefined")
                    EjSocialSlideoutJsApi.SettingsLoaded(EjSocialSlideoutJsApi_Settings);
            </script>
            <div id="ej-ss-slideout-dom-templates" style="display:none"><div id="ej-ss-slideout-dom-template-facebook"><div class="fb-follow" data-href="https://www.facebook.com/appcodamobile" data-width="210" data-colorscheme="light" data-layout="standard" data-show-faces="true"></div></div><div id="ej-ss-slideout-dom-template-twitter"><a href="https://twitter.com/appcodamobile" class="twitter-follow-button" data-show-count="true" data-size="medium">Follow @appcodamobile</a></div></div><div class="et_social_sidebar_networks et_social_visible_sidebar et_social_slideright et_social_animated et_social_rectangle et_social_sidebar_flip et_social_sidebar_withcounts et_social_withtotalcount et_social_mobile_off" style="top: 197.5px;">
					<div class="et_social_totalcount et_social_dark">
							<span class="et_social_totalcount_count et_social_total_share" data-post_id="2799">57</span>
							<span class="et_social_totalcount_label">Shares</span>
						</div>
					<ul class="et_social_icons_container"><li class="et_social_facebook">
									<a href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.appcoda.com%2Fios-programming-import-contact-address-book%2F&t=How%20To%20Import%20Contacts%20Using%20Address%20Book%20Framework" class="et_social_share" rel="nofollow" data-social_name="facebook" data-post_id="2799" data-social_type="share">
										<i class="et_social_icon et_social_icon_facebook"></i>
										
										<div class="et_social_count"><span>38</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li><li class="et_social_twitter">
									<a href="http://twitter.com/share?text=How%20To%20Import%20Contacts%20Using%20Address%20Book%20Framework&url=http%3A%2F%2Fwww.appcoda.com%2Fios-programming-import-contact-address-book%2F&via=appcodamobile" class="et_social_share" rel="nofollow" data-social_name="twitter" data-post_id="2799" data-social_type="share">
										<i class="et_social_icon et_social_icon_twitter"></i>
										
										<div class="et_social_count"><span>12</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li><li class="et_social_googleplus">
									<a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.appcoda.com%2Fios-programming-import-contact-address-book%2F&t=How%20To%20Import%20Contacts%20Using%20Address%20Book%20Framework" class="et_social_share" rel="nofollow" data-social_name="googleplus" data-post_id="2799" data-social_type="share">
										<i class="et_social_icon et_social_icon_googleplus"></i>
										
										<div class="et_social_count"><span>5</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li><li class="et_social_linkedin">
									<a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fwww.appcoda.com%2Fios-programming-import-contact-address-book%2F&title=How%20To%20Import%20Contacts%20Using%20Address%20Book%20Framework" class="et_social_share" rel="nofollow" data-social_name="linkedin" data-post_id="2799" data-social_type="share">
										<i class="et_social_icon et_social_icon_linkedin"></i>
										
										<div class="et_social_count"><span>2</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li></ul>
					<span class="et_social_hide_sidebar et_social_icon"></span>
				</div><div class="et_social_flyin et_social_resize et_social_flyin_bottom_right et_social_slideup et_social_trigger_bottom et_social_mobile_on et_social_visible et_social_animated" style="height: 162px; max-height: 579px;">
					<a href="http://www.appcoda.com/ios-programming-import-contact-address-book/#" class="et_social_icon et_social_icon_cancel"></a>
					<div class="et_social_header">
						<h3>Share This</h3>
						<p>Share this post with your friends!</p>
					</div>
					<div class="et_social_networks et_social_2col et_social_slide et_social_rectangle et_social_left et_social_withnetworknames" style="height: 106px;">
						
						<ul class="et_social_icons_container"><li class="et_social_facebook"><a href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.appcoda.com%2Fios-programming-import-contact-address-book%2F&t=How%20To%20Import%20Contacts%20Using%20Address%20Book%20Framework" class="et_social_share" rel="nofollow" data-social_name="facebook" data-post_id="2799" data-social_type="share"><i class="et_social_icon et_social_icon_facebook"></i><div class="et_social_network_label"><div class="et_social_networkname">Facebook</div></div><span class="et_social_overlay"></span></a></li><li class="et_social_twitter"><a href="http://twitter.com/share?text=How%20To%20Import%20Contacts%20Using%20Address%20Book%20Framework&url=http%3A%2F%2Fwww.appcoda.com%2Fios-programming-import-contact-address-book%2F&via=appcodamobile" class="et_social_share" rel="nofollow" data-social_name="twitter" data-post_id="2799" data-social_type="share"><i class="et_social_icon et_social_icon_twitter"></i><div class="et_social_network_label"><div class="et_social_networkname">Twitter</div></div><span class="et_social_overlay"></span></a></li><li class="et_social_googleplus"><a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.appcoda.com%2Fios-programming-import-contact-address-book%2F&t=How%20To%20Import%20Contacts%20Using%20Address%20Book%20Framework" class="et_social_share" rel="nofollow" data-social_name="googleplus" data-post_id="2799" data-social_type="share"><i class="et_social_icon et_social_icon_googleplus"></i><div class="et_social_network_label"><div class="et_social_networkname">Google+</div></div><span class="et_social_overlay"></span></a></li><li class="et_social_linkedin"><a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fwww.appcoda.com%2Fios-programming-import-contact-address-book%2F&title=How%20To%20Import%20Contacts%20Using%20Address%20Book%20Framework" class="et_social_share" rel="nofollow" data-social_name="linkedin" data-post_id="2799" data-social_type="share"><i class="et_social_icon et_social_icon_linkedin"></i><div class="et_social_network_label"><div class="et_social_networkname">LinkedIn</div></div><span class="et_social_overlay"></span></a></li></ul>
					</div>
				</div><span></span><style type="text/css" class="fluid-images">img{max-width:100%;height:auto;}</style><div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/KTWTb9MY5lw.html" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/KTWTb9MY5lw(1).html" style="border: none;"></iframe></div></div></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script><script type="text/javascript">
/* <![CDATA[ */
var mejsL10n = {"language":"en-US","strings":{"Close":"Close","Fullscreen":"Fullscreen","Download File":"Download File","Download Video":"Download Video","Play\/Pause":"Play\/Pause","Mute Toggle":"Mute Toggle","None":"None","Turn off Fullscreen":"Turn off Fullscreen","Go Fullscreen":"Go Fullscreen","Unmute":"Unmute","Mute":"Mute","Captions\/Subtitles":"Captions\/Subtitles"}};
var _wpmejsSettings = {"pluginPath":"\/wp-includes\/js\/mediaelement\/"};
/* ]]> */
</script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/mediaelement-and-player.min.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/wp-mediaelement.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/jquery.form.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/www.appcoda.com\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Sending ...","cached":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/scripts.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/idle-timer.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var monarchSettings = {"ajaxurl":"http:\/\/www.appcoda.com\/wp-admin\/admin-ajax.php","pageurl":"http:\/\/www.appcoda.com\/ios-programming-import-contact-address-book\/","stats_nonce":"3c279d6f27","share_counts":"41afbcf48b","follow_counts":"80583e3ade","total_counts":"861aff4fd8","media_single":"ed7cd3edd6","media_total":"e88d48f2ea","generate_all_window_nonce":"6da8221303","no_img_message":"No images available for sharing on this page"};
/* ]]> */
</script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/custom.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/comment-reply.min.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/superfish.min.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/superfish.args.min.js"></script>
<script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/superfish.compat.min.js"></script>
<!-- This site converts visitors into subscribers and customers with the OptinMonster WordPress plugin v2.1.6.6 - http://optinmonster.com/ -->
<div id="om-d7egu9k5k9-lightbox" class="optin-monster-overlay" style="display:none;"><script type="text/javascript" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/webfont.js"></script><style type="text/css" class="om-theme-case-study-styles">.optin-monster-success-message {font-size: 21px;font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;color: #282828;font-weight: 300;text-align: center;margin: 0 auto;}.optin-monster-success-overlay .om-success-close {font-size: 32px !important;font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif !important;color: #282828 !important;font-weight: 300 !important;position: absolute !important;top: 0px !important;right: 10px !important;background: none !important;text-decoration: none !important;width: auto !important;height: auto !important;display: block !important;line-height: 32px !important;padding: 0 !important;}.om-helper-field {display: none !important;visibility: hidden !important;opacity: 0 !important;height: 0 !important;line-height: 0 !important;}html div#om-d7egu9k5k9-lightbox * {box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;}html div#om-d7egu9k5k9-lightbox {background:none;border:0;border-radius:0;-webkit-border-radius:0;-moz-border-radius:0;float:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing: grayscale;height:auto;letter-spacing:normal;outline:none;position:static;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;width:auto;visibility:visible;overflow:visible;margin:0;padding:0;line-height:1;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-shadow:none;-moz-box-shadow:none;-ms-box-shadow:none;-o-box-shadow:none;box-shadow:none;-webkit-appearance:none;}html div#om-d7egu9k5k9-lightbox {background: rgb(0, 0, 0);background: rgba(0, 0, 0, .7);font-family: helvetica,arial,sans-serif;-moz-osx-font-smoothing: grayscale;-webkit-font-smoothing: antialiased;line-height: 1;width: 100%;height: 100%;}html div#om-d7egu9k5k9-lightbox .om-clearfix {clear: both;}html div#om-d7egu9k5k9-lightbox .om-clearfix:after {clear: both;content: ".";display: block;height: 0;line-height: 0;overflow: auto;visibility: hidden;zoom: 1;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin {background: #fff;display: none;position: absolute;top: 50%;left: 50%;min-height: 175px;max-width: 700px;width: 100%;z-index: 734626274;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-wrap {position: relative;height: 100%;}html div#om-d7egu9k5k9-lightbox .om-close {position: absolute;top: -12px;right: -12px;text-decoration: none !important;display: block;width: 35px;height: 35px;background: url("http://www.appcoda.com/wp-content/plugins/optin-monster/assets/css/images/close.png") no-repeat scroll 0 0;z-index: 1500;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-bar {margin-bottom: 20px;clear: both;}html div#om-d7egu9k5k9-lightbox .om-bar {float: left;width: 25%;height: 11px;display: block;}html div#om-d7egu9k5k9-lightbox .om-red-bar {background-color: #ef3e36;}html div#om-d7egu9k5k9-lightbox .om-green-bar {background-color: #abb92e;}html div#om-d7egu9k5k9-lightbox .om-orange-bar {background-color: #f57826;}html div#om-d7egu9k5k9-lightbox .om-blue-bar {background-color: #17b4e9;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-header {min-height: 30px;padding: 15px;width: 100%;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-title {font-size: 24px;color: #484848;width: 100%;margin-bottom: 15px;text-shadow: 0 1px #fff;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-tagline {font-size: 16px;line-height: 1.25;color: #484848;width: 100%;margin-bottom: 30px;text-shadow: 0 1px #fff;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-content {padding: 15px;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-left {float: left;max-width: 280px;width: 100%;position: relative;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-image-container {position: relative;max-width: 280px;max-height: 245px;margin: 0 auto;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-image-container img {display: block;margin: 0 auto;text-align: center;height: auto;max-width: 100%;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-right {float: right;max-width: 370px;width: 100%;background-color: #dadada;margin-right: -15px;padding: 20px;position: relative;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-arrow {position: absolute;width: 49px;height: 56px;left: -40px;top: -40px;}html div#om-d7egu9k5k9-lightbox label {color: #333;}html div#om-d7egu9k5k9-lightbox input,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-name,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-email {background-color: #fff;width: 100%;border: 1px solid #ccc;font-size: 16px;line-height: 24px;padding: 10px 6px;overflow: hidden;outline: none;margin: 0 0 15px;vertical-align: middle;height: 46px;}html div#om-d7egu9k5k9-lightbox input[type=submit],html div#om-d7egu9k5k9-lightbox button,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-submit {background: #484848;border: 1px solid #484848;width: 100%;color: #fff;font-size: 20px;padding: 12px 6px;line-height: 28px;text-align: center;vertical-align: middle;cursor: pointer;margin: 0;height: 54px;}html div#om-d7egu9k5k9-lightbox input[type=checkbox],html div#om-d7egu9k5k9-lightbox input[type=radio] {-webkit-appearance: checkbox;width: auto;outline: invert none medium;padding: 0;margin: 0;}@media (max-width: 700px) {html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin[style] {width: 100%;position: relative;}html div#om-d7egu9k5k9-lightbox .om-close {right: 9px;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-left,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-right,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-name,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-email,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-submit,html div#om-d7egu9k5k9-lightbox .om-has-email #om-lightbox-case-study-optin-email {float: none;width: 100%;max-width: 100%;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-left,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-name,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-email {margin-bottom: 15px;}}@media only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx) {html div#om-d7egu9k5k9-lightbox .om-close {background-image: url("http://www.appcoda.com/wp-content/plugins/optin-monster/assets/css/images/<a class="__cf_email__" href="/cdn-cgi/l/email-protection" data-cfemail="85e6e9eaf6e0c5b7fdabf5ebe2">[email&#160;protected]</a><script cf-hash='f9e31' type="text/javascript">
/* <![CDATA[ */!function(){try{var t="currentScript"in document?document.currentScript:function(){for(var t=document.getElementsByTagName("script"),e=t.length;e--;)if(t[e].getAttribute("cf-hash"))return t[e]}();if(t&&t.previousSibling){var e,r,n,i,c=t.previousSibling,a=c.getAttribute("data-cfemail");if(a){for(e="",r=parseInt(a.substr(0,2),16),n=2;a.length-n;n+=2)i=parseInt(a.substr(n,2),16)^r,e+=String.fromCharCode(i);e=document.createTextNode(e),c.parentNode.replaceChild(e,c)}}}catch(u){}}();/* ]]> */</script>");background-size: 35px 35px;}}</style><div id="om-lightbox-case-study-optin" class="om-lightbox-case-study om-clearfix om-theme-case-study om-custom-html-form"><div id="om-lightbox-case-study-optin-wrap" class="om-clearfix"><a href="http://www.appcoda.com/ios-programming-import-contact-address-book/#" class="om-close" title="Close"></a><div id="om-lightbox-case-study-optin-bar" class="om-clearfix"><span class="om-bar om-red-bar"></span><span class="om-bar om-green-bar"></span><span class="om-bar om-orange-bar"></span><span class="om-bar om-blue-bar"></span></div><div id="om-lightbox-case-study-header" class="om-clearfix"><div id="om-lightbox-case-study-optin-title" data-om-action="editable" data-om-field="title" style="color:#484848;font-family:Bree Serif;font-size:32px;text-align:center;"><span style="font-family:montserrat;">FREE Swift Programming Course</span></div><div id="om-lightbox-case-study-optin-tagline" data-om-action="editable" data-om-field="tagline" style="color:#484848;font-family:Open Sans;font-size:24px;text-align:center;"><span style="font-family:montserrat;">Sign up today and get a 7 day email course with free tips and ebook chapters for starting app development.</span></div></div><div id="om-lightbox-case-study-content" class="om-clearfix"><div id="om-lightbox-case-study-left"><div id="om-lightbox-case-study-optin-image-container" class="om-image-container om-clearfix"><img class="optin-monster-image optin-monster-image-lightbox-case-study" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/swift-free-course-280x245.jpg" alt="" title="swift-free-course"></div></div><div id="om-lightbox-case-study-right"><img id="om-lightbox-case-study-arrow" src="./How To Import Contacts Using Address Book API _ iOS Programming_files/arrow.png" alt="Arrow"><form action="http://sendy.appcoda.com/sendy/subscribe" method="POST" accept-charset="utf-8">
<input id="om-lightbox-case-study-optin-name" type="text" name="name" value="" data-om-action="selectable" data-om-target="#optin-monster-field-name_field" placeholder="Enter your name here..." style="color:#484848;font-family:Montserrat;">
<input id="om-lightbox-case-study-optin-email" type="email" name="email" value="" data-om-action="selectable" data-om-target="#optin-monster-field-email_field" placeholder="Enter your email address here..." style="color:#484848;font-family:Montserrat;">
<input id="om-lightbox-case-study-optin-submit" type="submit" data-om-action="selectable" data-om-target="#optin-monster-field-submit_field" value="Send me the course" style="color:#ffffff;background-color:#484848;border-color:#484848;font-family:Montserrat;">
<input type="hidden" name="list" value="neAW97jagVmb3C3O892VnnLA">
</form></div></div></div><input type="email" name="email" value="" class="om-helper-field"><input type="text" name="website" value="" class="om-helper-field"></div><script type="text/javascript">jQuery(document).ready(function($){WebFont.load({google: {families: ['Montserrat%7CBree+Serif%7COpen+Sans']}});});</script></div>
<script type="text/javascript">var d7egu9k5k9_lightbox, omo = {"id":4744,"optin":"d7egu9k5k9-lightbox","campaign":"Free Swift Programming Course","clones":[""],"hash":"d7egu9k5k9-lightbox","optin_js":"d7egu9k5k9_lightbox","type":"lightbox","theme":"case-study","cookie":30,"delay":5000,"second":0,"exit":1,"redirect":"","redirect_pass":false,"custom":true,"test":false,"global_cookie":23320,"preview":false,"ajax":"http:\/\/www.appcoda.com\/?optin-monster-ajax-route=1","mobile":false,"post_id":2799,"preloader":"http:\/\/www.appcoda.com\/wp-content\/plugins\/optin-monster\/assets\/css\/images\/preloader.gif","error":"There was an error with your submission. Please try again.","ajax_error":"There was an error with the AJAX request: ","name_error":"Please enter a valid name.","email_error":"Please enter a valid email address.","bot_error":"Honeypot fields have been activated. Your submission is being flagged as potential spam.","success":"Thanks for subscribing! Please check your email for further instructions.","exit_sensitivity":20}; d7egu9k5k9_lightbox = new OptinMonster(); d7egu9k5k9_lightbox.init(omo);</script>
<!--[if lte IE 9]><script type="text/javascript">var om_ie_browser = true;</script><![endif]--><!-- / OptinMonster WordPress plugin. -->



<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Page Caching using disk: enhanced

 Served from: www.appcoda.com @ 2015-05-04 12:21:51 by W3 Total Cache --></body></html>