<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>How To Use SQLite to Manage Data in iOS Apps</title><link href="/prismjs/prism.css" rel="stylesheet" /><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<!-- This site is optimized with the Yoast WordPress SEO plugin v2.1.1 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="In this tutorial, we&#039;ll cover how to use SQLite database in iOS app. To give you a basic idea of SQLite, we&#039;ll build a sample iOS app together."/>
<link rel="canonical" href="http://www.appcoda.com/sqlite-database-ios-app-tutorial/" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:description" content="In this tutorial, we&#039;ll cover how to use SQLite database in iOS app. To give you a basic idea of SQLite, we&#039;ll build a sample iOS app together."/>
<meta name="twitter:title" content="How To Use SQLite to Manage Data in iOS Apps"/>
<meta name="twitter:site" content="@appcodamobile"/>
<meta name="twitter:domain" content="AppCoda"/>
<meta name="twitter:image:src" content="http://www.appcoda.com/wp-content/uploads/2014/06/sqlite-database.jpg"/>
<meta name="twitter:creator" content="@appcodamobile"/>
<script type='application/ld+json'>{"@context":"http:\/\/schema.org","@type":"WebSite","url":"http:\/\/www.appcoda.com\/","name":"AppCoda"}</script>
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="AppCoda &raquo; Feed" href="http://feeds.feedburner.com/appcoda" />
<link rel="alternate" type="application/rss+xml" title="AppCoda &raquo; Comments Feed" href="http://www.appcoda.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="AppCoda &raquo; How to Use SQLite to Manage Data in iOS Apps Comments Feed" href="http://www.appcoda.com/sqlite-database-ios-app-tutorial/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.appcoda.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.1"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f;c.supports={simple:d("simple"),flag:d("flag")},c.supports.simple&&c.supports.flag||(f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='mediaelement-css'  href='http://www.appcoda.com/wp-includes/js/mediaelement/mediaelementplayer.min.css?ver=2.16.2' type='text/css' media='all' />
<link rel='stylesheet' id='wp-mediaelement-css'  href='http://www.appcoda.com/wp-includes/js/mediaelement/wp-mediaelement.css?ver=4.2.1' type='text/css' media='all' />
<link rel='stylesheet' id='eleven40-theme-css'  href='http://www.appcoda.com/wp-content/themes/eleven40/style.css?ver=2.1.2' type='text/css' media='all' />
<link rel='stylesheet' id='contact-form-7-css'  href='http://www.appcoda.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.1.2' type='text/css' media='all' />
<link rel='stylesheet' id='ej-socialslideout-content-style-css'  href='http://www.appcoda.com/wp-content/plugins/ej-socialslider/static/slideout.css?ver=4.2.1' type='text/css' media='all' />
<link rel='stylesheet' id='et_monarch-open-sans-css'  href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' type='text/css' media='all' />
<link rel='stylesheet' id='et_monarch-css-css'  href='http://www.appcoda.com/wp-content/plugins/monarch/css/style.css?ver=1.2.2' type='text/css' media='all' />
<link rel='stylesheet' id='codecolorer-css'  href='http://www.appcoda.com/wp-content/plugins/codecolorer/codecolorer.css?ver=0.9.9' type='text/css' media='screen' />
<script type='text/javascript' src='http://www.appcoda.com/wp-includes/js/jquery/jquery.js?ver=1.11.2'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/wp-fluid-images//lib/fluidimage.js?ver=1.0'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/ej-socialslider/static/slideout.js?ver=4.2.1'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/optin-monster/assets/js/api.js?ver=2.1.6.6'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/qards//js/iframeResizer.min.js?ver=4.2.1'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/qards//js/iframeResizer.contentWindow.min.js?ver=4.2.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.appcoda.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.appcoda.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.2.1" />
<link rel='shortlink' href='http://www.appcoda.com/?p=3778' />
<style type="text/css" id="et-social-custom-css">
				 
			</style><link rel="Shortcut Icon" href="http://www.appcoda.com/wp-content/themes/eleven40/images/favicon.ico" type="image/x-icon" />
<link rel="pingback" href="http://www.appcoda.com/xmlrpc.php" />
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-223304-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></head>
<body class="single single-post postid-3778 single-format-standard et_monarch header-image content-sidebar"><div id="wrap"><div id="header"><div class="wrap"><div id="title-area"><p id="title"><a href="http://www.appcoda.com/">AppCoda</a></p><p id="description">Your iOS Programming Community</p></div><div class="widget-area header-widget-area"><div id="nav_menu-2" class="widget widget_nav_menu"><div class="widget-wrap"><div class="menu-default-container"><ul id="menu-default" class="menu genesis-nav-menu js-superfish"><li id="menu-item-26" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a href="http://www.appcoda.com/about/">About</a></li>
<li id="menu-item-28" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28"><a href="http://www.appcoda.com/tutorials/">Tutorials</a></li>
<li id="menu-item-530" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-530"><a href="http://www.appcoda.com/ios-programming-course/">Course</a></li>
<li id="menu-item-3045" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3045"><a title="Swift Programming Book for iOS 8" href="http://www.appcoda.com/swift">Book</a></li>
<li id="menu-item-2140" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2140"><a href="http://www.appcoda.com/ios-app-kit/ios-game-kit.html">Game Kit</a></li>
<li id="menu-item-710" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-710"><a href="http://www.appcoda.com/marketplace/">Marketplace</a></li>
<li id="menu-item-34" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-34"><a href="http://www.appcoda.com/contact/">Contact</a></li>
</ul></div></div></div>
</div></div></div><div id="inner"><div class="wrap"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Leaderboard Responsive Ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-8501671653071605"
     data-ad-slot="1756840139"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script><div id="content-sidebar-wrap"><div id="content" class="hfeed"><div class="post-3778 post type-post status-publish format-standard hentry category-course category-intermediate tag-database-programming tag-ios-programming tag-sqlite tag-xcode-5 entry"><h1 class="entry-title">How to Use SQLite to Manage Data in iOS Apps</h1> 
<div class="post-info"><span class="date published time" title="2014-07-01T00:53:56+00:00">July 1, 2014</span>  by <span class="author vcard"><span class="fn"><a href="http://www.appcoda.com/author/gabrielth/" rel="author">Gabriel Theodoropoulos</a></span></span> <span class="post-comments"><a href="http://www.appcoda.com/sqlite-database-ios-app-tutorial/#comments"><span class="dsq-postid" data-dsqidentifier="3778 http://www.appcoda.com/?p=3778">77 Comments</span></a></span> </div><div class="entry-content">
<!-- Quick Adsense WordPress Plugin: http://quicksense.net/ -->
<div style="float:right;margin:10px 0 10px 10px;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8501671653071605";
/* Appcoda_300x250_iPhone_Development */
google_ad_slot = "8132041053";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<p>Among the numerous applications existing on the App Store today, it would be hard for someone to find more than a few of them that do not deal with data. Most of the apps handle some sort of data, no matter in what format they are, and always perform some actions upon it. There are various solutions offered to developers for storing and managing data, and usually each one of them is suitable for different kind of applications. However, when working with large amount of data, the preferred method it seems like a one-way path: That is the use of a database.</p>
<p>Indeed, making use of a database can solve various kind of problems that should be solved programmatically in other cases. For programmers who love working with databases and SQL, this is the favorite data-managing method at 90% of the cases, and the first think that crosses their minds when talking about data. Also, if you were used to working with other databases or database management systems (DBMSs), then you&#8217;ll really appreciate the fact that you can keep applying your SQL knowledge in the iOS platform as well.</p>
<p>The database that can be used by apps in iOS (and also used by iOS) is called <strong>SQLite</strong>, and it&#8217;s a <em>relational database</em>. It is contained in a C-library that is embedded to the app that is about to use it. Note that it does not consist of a separate service or daemon running on the background and attached to the app. On the contrary, the app runs it as an integral part of it. Nowadays, SQLite lives its third version, so it&#8217;s also commonly referred as <em>SQLite 3</em>.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/sqlite-database.jpg" alt="sqlite-database" class="aligncenter size-full wp-image-3808" /></div>
<p><span id="more-3778"></span></p>
<p>SQLite is not as powerful as other DMBSs, such as MySQL or SQL Server, as it does not include all of their features. However, its greatness lies mostly to these factors:</p>
<ul>
<li>It&#8217;s lightweight.</li>
<li>It contains an embedded SQL engine, so almost all of your SQL knowledge can be applied.</li>
<li>It works as part of the app itself, and it doesn&#8217;t require extra active services.</li>
<li>It&#8217;s very reliable.</li>
<li>It&#8217;s fast.</li>
<li>It&#8217;s fully supported by Apple, as it&#8217;s used in both iOS and Mac OS.</li>
<li>It has continuous support by developers in the whole world and new features are always added to it.</li>
</ul>
<p>Focusing now on our tutorial, let me start by stating that my goal is not to show you how to become a SQLite expert. Instead, my plan is to implement a database class step by step, which will utilize the most important features of the SQLite library, but it will also become a reusable tool for your own applications. Unfortunately, even though SQLite is supported by Apple, a mechanism or a pre-made database management library does not exist. Going into more details, the database class that we will implement will be capable of executing all the standard SQL queries (<em>select</em>, <em>insert</em>, <em>update</em>, <em>delete</em>). The most important is that we&#8217;ll create it in such way, so it accepts clear SQL statements, and if you had worked with SQL in the past, you&#8217;ll definitely know what to do here too.</p>
<p>Besides the database class that we&#8217;ll develop, we&#8217;ll also create a sample application to test it and to see it in action. More details about that you&#8217;ll find in the next section though. Note that the queries we&#8217;ll write in the demo app will be simple enough for the sake of the tutorial, however be sure that more complex queries can be executed as well.</p>
<p>As a final word before we proceed, I would recommend to make a web search and read some more stuff about the SQLite itself. Of course, the first one should be the the official website.</p>
<h2>App Overview</h2>
<p>One could say that this tutorial is composed by three parts. In the first and most important one, we are going to create a new class and in there we&#8217;ll implement all the database handling. As I have already said in the introduction, after we have it finished, you can take it and use it as a reusable component to your own apps. In the second part we are going to leave Xcode for a while, as it&#8217;s necessary to work in the Terminal and in the SQLite command line environment. There, we will create a simple database, which we will add to the project and use it. Finally, in the third part, we are going to implement a sample application where we will make use of both the database class and the database file. More specifically about the third part, we will make the necessary configuration in the Interface Builder, and then we&#8217;ll write the required code so we&#8217;ll have a fully functional app in which the database class will have the most significant role.</p>
<p>Regarding the database class that we will create in a while, I would say that it can be used as-is in the most cases of applications. To tell the truth, I rarely needed to do any updates or modifications to the class&#8217;s code after its initial implementation, as it has been suitable for every app I developed or have been developing. Nevertheless, keep in mind that even though we will build a reusable tool, you should feel free to change it, evolve it and add any extra features you might think that would be useful for your own needs. Nothing is set of stone.</p>
<p>In the sample database that we will create to test the class, we are going to add just one table. We&#8217;ll name that table <em>peopleInfo</em>, and it will contain some basic people&#8217;s data. These will be the first name, the last name and the age. The datatype of the first two fields will be set to text, while the age will be an integer value. For the primary key of the table, we will set an auto-increment integer value. Generally, using such a key is recommended in most of cases, unless special requirements of your app define otherwise. The sample database will be created in Terminal, and then it will be added to the project. Maybe you are wondering if there are any Mac applications that could be used for that purpose, and the answer is that there are. To be honest though, I prefer and like a lot more to use the command line environment, as I think that it consists of the fastest and most efficient way to work with a database.</p>
<p>Finally, focusing a bit more on the sample app, it&#8217;s necessary to say that it&#8217;s going to be a <em>navigation based</em> app. However, initially we will create a simple, view-based app, and later through the Interface Builder we will convert it to navigation-based. Furthermore, the app will be parted by two view controllers. In the first view controller, we will display all the records fetched from the database in a table view. Besides than simply listing them, we&#8217;ll also make our app capable of editing and deleting records. The second view controller will be used to add a new record, or edit an existing one. Upon finishing, our app will be able to perform all the basic kind of queries: <em>select</em> for loading the data, <em>insert</em> for adding new records, <em>update</em> for editing existing records and <em>delete</em> to completely delete a record.</p>
<p>In the animated graphic below you can see the final outcome of our effort in this tutorial:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_19_sample.gif" alt="SQLite Database Demo App" class="aligncenter size-full wp-image-3800" /></div>
<p>Having said all the above, I think is time to get started. We have a long journey ahead of us, so let&#8217;s don&#8217;t waste any more time.</p>
<h2>Creating the Project</h2>
<p>Unless we have a very special topic to discuss, the first step will always be the creation of our project. So, let me guide you through the necessary steps and make sure that we get along in all that.</p>
<p>Initially, launch Xcode and wait for the Welcome screen to appear. There, select to create a new project, as shown in the next figure:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_1_xcode_welcome.jpg" alt="Xcode Welcome Dialog" class="aligncenter size-full wp-image-3782" /></div>
<p>Next, in the first step of the guide that is appeared, select the <strong>Single View Application</strong> template, in the <strong>Application</strong> category, under the <strong>iOS</strong> section.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_2_template1.jpg" alt="Xcode Template" class="aligncenter size-full wp-image-3783" /></div>
<p>Click on the Next button to proceed. In the second step, in the <strong>Product Name</strong> field set the <strong>SQLite3DBSample</strong> as the project&#8217;s name, and also make sure that the <strong>iPhone</strong> is the selected value in the <strong>Device</strong> drop down control.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_3_template2.jpg" alt="Xcode Project Option" class="aligncenter size-full wp-image-3784" /></div>
<p>Click on the Next button once again, and in the last step of the guide select a directory in your computer to save the project. Click on the Create button and wait until Xcode prepares the project.</p>
<h2>The SQLite 3 Library</h2>
<p>Before we begin implementing, it&#8217;s necessary to perform a small prerequisite step. That is to add the appropriate SQLite 3 library to the project, so we can import it later on to our class.</p>
<p>In the Project Navigator on Xcode click on the project name. Next, make sure that the <strong>General</strong> tab is on, and then go to the bottom of the page, in the <strong>Linked Frameworks and Libraries</strong> section. Click on the small plus icon as shown in the next image:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_4_general_tab_plus_icon.jpg" alt="Xcode Project Plus Icon" class="aligncenter size-full wp-image-3785" /></div>
<p>In the modal window that appears, type the term <em>sqlite</em>, and from the suggested options select the one with the <strong>libsqlite3.dylib</strong> title.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_5_select_library.jpg" alt="XCode Select Library" class="aligncenter size-full wp-image-3786" /></div>
<p>Finally, click on the Add button and this step is over.</p>
<h2>Creating and Initializing the Database Class</h2>
<p>So, now that the SQLite 3 library has been added to the project, the first thing we are going to do is to create a new class to manage all the database functionality. In this class, we will write all the code needed to execute queries and to load data from the database.</p>
<p>Let&#8217;s get started by adding a new class file to the project. Go to the <strong>File > New > File&#8230;</strong> menu of the Xcode, or just hit the Command-N key combination on your keyboard. The familiar Xcode guide will appear. In the first step, select the <strong>Objective-C class</strong> option in the <strong>Cocoa Touch</strong> category, under the <strong>iOS</strong> section.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_6_new_file1.jpg" alt="Xcode adding new file" class="aligncenter size-full wp-image-3787" /></div>
<p>Click on the Next button, and in the next step perform two tasks: First, make sure that the <strong>Subclass of</strong> field contains the <strong>NSObject</strong> value. If not, then type it. Next, in the <strong>Class</strong> field type the name of our class, which is <strong>DBManager</strong>.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_7_new_file2.jpg" alt="Xcode Adding New file" class="aligncenter size-full wp-image-3788" /></div>
<p>After having done the above, click once again on the Next button, and in the third and last step make sure that the <strong>SQLite3DBSample</strong> target is selected. If not do it now, and click on the Create button. The guide will close and the new class will be ready.</p>
<p>Now we have an empty class in our hands, and we just have to write code in it. We&#8217;ll begin by creating a custom <em>init</em> method, as upon initialization we want to specify the database file name. Click on the <em>DBManager.h</em> file on the Project Navigator to open it. In there, add the following declaration:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> DBManager <span style="color: #002200;">:</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a><br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span>instancetype<span style="color: #002200;">&#41;</span>initWithDatabaseFilename<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>dbFilename;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Now, go to the <em>DBManager.m</em> file, and write the standard definition of all the init methods:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span>instancetype<span style="color: #002200;">&#41;</span>initWithDatabaseFilename<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>dbFilename<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; self <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>super init<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">return</span> self;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>As I have already said, the original database file will reside in the application&#8217;s bundle (in other words, the app package). Our mission is to make a copy of that file to the application&#8217;s documents directory, and work with that copy later on. Note that you should never work directly with a file existing in the app bundle, especially if your app is going to modify it. Always make a copy of it to the documents directory.</p>
<p>Focusing on the init method again, we&#8217;re going:</p>
<ol>
<li>To specify the path to the documents directory of the app and store it to a property .</li>
<li>To store the database filename that is provided as an argument in the above init method to another property.</li>
<li>To copy the database file from the app bundle into the documents directory if that&#8217;s necessary.</li>
</ol>
<p>We&#8217;ll use properties to store the documents directory and the database filename values, as we&#8217;ll need them later as well.</p>
<p>Having said all the above, go at the top of the file and create the private class section, by declaring at the same time the two properties as described.</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> DBManager<span style="color: #002200;">&#40;</span><span style="color: #002200;">&#41;</span><br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic, strong<span style="color: #002200;">&#41;</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>documentsDirectory;<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic, strong<span style="color: #002200;">&#41;</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>databaseFilename;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Now, once being at the top of the file, make the next import:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #6e371a;">#import &lt;sqlite3.h&gt;</span></div></td></tr></tbody></table></div>
<p>So far, so good. Back to the init method, let&#8217;s do some initialization. Right next you are given the method again, containing this time all the proper code:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span>instancetype<span style="color: #002200;">&#41;</span>initWithDatabaseFilename<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>dbFilename<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; self <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>super init<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Set the documents directory path to the documentsDirectory property.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="color: #400080;">NSArray</span></a> <span style="color: #002200;">*</span>paths <span style="color: #002200;">=</span> NSSearchPathForDirectoriesInDomains<span style="color: #002200;">&#40;</span>NSDocumentDirectory, NSUserDomainMask, <span style="color: #a61390;">YES</span><span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; self.documentsDirectory <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>paths objectAtIndex<span style="color: #002200;">:</span><span style="color: #2400d9;">0</span><span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Keep the database filename.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; self.databaseFilename <span style="color: #002200;">=</span> dbFilename;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Copy the database file into the documents directory if necessary.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self copyDatabaseIntoDocumentsDirectory<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">return</span> self;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>At first, we specify the path to the documents directory and we store it to the <em>documentsDirectory</em> property. Next, we assign the database filename to the <em>databaseFilename</em> property, and finally we copy the database file from the app bundle to the documents directory.</p>
<p>As you correctly assume, the <em>copyDatabaseIntoDocumentsDirectory</em> is a custom, private method that we must implement, and in here we&#8217;ll do the file copying, if needed of course. Surely Xcode have issued an error by now, so let&#8217;s work against it.</p>
<p>Go back to the private class section, and declare the method as shown below:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> DBManager<span style="color: #002200;">&#40;</span><span style="color: #002200;">&#41;</span><br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic, strong<span style="color: #002200;">&#41;</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>documentsDirectory;<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic, strong<span style="color: #002200;">&#41;</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>databaseFilename;<br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>copyDatabaseIntoDocumentsDirectory;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Let&#8217;s go to the definition right away. What we&#8217;ll do here is fairly simple: We&#8217;ll check if the database file exists or not in the documents directory, and if it&#8217;s not there we&#8217;ll copy it. Here&#8217;s the implementation:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>copyDatabaseIntoDocumentsDirectory<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Check if the database file exists in the documents directory.</span><br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>destinationPath <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>self.documentsDirectory stringByAppendingPathComponent<span style="color: #002200;">:</span>self.databaseFilename<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span><span style="color: #002200;">!</span><span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/"><span style="color: #400080;">NSFileManager</span></a> defaultManager<span style="color: #002200;">&#93;</span> fileExistsAtPath<span style="color: #002200;">:</span>destinationPath<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// The database file does not exist in the documents directory, so copy it from the main bundle now.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>sourcePath <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/"><span style="color: #400080;">NSBundle</span></a> mainBundle<span style="color: #002200;">&#93;</span> resourcePath<span style="color: #002200;">&#93;</span> stringByAppendingPathComponent<span style="color: #002200;">:</span>self.databaseFilename<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/"><span style="color: #400080;">NSError</span></a> <span style="color: #002200;">*</span>error;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/"><span style="color: #400080;">NSFileManager</span></a> defaultManager<span style="color: #002200;">&#93;</span> copyItemAtPath<span style="color: #002200;">:</span>sourcePath toPath<span style="color: #002200;">:</span>destinationPath error<span style="color: #002200;">:&amp;</span>error<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Check if any error occurred during copying and display it.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>error <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NSLog<span style="color: #002200;">&#40;</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;%@&quot;</span>, <span style="color: #002200;">&#91;</span>error localizedDescription<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>There&#8217;s nothing especially difficult in the above method. We are based on the <em>NSFileManager</em> class to check for the file existence and to copy it if needed. It&#8217;s also quite interesting the way we access the original file in the app bundle: <em>[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:self.databaseFilename]</em>.</p>
<p>The above method will be called every time that an object of the <em>DBManager</em> class is initialized. If the database file won&#8217;t be found in the documents directory, then the code in the condition block will be executed, otherwise it will be skipped. Normally, that code should be executed just once per app install, as the database file should always remain in the documents directory after having been copied in there.</p>
<p>So, quickly summarizing, we&#8217;ve managed to perform two important tasks here: To create the <em>DBManager</em> class files, and to create a custom init method, which makes sure that the database file will exist to the documents directory of the app. Now, we are ready to go deeper in the details of the SQLite 3 database.</p>
<h2>SQLite 3 Functions Preview</h2>
<p>Our next step is to implement the heart of our class, the method that will take care of all the work with the database. However, I believe it would be much better to take a quick look at the SQLite 3 functions that we are going to need first, and then proceed to implementation. There&#8217;s a great number of functions supported and provided, but we&#8217;ll need just some of them. Let&#8217;s see them one by one:</p>
<ul>
<li><strong><em>sqlite3_open</em></strong>: This function is used to create and open a database file. It accepts two parameters, where the first one is the database file name, and the second a handler to the database. If the file does not exist, then it creates it first and then it opens it, otherwise it just opens it.</li>
<li><strong><em>sqlite3_prepare_v2</em></strong>: The purpose of this function is to get a SQL statement (a query) in string format, and convert it to an executable format recognizable by SQLite 3.</li>
<li><strong><em>sqlite3_step</em></strong>: This function actually executes a SQL statement (query) prepared with the previous function. It can be called just once for executable queries (insert, update, delete), or multiple times when retrieving data. It&#8217;s important to have in mind that it can&#8217;t be called prior to the <em>sqlite3_preprare_v2</em> function.</li>
<li><strong><em>sqlite3_column_count</em></strong>: This method&#8217;s name it makes it easy to understand what is about. It returns the total number of columns (fields) a contained in a table.</li>
<li><strong><em>sqlite3_column_text</em></strong>: This method returns the contents of a column in text format, actually a C string (<em>char *</em>) value. It accepts two parameters: The first one is the query converted (compiled) to a SQLite statement, and the second one is the index of the column.</li>
<li><strong><em>sqlite3_column_name</em></strong>: It returns the name of a column, and its parameters are the same to the previous function&#8217;s.</li>
<li><strong><em>sqlite3_changes</em></strong>: It actually returns the number of the affected rows, after the execution of a query.</li>
<li><strong><em>sqlite3_last_insert_rowid</em></strong>: It returns the last inserted row&#8217;s ID.</li>
<li><strong><em>sqlite3_errmsg</em></strong>: It returns the description of a SQLite error.</li>
<li><strong><em>sqlite3_finalize</em></strong>: It deletes a prepared statement from memory.</li>
<li><strong><em>sqlite3_close</em></strong>: It closes an open database connection. It should be called after having finished any data exchange with the database, as it releases any reserved system resources.</li>
</ul>
<h2>Core Functionality Implementation</h2>
<p>Now that you&#8217;ve been provided with a short description of every SQLite function we&#8217;ll meet next, let&#8217;s go to the implementation of the core method of our class. In this one, we are going to run both executable and non-executable queries. Based on that, we will make sure to implement it that way so it accepts two parameters: The query itself, and a boolean value indicating whether the query is executable or not. The logic applied in the method is quite simple, but let&#8217;s give it a look:</p>
<ul>
<li>Initially, we&#8217;ll perform some necessary initializations, regarding mostly the structures that will store our data (<em>NSMutableArray</em> objects).</li>
<li>Then, we&#8217;ll open the database and if that&#8217;s successful, we&#8217;ll compile the query to a SQLite 3 statement (prepared statement).</li>
<li>If the query is not executable, meaning that is a <em>select</em> statement, we&#8217;ll fetch the desired data row by row. For each one, we&#8217;ll get each single column&#8217;s contents as a text value, and we&#8217;ll add it to a temporary mutable array. When all the columns of a data row have been read, we&#8217;ll add the temporary array to the final results array. At the same time, we&#8217;ll use another array to save the column names, as it&#8217;s quite possible to become handy when the database class will be used.</li>
<li>If the query is executable, meaning that is an <em>insert</em>, <em>update</em>, or <em>delete</em> statement, things will be much simpler. We&#8217;ll just execute the query and if the result is successful, then we&#8217;ll store to properties the affected rows and the last inserted ID values.</li>
<li>In case of any error, we&#8217;ll just output its description.</li>
<li>Finally, we&#8217;ll make sure to free up all used resources.</li>
</ul>
<p>Let me now denote a couple of things. First of all, and according to what I said in the above description, we&#8217;ll get each column&#8217;s contents as a text value. This is a generic approach and you may think that it doesn&#8217;t suit to all kind of data existing to a database table. However, don&#8217;t forget that we want to implement a class that will work for all applications (or the most of them), so our solution shouldn&#8217;t be oriented to specific data. Moreover, the text (string) results can be converted to other data types and be handled in any desired way by an app.<br />
At second, the fetched results will be stored to a two-dimensional array. Into each index of the results array, there will be another array containing the data of a single row. Personally, I consider this to be the best option for having the result set from the database file to memory. If you wish so, you could try to modify the implementation and use <em>NSDictionary</em> objects instead.</p>
<p>Let&#8217;s get started with the implementation now. We&#8217;ll do one step at the time, so we discuss each action we take. Besides that, there are plenty of comments in the code that will help you understand it much better.</p>
<p>First off, go to the private class section, and declare a mutable array property for storing our results, and of course, the private method itself:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> DBManager<span style="color: #002200;">&#40;</span><span style="color: #002200;">&#41;</span><br />
<br />
...<br />
...<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic, strong<span style="color: #002200;">&#41;</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> <span style="color: #002200;">*</span>arrResults;<br />
<br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>runQuery<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">const</span> <span style="color: #a61390;">char</span> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>query isQueryExecutable<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">BOOL</span><span style="color: #002200;">&#41;</span>queryExecutable;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>If you wonder why this method is private, while it should be public, then the answer is simple: After having finished with it, we&#8217;ll create two small public methods, where we&#8217;ll use the first one just to load data from the database, and the second one to run executable queries. Both of those methods will call this, providing each one the proper arguments. Besides that, notice that the query parameter is a <em>const char </em> (a C string) and not a NSString* object. That&#8217;s because the SQLite functions don&#8217;t know anything about <em>NSStrings</em>, they just know how to handle C strings.</p>
<p>Next, go to the <em>DBManager.h</em> file, and in the public class section declare the next three properties:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> DBManager <span style="color: #002200;">:</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a><br />
<br />
...<br />
...<br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic, strong<span style="color: #002200;">&#41;</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> <span style="color: #002200;">*</span>arrColumnNames;<br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic<span style="color: #002200;">&#41;</span> <span style="color: #a61390;">int</span> affectedRows;<br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic<span style="color: #002200;">&#41;</span> <span style="color: #a61390;">long</span> <span style="color: #a61390;">long</span> lastInsertedRowID;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>I think there&#8217;s no need to explain what these properties are for.</p>
<p>Back to the <em>DBManager.m</em> file to get started with the implementation. As you&#8217;ll see right next, initially we perform four specific tasks: We declare a local SQLite 3 object to handle the database, we set the path to the database file, and we initialize the two array properties (the <em>arrResults</em> and the <em>arrColumnNames</em> arrays).</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>runQuery<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">const</span> <span style="color: #a61390;">char</span> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>query isQueryExecutable<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">BOOL</span><span style="color: #002200;">&#41;</span>queryExecutable<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Create a sqlite object.</span><br />
&nbsp; &nbsp; sqlite3 <span style="color: #002200;">*</span>sqlite3Database;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Set the database file path.</span><br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>databasePath <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>self.documentsDirectory stringByAppendingPathComponent<span style="color: #002200;">:</span>self.databaseFilename<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Initialize the results array.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self.arrResults <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.arrResults removeAllObjects<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; self.arrResults <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; self.arrResults <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> alloc<span style="color: #002200;">&#93;</span> init<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Initialize the column names array.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self.arrColumnNames <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.arrColumnNames removeAllObjects<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; self.arrColumnNames <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; self.arrColumnNames <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> alloc<span style="color: #002200;">&#93;</span> init<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Note that if any previous data exist in any of the arrays, we get rid of them before we initialize the arrays again to make sure that nothing remains on memory.</p>
<p>Next, we must open the database, and if no error occurs we will use the <em>sqlite3_prepare_v2</em> function to convert the query into a executable SQLite part:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Open the database.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">BOOL</span> openDatabaseResult <span style="color: #002200;">=</span> sqlite3_open<span style="color: #002200;">&#40;</span><span style="color: #002200;">&#91;</span>databasePath UTF8String<span style="color: #002200;">&#93;</span>, <span style="color: #002200;">&amp;</span>sqlite3Database<span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span><span style="color: #002200;">&#40;</span>openDatabaseResult <span style="color: #002200;">==</span> SQLITE_OK<span style="color: #002200;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Declare a sqlite3_stmt object in which will be stored the query after having been compiled into a SQLite statement.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; sqlite3_stmt <span style="color: #002200;">*</span>compiledStatement;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Load all data from database to memory.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">BOOL</span> prepareStatementResult <span style="color: #002200;">=</span> sqlite3_prepare_v2<span style="color: #002200;">&#40;</span>sqlite3Database, query, <span style="color: #002200;">-</span><span style="color: #2400d9;">1</span>, <span style="color: #002200;">&amp;</span>compiledStatement, <span style="color: #a61390;">NULL</span><span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span><span style="color: #002200;">&#40;</span>prepareStatementResult <span style="color: #002200;">==</span> SQLITE_OK<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; ...<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; ...<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>As you see, we check if the database was opened successfully comparing with the <em>SQLITE_OK</em> value. Then, we declare the <em>compiledStatement</em> variable, which is a <em>sqlite3_stmt</em> type, for storing the compiled statement. Finally, we make use of the <em>sqlite3_prepare_v2</em> function, in which we pass the database handler, the query and the compiled statement variable as parameters.</p>
<p>Inside the inner <em>if</em> clause above, we&#8217;ll check if the query is executable or not. In case it&#8217;s a <em>select</em> query, we&#8217;ll load all data specified by the query. Here we go:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #11740a; font-style: italic;">// Check if the query is non-executable.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span><span style="color: #002200;">!</span>queryExecutable<span style="color: #002200;">&#41;</span><span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// In this case data must be loaded from the database.</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Declare an array to keep the data for each fetched row.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> <span style="color: #002200;">*</span>arrDataRow;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Loop through the results and add them to the results array row by row.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">while</span><span style="color: #002200;">&#40;</span>sqlite3_step<span style="color: #002200;">&#40;</span>compiledStatement<span style="color: #002200;">&#41;</span> <span style="color: #002200;">==</span> SQLITE_ROW<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Initialize the mutable array that will contain the data of a fetched row.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; arrDataRow <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> alloc<span style="color: #002200;">&#93;</span> init<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Get the total number of columns.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">int</span> totalColumns <span style="color: #002200;">=</span> sqlite3_column_count<span style="color: #002200;">&#40;</span>compiledStatement<span style="color: #002200;">&#41;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Go through all columns and fetch each column data.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">for</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">int</span> i<span style="color: #002200;">=</span><span style="color: #2400d9;">0</span>; i&lt;totalColumns; i<span style="color: #002200;">++</span><span style="color: #002200;">&#41;</span><span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Convert the column data to text (characters).</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">char</span> <span style="color: #002200;">*</span>dbDataAsChars <span style="color: #002200;">=</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">char</span> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>sqlite3_column_text<span style="color: #002200;">&#40;</span>compiledStatement, i<span style="color: #002200;">&#41;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// If there are contents in the currenct column (field) then add them to the current row array.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>dbDataAsChars <span style="color: #002200;">!=</span> <span style="color: #a61390;">NULL</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Convert the characters to string.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>arrDataRow addObject<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> &nbsp;stringWithUTF8String<span style="color: #002200;">:</span>dbDataAsChars<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Keep the current column name.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self.arrColumnNames.count <span style="color: #002200;">!=</span> totalColumns<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dbDataAsChars <span style="color: #002200;">=</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">char</span> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>sqlite3_column_name<span style="color: #002200;">&#40;</span>compiledStatement, i<span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.arrColumnNames addObject<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithUTF8String<span style="color: #002200;">:</span>dbDataAsChars<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Store each fetched data row in the results array, but first check if there is actually data.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>arrDataRow.count &gt; <span style="color: #2400d9;">0</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.arrResults addObject<span style="color: #002200;">:</span>arrDataRow<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>We wrote some code here, so let&#8217;s discuss it. At first we declare a local array, named <em>arrDataRow</em>. In this one, we&#8217;ll store each data row fetched from the dataset existing in memory. Then, using the <em>sqlite3_step</em> function, we go through all the results row by row. Inside the <em>while</em> loop, we initialize the <em>arrDataRow</em> array and we get the total number of columns existing in the result set. Then, inside a new <em>for</em> loop, we get each column&#8217;s contents and we assign them to a <em>char </em> variable. If that value is not null, we add it to the temp <em>arrDataRow</em> array converted to a NSString* object. Next, if we haven&#8217;t done so already, we store each column name to the <em>arrColumnNames</em> array. Finally, when the <em>for</em> loop is over, we add the fetched data row to the <em>arrResults</em> array.</p>
<p>Let&#8217;s proceed to the case of an executable query:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">&nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// This is the case of an executable query (insert, update, ...).</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Execute the query.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">BOOL</span> executeQueryResults <span style="color: #002200;">=</span> sqlite3_step<span style="color: #002200;">&#40;</span>compiledStatement<span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>executeQueryResults <span style="color: #002200;">==</span> SQLITE_DONE<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Keep the affected rows.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.affectedRows <span style="color: #002200;">=</span> sqlite3_changes<span style="color: #002200;">&#40;</span>sqlite3Database<span style="color: #002200;">&#41;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Keep the last inserted row ID.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.lastInsertedRowID <span style="color: #002200;">=</span> sqlite3_last_insert_rowid<span style="color: #002200;">&#40;</span>sqlite3Database<span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// If could not execute the query show the error message on the debugger.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NSLog<span style="color: #002200;">&#40;</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;DB Error: %s&quot;</span>, sqlite3_errmsg<span style="color: #002200;">&#40;</span>sqlite3Database<span style="color: #002200;">&#41;</span><span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<span style="color: #002200;">&#125;</span><br />
<span style="color: #a61390;">else</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// In the database cannot be opened then show the error message on the debugger.</span><br />
&nbsp; &nbsp; NSLog<span style="color: #002200;">&#40;</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;%s&quot;</span>, sqlite3_errmsg<span style="color: #002200;">&#40;</span>sqlite3Database<span style="color: #002200;">&#41;</span><span style="color: #002200;">&#41;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Things are much simple here. We run the query, and if it&#8217;s all okay, we store the affected rows and the last inserted row ID to the respective properties. In the <em>else</em> cases you see that we show on the debugger the error description, when the query cannot be executed and when the database can&#8217;t be opened.</p>
<p>Finally, we need to free up the memory by releasing all used resources, and by closing the connection to database:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #11740a; font-style: italic;">// Release the compiled statement from memory.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; sqlite3_finalize<span style="color: #002200;">&#40;</span>compiledStatement<span style="color: #002200;">&#41;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Close the database.</span><br />
&nbsp; &nbsp; sqlite3_close<span style="color: #002200;">&#40;</span>sqlite3Database<span style="color: #002200;">&#41;</span>;</div></td></tr></tbody></table></div>
<p>That was the last step needed to be performed in the method. Right below it&#8217;s given in one piece, as all the if-else cases and the curly brackets become confusing enough:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br />31<br />32<br />33<br />34<br />35<br />36<br />37<br />38<br />39<br />40<br />41<br />42<br />43<br />44<br />45<br />46<br />47<br />48<br />49<br />50<br />51<br />52<br />53<br />54<br />55<br />56<br />57<br />58<br />59<br />60<br />61<br />62<br />63<br />64<br />65<br />66<br />67<br />68<br />69<br />70<br />71<br />72<br />73<br />74<br />75<br />76<br />77<br />78<br />79<br />80<br />81<br />82<br />83<br />84<br />85<br />86<br />87<br />88<br />89<br />90<br />91<br />92<br />93<br />94<br />95<br />96<br />97<br />98<br />99<br />100<br />101<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>runQuery<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">const</span> <span style="color: #a61390;">char</span> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>query isQueryExecutable<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">BOOL</span><span style="color: #002200;">&#41;</span>queryExecutable<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Create a sqlite object.</span><br />
&nbsp; &nbsp; sqlite3 <span style="color: #002200;">*</span>sqlite3Database;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Set the database file path.</span><br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>databasePath <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>self.documentsDirectory stringByAppendingPathComponent<span style="color: #002200;">:</span>self.databaseFilename<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Initialize the results array.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self.arrResults <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.arrResults removeAllObjects<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; self.arrResults <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; self.arrResults <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> alloc<span style="color: #002200;">&#93;</span> init<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Initialize the column names array.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self.arrColumnNames <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.arrColumnNames removeAllObjects<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; self.arrColumnNames <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; self.arrColumnNames <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> alloc<span style="color: #002200;">&#93;</span> init<span style="color: #002200;">&#93;</span>;<br />
<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Open the database.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">BOOL</span> openDatabaseResult <span style="color: #002200;">=</span> sqlite3_open<span style="color: #002200;">&#40;</span><span style="color: #002200;">&#91;</span>databasePath UTF8String<span style="color: #002200;">&#93;</span>, <span style="color: #002200;">&amp;</span>sqlite3Database<span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span><span style="color: #002200;">&#40;</span>openDatabaseResult <span style="color: #002200;">==</span> SQLITE_OK<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Declare a sqlite3_stmt object in which will be stored the query after having been compiled into a SQLite statement.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; sqlite3_stmt <span style="color: #002200;">*</span>compiledStatement;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Load all data from database to memory.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">BOOL</span> prepareStatementResult <span style="color: #002200;">=</span> sqlite3_prepare_v2<span style="color: #002200;">&#40;</span>sqlite3Database, query, <span style="color: #002200;">-</span><span style="color: #2400d9;">1</span>, <span style="color: #002200;">&amp;</span>compiledStatement, <span style="color: #a61390;">NULL</span><span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span><span style="color: #002200;">&#40;</span>prepareStatementResult <span style="color: #002200;">==</span> SQLITE_OK<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Check if the query is non-executable.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span><span style="color: #002200;">!</span>queryExecutable<span style="color: #002200;">&#41;</span><span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// In this case data must be loaded from the database.</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Declare an array to keep the data for each fetched row.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> <span style="color: #002200;">*</span>arrDataRow;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Loop through the results and add them to the results array row by row.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">while</span><span style="color: #002200;">&#40;</span>sqlite3_step<span style="color: #002200;">&#40;</span>compiledStatement<span style="color: #002200;">&#41;</span> <span style="color: #002200;">==</span> SQLITE_ROW<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Initialize the mutable array that will contain the data of a fetched row.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; arrDataRow <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/"><span style="color: #400080;">NSMutableArray</span></a> alloc<span style="color: #002200;">&#93;</span> init<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Get the total number of columns.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">int</span> totalColumns <span style="color: #002200;">=</span> sqlite3_column_count<span style="color: #002200;">&#40;</span>compiledStatement<span style="color: #002200;">&#41;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Go through all columns and fetch each column data.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">for</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">int</span> i<span style="color: #002200;">=</span><span style="color: #2400d9;">0</span>; i&lt;totalColumns; i<span style="color: #002200;">++</span><span style="color: #002200;">&#41;</span><span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Convert the column data to text (characters).</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">char</span> <span style="color: #002200;">*</span>dbDataAsChars <span style="color: #002200;">=</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">char</span> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>sqlite3_column_text<span style="color: #002200;">&#40;</span>compiledStatement, i<span style="color: #002200;">&#41;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// If there are contents in the currenct column (field) then add them to the current row array.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>dbDataAsChars <span style="color: #002200;">!=</span> <span style="color: #a61390;">NULL</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Convert the characters to string.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>arrDataRow addObject<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> &nbsp;stringWithUTF8String<span style="color: #002200;">:</span>dbDataAsChars<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Keep the current column name.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self.arrColumnNames.count <span style="color: #002200;">!=</span> totalColumns<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dbDataAsChars <span style="color: #002200;">=</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">char</span> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>sqlite3_column_name<span style="color: #002200;">&#40;</span>compiledStatement, i<span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.arrColumnNames addObject<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithUTF8String<span style="color: #002200;">:</span>dbDataAsChars<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Store each fetched data row in the results array, but first check if there is actually data.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>arrDataRow.count &gt; <span style="color: #2400d9;">0</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.arrResults addObject<span style="color: #002200;">:</span>arrDataRow<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// This is the case of an executable query (insert, update, ...).</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Execute the query.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">BOOL</span> executeQueryResults <span style="color: #002200;">=</span> sqlite3_step<span style="color: #002200;">&#40;</span>compiledStatement<span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>executeQueryResults <span style="color: #002200;">==</span> SQLITE_DONE<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Keep the affected rows.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.affectedRows <span style="color: #002200;">=</span> sqlite3_changes<span style="color: #002200;">&#40;</span>sqlite3Database<span style="color: #002200;">&#41;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Keep the last inserted row ID.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.lastInsertedRowID <span style="color: #002200;">=</span> sqlite3_last_insert_rowid<span style="color: #002200;">&#40;</span>sqlite3Database<span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// If could not execute the query show the error message on the debugger.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NSLog<span style="color: #002200;">&#40;</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;DB Error: %s&quot;</span>, sqlite3_errmsg<span style="color: #002200;">&#40;</span>sqlite3Database<span style="color: #002200;">&#41;</span><span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// In the database cannot be opened then show the error message on the debugger.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NSLog<span style="color: #002200;">&#40;</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;%s&quot;</span>, sqlite3_errmsg<span style="color: #002200;">&#40;</span>sqlite3Database<span style="color: #002200;">&#41;</span><span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Release the compiled statement from memory.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; sqlite3_finalize<span style="color: #002200;">&#40;</span>compiledStatement<span style="color: #002200;">&#41;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Close the database.</span><br />
&nbsp; &nbsp; sqlite3_close<span style="color: #002200;">&#40;</span>sqlite3Database<span style="color: #002200;">&#41;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<h2>Loading Data and Executing Queries</h2>
<p>Now that the core method of our class has been implemented, we have only left to make use of it. That&#8217;s simple, as we just have to implement two new small, public methods: One for running <em>select</em> queries and loading data, and one for executing <em>insert</em>, <em>update</em> and <em>delete</em> queries.</p>
<p>Let&#8217;s begin by declaring both of them. Open the <em>DBManager.h</em> file, and add the next two lines:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> DBManager <span style="color: #002200;">:</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a><br />
<br />
...<br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="color: #400080;">NSArray</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>loadDataFromDB<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>query;<br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>executeQuery<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>query;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Let&#8217;s focus on the first method, named <em>loadDataFromDB:</em>. This method accepts as a parameter value the query we want to be executed as a <em>NSString</em> object. For example, such a valid string would be this: <em>&#8220;select * from people where age > 18&#8243;</em>. The fetched result set is returned as an array, and according to what I said in the previous section, this is going to be a two-dimensional array. The first array represents the rows, while each sub-array represents the columns of each row. Having said all that, let&#8217;s go back to the <em>DBManager.m</em> file, and let&#8217;s implement it:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="color: #400080;">NSArray</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>loadDataFromDB<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>query<span style="color: #002200;">&#123;</span> &nbsp; &nbsp;<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Run the query and indicate that is not executable.</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// The query string is converted to a char* object.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self runQuery<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>query UTF8String<span style="color: #002200;">&#93;</span> isQueryExecutable<span style="color: #002200;">:</span><span style="color: #a61390;">NO</span><span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Returned the loaded results.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="color: #400080;">NSArray</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>self.arrResults;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>As you see, it&#8217;s just a matter of two lines. In the first line, we call the <em>runQuery:isQueryExecutable:</em> method and we convert the query to a C string object. At the same time, we specify that the query is not executable.</p>
<p>In the second line we return the <em>arrResults</em> array that contains the query results, casting it first to a <em>NSArray</em> object. It would be a bad idea to make the <em>arrResults</em> array public and allow apps to have direct access to it, as then the returned data could be potentially altered before it used.</p>
<p>Going to the <em>executeQuery:</em> method now, here&#8217;s it its definition:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>executeQuery<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>query<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Run the query and indicate that is executable.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self runQuery<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>query UTF8String<span style="color: #002200;">&#93;</span> isQueryExecutable<span style="color: #002200;">:</span><span style="color: #a61390;">YES</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>In this one, there is not a return value. However, the <em>affectedRows</em> property can be used to verify whether there were any changes or not after having executed a query.</p>
<h2>A Sample Database</h2>
<p>The database class is ready to be used, but how can we do that without having an actual database to test it? So, in this part I&#8217;m going to show you how to create a new database on Terminal, how to create a new table and finally how to embed the database file to the Xcode project. If you&#8217;re not used to work in a command line environment don&#8217;t worry; you&#8217;ll find out that doing so it&#8217;s interesting, different, even amusing.</p>
<p>For the purpose of this example we won&#8217;t create a complex database. On the contrary, we will create just one table, named <strong>peopleInfo</strong>, with the following fields:</p>
<ul>
<li><em>peopleInfoID</em>: An integer value, the primary key of the table.</li>
<li><em>firstname</em>: A text value.</li>
<li><em>lastname</em>: A text value.</li>
<li><em>age</em>: An integer value.</li>
</ul>
<p>Such a table is just fine to try out all the functionalities we want. Let&#8217;s see everything in action now. Click on the Spotlight icon, and type the <em>Terminal</em> word in the textfield:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_8_spotlight_terminal.jpg" alt="Spotlight terminal" class="aligncenter size-full wp-image-3789" /></div>
<p>Once it gets spotted, hit the Return key on the keyboard, or click on its name with your mouse and the terminal window will appear. We are going to create a new database file named <strong>sampledb.sql</strong>. For the record, let me say that you can use any extension you would like for the file, or no extension at all. The most common extensions are:</p>
<ul>
<li>.sql</li>
<li>.sqlite</li>
<li>.db</li>
</ul>
<p>Personally, I like to give the .sql extension to my database files, but feel free to use anything that better suits to your preferences.</p>
<p>To create the above database, simply write the following in the terminal:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">sqlite3 sampledb.sql</div></td></tr></tbody></table></div>
<p>The database file will be created at once, and you&#8217;ll enter into the SQLite command line environment. The command needed to create a new table is quite similar to other SQL databases or DBMSs, with some slight differences though. Here it is:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">CREATE TABLE peopleInfo<span style="color: #002200;">&#40;</span>peopleInfoID integer primary key, firstname text, lastname text, age integer<span style="color: #002200;">&#41;</span>;</div></td></tr></tbody></table></div>
<p>Even though this tutorial has nothing to do with offering instructions on how to use the SQLite command line environment, I believe that it would be useful to mention just a couple of commands. These are the <em>.tables</em> and the <em>.schema TABLE_NAME</em>. The first one displays a listing with all the tables you&#8217;ve created in a database. The second one displays the the <em>Create Table</em> command for the table specified by the <em>Table_Name</em> parameter. Notice that both commands are preceded by the dot point (.), and there&#8217;s not a semicolon at the end of the commands. For clear SQL commands, you use no dot mark, but you add the semicolon.</p>
<p>To quit from the SQLite environment, just type:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">.quit</div></td></tr></tbody></table></div>
<p>That way you&#8217;ll return back to the terminal environment. The next screenshot of my terminal synopsizes all the above:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_9_sqlite_terminal_sample.jpg" alt="SQLite Terminal Sample" class="aligncenter size-full wp-image-3790" /></div>
<p>Our next task is to add the database file to the Xcode project. You have two options for doing that: </p>
<ul>
<li>Either open the Finder, locate the file, and then drag and drop to the Project Navigator on Xcode, or,</li>
<li>Go to Xcode, open the menu <strong>File > Add Files to &#8220;SQLite3DBSample&#8221;&#8230;</strong>, and then locate the file and click on the Add button.</li>
</ul>
<p>No matter which way you&#8217;ll choose, make sure that the <em>Copy items into destination group&#8217;s folder (if needed)</em> and the <em>SQLite3DBSample</em> target checkmarks are selected in the window that will appear before the database file gets added to the project.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_10_add_file_options.jpg" alt="Adding file option" class="aligncenter size-full wp-image-3791" /></div>
<h2>Demo App Interface Setup</h2>
<p>In most of my tutorials, this part is usually one of the first things you read. However, due to the fact that at the previous sections we created the database class and the sample file, the setup of the interface for our demo app had to be waiting up to this point. In here, as you&#8217;ve already assumed, we&#8217;ll work in the Interface Builder, and we will add all those subviews needed to make the app working, just like the sample demonstrated at the beginning of the tutorial. Further than that, we&#8217;ll add the necessary IBOutlet properties and IBAction methods that will make everything properly work.</p>
<p>On the Project Navigator, click on the <em>Main.storyboard</em> file and wait until it appears in the Interface Builder. As I said in the App Overview section, this is going to be a navigation based app, therefore select the View Controller scene and then go to the menu: <strong>Editor > Embed In > Navigation Controller</strong>. Instantly, a navigation controller will be added at the left side of the scene, and a new arrow will point from the navigation controller to the View Controller scene.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_11_ib_navcontroller.jpg" alt="Adding navigation controller" class="aligncenter size-full wp-image-3792" /></div>
<p>Let&#8217;s focus now on adding all the necessary subviews to the scene, and after having finished with that, we&#8217;ll add one more scene (a new view controller) which we&#8217;ll use to add new records to the database. Right next you are given all the subviews you need to drag from the Objects library to the scene, along with the attributes needed to be specified:</p>
<h3>UITableView</h3>
<ul>
<li><strong>Frame</strong>: X=0, Y=0, Width=320, Height=568</li>
</ul>
<h3>UITableViewCell</h3>
<p><em>Drag a table view cell in the table view to make it prototype</em><br />
* <strong>Row Height</strong>: 60<br />
* <strong>Style</strong>: Subtitle<br />
* <strong>Identifier</strong>: idCellRecord<br />
* <strong>Selection</strong>: None<br />
* <strong>Accessory</strong>: Detail Disclosure</p>
<h3>UIBarButtonItem</h3>
<ul>
<li>Add it to the right side of the navigation bar</li>
<li><strong>Identifier</strong>: Add</li>
<li><strong>Tint</strong>: Red=255, Green=128, Blue=0</li>
</ul>
<p>Besides all the above, select the <em>Navigation Item</em> and set the next two attributes:<br />
1. <strong>Title</strong>: SQLite 3 Demo<br />
2. <strong>Back Button</strong>: Go Back</p>
<p>These are all the subviews of the View Controller scene. Here&#8217;s how it should look like:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_12_ib_viewcontroller_scene.jpg" alt="Viewcontroller scene" class="aligncenter size-full wp-image-3793" /></div>
<p>Now, from the Objects library take a <em>UIViewController</em> object and drop it to the canvas. For this view controller, we need to create a new class, so for the time being we&#8217;ll just pause our work here.</p>
<p>Following the same way you did when you added the database class file to the project, add a new class of <em>UIViewController</em> kind. Specifically:</p>
<ol>
<li>Go to the menu: <strong>File > New > File&#8230;</strong>.</li>
<li>As the template for the file, select the <strong>Objective-C class</strong> in the <strong>Cocoa Touch</strong> category, under the <strong>iOS</strong> section.</li>
<li>In the second step, make sure that in the <strong>Subclass of</strong> field there is the <strong>UIViewController</strong> value. If there is not, just type it. In the <strong>Class</strong> field, set the <strong>EditInfoViewController</strong> as the name for the new class, and then click on the Next button to proceed.</li>
<li>In the last step, make sure that the <em>SQLite3DBSample</em> is checked, and click on the Create button.</li>
</ol>
<p>Head back to the Interface Builder, and select the second, new scene. In the <strong>Utilities</strong> pane show the <strong>Identity Inspector</strong>, and in the <strong>Class</strong> field type the <strong>EditInfoViewController</strong> value. Immediately, the second view controller scene will turn into the Edit Info View Controller scene.</p>
<p>To connect the View Controller scene with the Edit Info View Controller scene, go to the Document Outline pane, Ctrl-Click on the View Controller scene object, and drag right onto the Edit Info View Controller object.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_13_custom_segue.jpg" alt="Custom segue in storyboard" class="aligncenter size-full wp-image-3794" /></div>
<p>In the black popup window that appears (titled <em>Manual Segue</em>), select and click the <strong>Push</strong> option:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_14_push_segue.jpg" alt="Segue Push - SQLite Database" class="aligncenter size-full wp-image-3795" /></div>
<p>The two scenes will become connected, but there&#8217;s still one last thing to do. Click on the circle of the connection line, and in the <strong>Attributes</strong> inspector set the <strong>idSegueEditInfo</strong> as the identifier value for the segue.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_15_segue_identifier.jpg" alt="SQLite - Setting segue identifier" class="aligncenter size-full wp-image-3796" /></div>
<p>Now, we can add the necessary subviews here too:</p>
<h3>UITextField</h3>
<ul>
<li><strong>Frame</strong>: X=20, Y=93, Width=280, Height=30</li>
<li><strong>Placeholder</strong>: Type the first name&#8230;</li>
<li><strong>Color</strong>: Red=255, Green=128, Blue=0</li>
<li><strong>Border Style</strong>: No border style</li>
<li><strong>Background</strong>: Red=217, Green=219, Blue=221</li>
<li><strong>Capitalization</strong>: Words</li>
<li><strong>Return Key</strong>: Done</li>
</ul>
<h3>UITextField</h3>
<ul>
<li><strong>Frame</strong>: X=20, Y=139, Width=280, Height=30</li>
<li><strong>Placeholder</strong>: Type the last name&#8230;</li>
<li><strong>Color</strong>: Red=255, Green=128, Blue=0</li>
<li><strong>Border Style</strong>: No border style</li>
<li><strong>Background</strong>: Red=217, Green=219, Blue=221</li>
<li><strong>Capitalization</strong>: Words</li>
<li><strong>Return Key</strong>: Done</li>
</ul>
<h3>UITextField</h3>
<ul>
<li><strong>Frame</strong>: X=20, Y=186, Width=280, Height=30</li>
<li><strong>Placeholder</strong>: Type the age&#8230;</li>
<li><strong>Color</strong>: Red=255, Green=128, Blue=0</li>
<li><strong>Border Style</strong>: No border style</li>
<li><strong>Background</strong>: Red=217, Green=219, Blue=221</li>
<li><strong>Capitalization</strong>: Words</li>
<li><strong>Return Key</strong>: Done</li>
<li><strong>Keyboard</strong>: Numbers and Punctuation</li>
</ul>
<h3>UIBarButtonItem</h3>
<ul>
<li>Add it to the right side of the navigation bar</li>
<li><strong>Identifier</strong>: Save</li>
<li><strong>Tint</strong>: Red=255, Green=128, Blue=0</li>
</ul>
<p>Also, edit the navigation item and set the <em>Edit Info</em> value as its title.</p>
<p>Here&#8217;s how the second view controller should look like:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_16_editinfoviewcontroller_scene.jpg" alt="SQLite - Edit infoview controller" class="aligncenter size-full wp-image-3797" /></div>
<p>Let&#8217;s see now what IBOutlet properties and IBActions are needed to be declared for the subviews we previously added. Starting from the View Controller scene, we want an IBOutlet property for the table view, so as we can display our data, and an IBAction method for the bar button item, which we&#8217;ll use to perform the segue and transit to the EditInfoViewController view controller. Open the <em>ViewController.h</em> file, and add the next two declarations:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> ViewController <span style="color: #002200;">:</span> UIViewController<br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>weak, nonatomic<span style="color: #002200;">&#41;</span> IBOutlet UITableView <span style="color: #002200;">*</span>tblPeople;<br />
<br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>addNewRecord<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Go back to the Interface builder and make the proper connections.</p>
<p>Next, for the Edit Info View Controller scene we&#8217;ll need an IBOutlet property for each textfield, and an IBAction method for the save button. Similarly to the previous steps, open the <em>EditInfoViewController.h</em> file and declare them:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> EditInfoViewController <span style="color: #002200;">:</span> UIViewController<br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>weak, nonatomic<span style="color: #002200;">&#41;</span> IBOutlet UITextField <span style="color: #002200;">*</span>txtFirstname;<br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>weak, nonatomic<span style="color: #002200;">&#41;</span> IBOutlet UITextField <span style="color: #002200;">*</span>txtLastname;<br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>weak, nonatomic<span style="color: #002200;">&#41;</span> IBOutlet UITextField <span style="color: #002200;">*</span>txtAge;<br />
<br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>saveInfo<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Finally, go to the Interface Builder once again and do the appropriate connections, as shown in the next figure:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_17_iboutlet_connection.jpg" alt="SQLite - IBconnection" class="aligncenter size-full wp-image-3798" /></div>
<p>Note that when you&#8217;ll be viewing the <em>EditInfoViewController</em> view controller, the back button will appear to the navigation bar along with the Save button. To let it have the same color to the Save button you just need to go to the <em>EditInfoViewController.m</em> file, and to add the next line in the <em>viewDidLoad</em> method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>viewDidLoad<br />
<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>super viewDidLoad<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Do any additional setup after loading the view.</span><br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Set the navigation bar tint color.</span><br />
&nbsp; &nbsp; self.navigationController.navigationBar.tintColor <span style="color: #002200;">=</span> self.navigationItem.rightBarButtonItem.tintColor;<br />
<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<h2>Adding New Records</h2>
<p>Having the interface of the sample app prepared, we can go towards the implementation of our sample app where we&#8217;ll try out our database class. As no data still exist in our database, the best point to start from would be to develop the feature of adding a new record. That requires work in both of our view controllers: In the <em>View Controller</em> class we should make the <em>Add (plus button)</em> functioning, so we can navigate to the next view controller. In the <em>Edit Info View Controller</em> class, we will get all values from textfields, and using an <em>insert</em> command, we&#8217;ll add a new record to database.</p>
<p>Let&#8217;s see everything in details. Go to the <em>ViewController.m</em> file, and straight ahead to the <em>addNewRecord:</em> IBAction method. Navigating to a new view controller using segues is easy, so the only thing we have to do here is to write just one line of code:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>addNewRecord<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self performSegueWithIdentifier<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;idSegueEditInfo&quot;</span> sender<span style="color: #002200;">:</span>self<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Focusing now our attention on the <em>EditInfoViewController</em> class, the first thing we should take care about is to dismiss the keyboard every time the Done button on it is tapped. To do so, we must implement one textfield delegate method, but first, we must adopt the respective protocol. So, open the <em>EditInfoViewController.h</em> file, and modify the header line as follows:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> EditInfoViewController <span style="color: #002200;">:</span> UIViewController &lt;UITextFieldDelegate&gt;</div></td></tr></tbody></table></div>
<p>Next, we must indicate that our class is the delegate of the textfields, and that can be done in two ways: Either to do it in Interface Builder, or to do it programmatically. The second is the way I prefer, as I think is much simpler. Open the <em>EditInfoViewController.m</em> file and go to the <em>viewDidLoad</em> method. In there add these three lines:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>viewDidLoad<br />
<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; ...<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Make self the delegate of the textfields.</span><br />
&nbsp; &nbsp; self.txtFirstname.delegate <span style="color: #002200;">=</span> self;<br />
&nbsp; &nbsp; self.txtLastname.delegate <span style="color: #002200;">=</span> self;<br />
&nbsp; &nbsp; self.txtAge.delegate <span style="color: #002200;">=</span> self;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Now, we are ready to implement a simple delegate method and know when the Done button of the keyboard gets tapped. That method is the <em>textFieldShouldReturn:</em>, and in its implementation we&#8217;ll perform just one task: We&#8217;ll resign the textfield from first responder. Here it is:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">BOOL</span><span style="color: #002200;">&#41;</span>textFieldShouldReturn<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>UITextField <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>textField<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>textField resignFirstResponder<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #a61390;">YES</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Time to work with the database. Go to the top of the file, and import our custom class:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #6e371a;">#import &quot;DBManager.h&quot;</span></div></td></tr></tbody></table></div>
<p>Now that the database class can be used, let&#8217;s declare a private property to do so. Go to the private class section and add the next declaration:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> EditInfoViewController <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#41;</span><br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic, strong<span style="color: #002200;">&#41;</span> DBManager <span style="color: #002200;">*</span>dbManager;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Then, in the <em>viewDidLoad</em> method initialize it using the custom init method we implemented:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>viewDidLoad<br />
<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; ...<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Initialize the dbManager object.</span><br />
&nbsp; &nbsp; self.dbManager <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>DBManager alloc<span style="color: #002200;">&#93;</span> initWithDatabaseFilename<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;sampledb.sql&quot;</span><span style="color: #002200;">&#93;</span>;<br />
<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>By initializing as shown above, upon the first run the database class will check if the <em>sampledb.sql</em> file exists or not in the documents directory, and it will copy it there if not found.</p>
<p>What we have left to do now is easy, but the most important part. Using all the textfield text values, we&#8217;ll prepare an <em>insert</em> query and we&#8217;ll execute it. To verify the outcome of the execution we&#8217;ll output to the debugger either a success message, or the error message if any error occurs. Also, upon successful saving we&#8217;ll display the number of the affected rows, so we&#8217;ll manage to see if our class works as expected.</p>
<p>To do all that go to the <em>saveInfo:</em> IBAction method. Right next is given its implementation:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>saveInfo<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Prepare the query string. &nbsp; &nbsp;</span><br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>query <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithFormat<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;insert into peopleInfo values(null, '%@', '%@', %d)&quot;</span>, self.txtFirstname.text, self.txtLastname.text, <span style="color: #002200;">&#91;</span>self.txtAge.text intValue<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Execute the query.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.dbManager executeQuery<span style="color: #002200;">:</span>query<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// If the query was successfully executed then pop the view controller.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self.dbManager.affectedRows <span style="color: #002200;">!=</span> <span style="color: #2400d9;">0</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; NSLog<span style="color: #002200;">&#40;</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;Query was executed successfully. Affected rows = %d&quot;</span>, self.dbManager.affectedRows<span style="color: #002200;">&#41;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Pop the view controller.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.navigationController popViewControllerAnimated<span style="color: #002200;">:</span><span style="color: #a61390;">YES</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; NSLog<span style="color: #002200;">&#40;</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;Could not execute the query.&quot;</span><span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Notice that after having added a new record successfully, we also pop the view controller and return back to the <em>View Controller</em> one.</p>
<p>The app can be tested now for first time. Compile and run it, and try to add a new record. When you finish typing data, tap on the Save button and watch at the debugger. If you see a message similar to the next one, then congratulations, the database is working!</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_18_insert_record_sample.jpg" alt="SQLite - Insert Record" class="aligncenter size-full wp-image-3799" /></div>
<h2>Loading and Displaying Records</h2>
<p>Now that we can successfully add records to the database, the most reasonable next step is to display them, so we&#8217;ll work on the <em>View Controller</em> class. Summarizing what we have to do here, I would say that our job has two parts: The first one is to implement all the necessary, required table view methods so our loaded data from the database get listed properly on the table view. The second one is to create a <em>select</em> query, load our data and finally display them.</p>
<p>If you recall, when we did all the setup in the Interface Builder, we declared an IBOutlet property for the table view. Using it, we&#8217;ll make the <em>View Controller</em> class both the delegate and datasource of it, but prior to that we must adopt two necessary protocols, the <em>UITableViewDelegate</em> and the <em>UITableViewDataSource</em>. As always, this will take place in the <em>ViewController.h</em> file, where we&#8217;ll modify the <em>@interface</em> header line as follows:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> ViewController <span style="color: #002200;">:</span> UIViewController &lt;UITableViewDelegate, UITableViewDataSource&gt;</div></td></tr></tbody></table></div>
<p>Next, in the <em>ViewController.m</em> file and in the <em>viewDidLoad</em> method we just have to write these:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>viewDidLoad<br />
<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>super viewDidLoad<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Do any additional setup after loading the view, typically from a nib.</span><br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Make self the delegate and datasource of the table view.</span><br />
&nbsp; &nbsp; self.tblPeople.delegate <span style="color: #002200;">=</span> self;<br />
&nbsp; &nbsp; self.tblPeople.dataSource <span style="color: #002200;">=</span> self;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Now, let&#8217;s get started by loading the data from the database. To do so, we need three things:</p>
<ol>
<li>To declare and initialize a <em>DBManager</em> property.</li>
<li>To declare and array for storing the returned data.</li>
<li>A private method to do the job.</li>
</ol>
<p>Go to the private section of the class, and declare the next two properties, and one private method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> ViewController <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#41;</span><br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic, strong<span style="color: #002200;">&#41;</span> DBManager <span style="color: #002200;">*</span>dbManager;<br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic, strong<span style="color: #002200;">&#41;</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="color: #400080;">NSArray</span></a> <span style="color: #002200;">*</span>arrPeopleInfo;<br />
<br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>loadData;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Don&#8217;t worry if Xcode is showing an error. We just need to import our database class header:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #6e371a;">#import &quot;DBManager.h&quot;</span></div></td></tr></tbody></table></div>
<p>Now, as we exactly did in the <em>EditInfoViewController</em> class, we&#8217;ll initialize the database property here as well:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>viewDidLoad<br />
<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; ...<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Initialize the dbManager property.</span><br />
&nbsp; &nbsp; self.dbManager <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>DBManager alloc<span style="color: #002200;">&#93;</span> initWithDatabaseFilename<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;sampledb.sql&quot;</span><span style="color: #002200;">&#93;</span>;<br />
<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Our next task is to implement the <em>loadData</em> method, and prepare the <em>select</em> query. Let&#8217;s see it first:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>loadData<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Form the query.</span><br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>query <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;select * from peopleInfo&quot;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Get the results.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self.arrPeopleInfo <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; self.arrPeopleInfo <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; self.arrPeopleInfo <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="color: #400080;">NSArray</span></a> alloc<span style="color: #002200;">&#93;</span> initWithArray<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>self.dbManager loadDataFromDB<span style="color: #002200;">:</span>query<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Reload the table view.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.tblPeople reloadData<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Three things happen here: At first, the query string is prepared, and as you see, is a simple <em>select</em> statement. Then, the <em>arrPeopleInfo</em> array gets initialized, and upon its initialization we call the <em>loadDataFromDB:</em> method of the <em>dbManager</em> object. Once the data has been fetched and returned, we reload the table view to display it. For the time being the last line will do nothing, but after we have had our table view ready, it will be working just fine.</p>
<p>Loading data is as simple as you see in the previous code snippet. Having done so, enables us to move ahead and work with the table view. Note that based on the <em>arrPeopleInfo</em> array, we will be able to define the total rows of the table view.</p>
<p>Regarding the table view methods, let&#8217;s get started from the easy ones:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span>NSInteger<span style="color: #002200;">&#41;</span>numberOfSectionsInTableView<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>UITableView <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>tableView<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #2400d9;">1</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span>NSInteger<span style="color: #002200;">&#41;</span>tableView<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>UITableView <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>tableView numberOfRowsInSection<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>NSInteger<span style="color: #002200;">&#41;</span>section<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">return</span> self.arrPeopleInfo.count;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span>CGFloat<span style="color: #002200;">&#41;</span>tableView<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>UITableView <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>tableView heightForRowAtIndexPath<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/"><span style="color: #400080;">NSIndexPath</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>indexPath<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #2400d9;">60.0</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>In the first one, we tell our table view that we want to have just one section. With the second one, we specify the total number of rows displayed in the table view. Actually, this method will return as many rows as those existing in the result set that will be loaded from the database. Finally, with the third one we set each row&#8217;s height to 60.0 points.</p>
<p>To display a row&#8217;s data, we&#8217;ll use the <em>tableView:cellForRowAtIndexPath:</em> method. In it, initially we&#8217;ll dequeue the prototype cell we created in the Interface Builder. Then, making use of the <em>arrColumnNames</em> array of the <em>dbManager</em> property we&#8217;ll define the index of each column (field) in the sub-array for the current index of the <em>arrPeopleInfo</em> array. Finally, we&#8217;ll get the actual data and assign it to the <em>textLabel</em> and <em>detailTextLabel</em> labels of the cell. Here&#8217;s the implementation:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span>UITableViewCell <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>tableView<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>UITableView <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>tableView cellForRowAtIndexPath<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/"><span style="color: #400080;">NSIndexPath</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>indexPath<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Dequeue the cell.</span><br />
&nbsp; &nbsp; UITableViewCell <span style="color: #002200;">*</span>cell <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>tableView dequeueReusableCellWithIdentifier<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;idCellRecord&quot;</span> forIndexPath<span style="color: #002200;">:</span>indexPath<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; NSInteger indexOfFirstname <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>self.dbManager.arrColumnNames indexOfObject<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;firstname&quot;</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; NSInteger indexOfLastname <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>self.dbManager.arrColumnNames indexOfObject<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;lastname&quot;</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; NSInteger indexOfAge <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>self.dbManager.arrColumnNames indexOfObject<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;age&quot;</span><span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Set the loaded data to the appropriate cell labels.</span><br />
&nbsp; &nbsp; cell.textLabel.text <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithFormat<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;%@ %@&quot;</span>, <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>self.arrPeopleInfo objectAtIndex<span style="color: #002200;">:</span>indexPath.row<span style="color: #002200;">&#93;</span> objectAtIndex<span style="color: #002200;">:</span>indexOfFirstname<span style="color: #002200;">&#93;</span>, <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>self.arrPeopleInfo objectAtIndex<span style="color: #002200;">:</span>indexPath.row<span style="color: #002200;">&#93;</span> objectAtIndex<span style="color: #002200;">:</span>indexOfLastname<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; cell.detailTextLabel.text <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithFormat<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;Age: %@&quot;</span>, <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>self.arrPeopleInfo objectAtIndex<span style="color: #002200;">:</span>indexPath.row<span style="color: #002200;">&#93;</span> objectAtIndex<span style="color: #002200;">:</span>indexOfAge<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #a61390;">return</span> cell;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Notice that instead of using the <em>indexOfFirstname</em>, <em>indexOfLastname</em> and <em>indexOfAge</em> variables for accessing the proper data, we could have used the index number for each field directly. For example, instead of writing this:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">cell.detailTextLabel.text <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithFormat<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;Age: %@&quot;</span>, <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>self.arrPeopleInfo objectAtIndex<span style="color: #002200;">:</span>indexPath.row<span style="color: #002200;">&#93;</span> objectAtIndex<span style="color: #002200;">:</span>indexOfAge<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;</div></td></tr></tbody></table></div>
<p>we could just have written this:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">cell.detailTextLabel.text <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithFormat<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;Age: %@&quot;</span>, <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>self.arrPeopleInfo objectAtIndex<span style="color: #002200;">:</span>indexPath.row<span style="color: #002200;">&#93;</span> objectAtIndex<span style="color: #002200;">:</span><span style="color: #2400d9;">3</span><span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;</div></td></tr></tbody></table></div>
<p>Using or not the column names array is totally up to you, and I used it here just for demonstrative reasons. I just wanted to make clear how you can specify the index of a field programmatically, even though our example is quite simple and it is not necessary to do this.</p>
<p>So, it seems that we&#8217;ve finished taking all the proper actions for loading the data and showing it to the table view. However, if you run the app now, you&#8217;ll see no data displayed at all. That&#8217;s because of a simple reason: We didn&#8217;t call the <em>loadData</em> method anywhere. So, go to the <em>viewDidLoad</em> method and add the next line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>viewDidLoad<br />
<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; ...<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Load the data.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self loadData<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Run the app once again. This time, the records you added in the previous step are shown in the table view. That&#8217;s great.</p>
<p>Before we consider this section as finished, there&#8217;s one more detail we should take care about. You&#8217;ll definitely notice that when adding a new record and then tapping on the Save button, the record is saved and you&#8217;re transferred back to the <em>View Controller</em> view controller, but the table view doesn&#8217;t get updated with the new data, unless you re-launch the app. That&#8217;s because for the time being the <em>View Controller</em> view controller cannot know whether new data have been added to the database after the <em>Edit Info View Controller</em> view controller has popped from the navigation stack. To workaround this, we must create a protocol in the <em>EditInfoViewController</em> class, declare a delegate method to be used for notifying when a new record has been added, and adopt that protocol to the <em>ViewController</em> class.</p>
<p>Let&#8217;s give life to all the above. Start by opening the <em>EditInfoViewController.h</em> file. At the top of it, add the next code fragment:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@protocol</span> EditInfoViewControllerDelegate<br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>editingInfoWasFinished;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Next, in the interface right below, add a declaration for the delegate property:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> EditInfoViewController <span style="color: #002200;">:</span> UIViewController &lt;UITextFieldDelegate&gt;<br />
<br />
...<br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic, strong<span style="color: #002200;">&#41;</span> id&lt;EditInfoViewControllerDelegate&gt; delegate;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Finally, go to the <em>saveInfo:</em> IBAction method and modify it, so the delegate method is called before popping the view controller. Right next, you are given that method updated:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>saveInfo<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Prepare the query string.</span><br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>query <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithFormat<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;insert into peopleInfo values(null, '%@', '%@', %d)&quot;</span>, self.txtFirstname.text, self.txtLastname.text, <span style="color: #002200;">&#91;</span>self.txtAge.text intValue<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Execute the query.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.dbManager executeQuery<span style="color: #002200;">:</span>query<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// If the query was successfully executed then pop the view controller.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self.dbManager.affectedRows <span style="color: #002200;">!=</span> <span style="color: #2400d9;">0</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; NSLog<span style="color: #002200;">&#40;</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;Query was executed successfully. Affected rows = %d&quot;</span>, self.dbManager.affectedRows<span style="color: #002200;">&#41;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Inform the delegate that the editing was finished.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.delegate editingInfoWasFinished<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Pop the view controller.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.navigationController popViewControllerAnimated<span style="color: #002200;">:</span><span style="color: #a61390;">YES</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; NSLog<span style="color: #002200;">&#40;</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;Could not execute the query.&quot;</span><span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>With the above three steps, the <em>EditInfoViewController</em> will notify the delegate class every time a new save action occurs.</p>
<p>Let&#8217;s go now to the <em>ViewController.h</em> file. Go to the top of it, and make the next import:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #6e371a;">#import &quot;EditInfoViewController.h&quot;</span></div></td></tr></tbody></table></div>
<p>Then, modify the <em>@interface</em> header a bit:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> ViewController <span style="color: #002200;">:</span> UIViewController &lt;UITableViewDelegate, UITableViewDataSource, EditInfoViewControllerDelegate&gt;</div></td></tr></tbody></table></div>
<p>As you see, now we are adopting the <em>EditInfoViewControllerDelegate</em> protocol, so the only thing we have left is to implement the delegate method. Go to the <em>ViewController.m</em> file, and add the next code segment:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>editingInfoWasFinished<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Reload the data.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self loadData<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>As you may have expected, the only thing we do is to load our data once again.</p>
<p>However, nothing is going to happen until we make the <em>ViewController</em> class the delegate of the <em>EditInfoViewController</em> one. We&#8217;ll do that in the <em>prepareForSegue:sender:</em> method, which is called before the segue is performed. Here it is:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>prepareForSegue<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>UIStoryboardSegue <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>segue sender<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; EditInfoViewController <span style="color: #002200;">*</span>editInfoViewController <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>segue destinationViewController<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; editInfoViewController.delegate <span style="color: #002200;">=</span> self;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>If you run the app, you&#8217;ll see that is working and behaving much better now. When adding new records, they immediately appear in the table view after having tapped on the Save button.</p>
<h2>Editing a Record</h2>
<p>Our sample app will be much better if we add support for editing and deleting records, apart from just adding new and loading existing ones. Also, that way we&#8217;ll see in action how the <em>update</em> and <em>delete</em> queries work, and we&#8217;ll test our database class even more.</p>
<p>In this section we&#8217;ll see how to edit a record. Running the app and looking at the table view, you notice that we have added a detail disclosure indicator on the prototype cell. That&#8217;s what we&#8217;ll use to edit a record matching to the respective row. The actual editing will take place in the <em>EditInfoViewController</em> class, which we&#8217;ll modify a little bit, so when saving it will either execute an <em>insert</em> or an <em>update</em> query.</p>
<p>The most important part of the underlying logic is the existence of a public int property in the <em>EditInfoViewController</em> class, in which the edited record&#8217;s ID will be assigned. When saving, that property will be used to specify the exact data that should be updated. However, in case of adding a new record, we&#8217;ll set the 1 value to this property, indicating that way we want to run an <em>insert</em> query, not an update. Lastly, when the <em>EditInfoViewController</em> view controller is appeared to edit a record, the data for that specific record will be loaded and assigned to the textfields.</p>
<p>If all the above seem confusing, don&#8217;t worry. Come along to perform some simple steps, and everything will become crystal clear.</p>
<p>Let&#8217;s get started from the <em>EditInfoViewController.h</em> file, where we should declare the public int property:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> EditInfoViewController <span style="color: #002200;">:</span> UIViewController &lt;UITextFieldDelegate&gt;<br />
<br />
...<br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic<span style="color: #002200;">&#41;</span> <span style="color: #a61390;">int</span> recordIDToEdit;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Now, open the <em>EditInfoViewController.m</em> file and declare a private method which will be used to load the edited data. Go to the private section of the class, and add the next line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> EditInfoViewController <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#41;</span><br />
<br />
...<br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>loadInfoToEdit;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Now, let&#8217;s implement it:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>loadInfoToEdit<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Create the query.</span><br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>query <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithFormat<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;select * from peopleInfo where peopleInfoID=%d&quot;</span>, self.recordIDToEdit<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Load the relevant data.</span><br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="color: #400080;">NSArray</span></a> <span style="color: #002200;">*</span>results <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/"><span style="color: #400080;">NSArray</span></a> alloc<span style="color: #002200;">&#93;</span> initWithArray<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>self.dbManager loadDataFromDB<span style="color: #002200;">:</span>query<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Set the loaded data to the textfields.</span><br />
&nbsp; &nbsp; self.txtFirstname.text <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>results objectAtIndex<span style="color: #002200;">:</span><span style="color: #2400d9;">0</span><span style="color: #002200;">&#93;</span> objectAtIndex<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>self.dbManager.arrColumnNames indexOfObject<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;firstname&quot;</span><span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; self.txtLastname.text <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>results objectAtIndex<span style="color: #002200;">:</span><span style="color: #2400d9;">0</span><span style="color: #002200;">&#93;</span> objectAtIndex<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>self.dbManager.arrColumnNames indexOfObject<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;lastname&quot;</span><span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; self.txtAge.text <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>results objectAtIndex<span style="color: #002200;">:</span><span style="color: #2400d9;">0</span><span style="color: #002200;">&#93;</span> objectAtIndex<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>self.dbManager.arrColumnNames indexOfObject<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;age&quot;</span><span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Everything is quite straightforward here. At first, we form the query. As you notice, it&#8217;s the first time we have a <em>where</em> clause. Then, we get the data from the database and assign the appropriate values to the textfields.</p>
<p>The above method won&#8217;t work if we don&#8217;t call it, so go to the <em>viewDidLoad</em> method and make a conditional call:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>viewDidLoad<br />
<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; ...<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Check if should load specific record for editing.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self.recordIDToEdit <span style="color: #002200;">!=</span> <span style="color: #002200;">-</span><span style="color: #2400d9;">1</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Load the record with the specific ID from the database.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self loadInfoToEdit<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Great, but we&#8217;ve left one more step in this class: To modify the <em>saveInfo:</em> IBAction method and make it update an existing record instead of just inserting new records to the database. Right below you&#8217;re given the method implemented in its final form. Notice how using the <em>recordIDToEdit</em> property we specify the query type:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>saveInfo<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Prepare the query string.</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// If the recordIDToEdit property has value other than -1, then create an update query. Otherwise create an insert query.</span><br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>query;<br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self.recordIDToEdit <span style="color: #002200;">==</span> <span style="color: #002200;">-</span><span style="color: #2400d9;">1</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; query <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithFormat<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;insert into peopleInfo values(null, '%@', '%@', %d)&quot;</span>, self.txtFirstname.text, self.txtLastname.text, <span style="color: #002200;">&#91;</span>self.txtAge.text intValue<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; query <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithFormat<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;update peopleInfo set firstname='%@', lastname='%@', age=%d where peopleInfoID=%d&quot;</span>, self.txtFirstname.text, self.txtLastname.text, self.txtAge.text.intValue, self.recordIDToEdit<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Execute the query.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.dbManager executeQuery<span style="color: #002200;">:</span>query<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// If the query was successfully executed then pop the view controller.</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>self.dbManager.affectedRows <span style="color: #002200;">!=</span> <span style="color: #2400d9;">0</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; NSLog<span style="color: #002200;">&#40;</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;Query was executed successfully. Affected rows = %d&quot;</span>, self.dbManager.affectedRows<span style="color: #002200;">&#41;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Inform the delegate that the editing was finished.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.delegate editingInfoWasFinished<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Pop the view controller.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.navigationController popViewControllerAnimated<span style="color: #002200;">:</span><span style="color: #a61390;">YES</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; NSLog<span style="color: #002200;">&#40;</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;Could not execute the query.&quot;</span><span style="color: #002200;">&#41;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Our job in the <em>EditInfoViewController</em> class is over. However, that was just the half part of what we should do. We must go to the <em>ViewController</em> class now and make the detail disclosure button of the cells functional.</p>
<p>To detect tappings on the detail disclosure buttons, <em>UITableViewDelegate</em> protocol provides the <em>tableView:accessoryButtonTappedForRowWithIndexPath:</em> delegate method. We are going to implement it, and inside its body we&#8217;ll do two simple tasks:</p>
<ol>
<li>We will specify the record ID that&#8217;s about to be edited.</li>
<li>We&#8217;ll perform the segue so the <em>EditInfoViewController</em> view controller gets pushed to the navigation stack and make us able to edit.</li>
</ol>
<p>We&#8217;ll get started by declaring a private property to the <em>ViewController</em> class similar to the <em>recordIDToEdit</em>, because we&#8217;ll need a way to keep the record ID matching to the row of the tapped button. So, go to the private section of the interface, and do so:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> ViewController <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#41;</span><br />
<br />
...<br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic<span style="color: #002200;">&#41;</span> <span style="color: #a61390;">int</span> recordIDToEdit;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>With the above private property declared, we can proceed to the <em>tableView:accessoryButtonTappedForRowWithIndexPath:</em> implementation:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>tableView<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>UITableView <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>tableView accessoryButtonTappedForRowWithIndexPath<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/"><span style="color: #400080;">NSIndexPath</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>indexPath<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Get the record ID of the selected name and set it to the recordIDToEdit property.</span><br />
&nbsp; &nbsp; self.recordIDToEdit <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>self.arrPeopleInfo objectAtIndex<span style="color: #002200;">:</span>indexPath.row<span style="color: #002200;">&#93;</span> objectAtIndex<span style="color: #002200;">:</span><span style="color: #2400d9;">0</span><span style="color: #002200;">&#93;</span> intValue<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Perform the segue.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self performSegueWithIdentifier<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;idSegueEditInfo&quot;</span> sender<span style="color: #002200;">:</span>self<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Easy enough, but now we must tell the <em>EditInfoViewController</em> class what the record ID we want to edit is. This should take place before the segue is performed, so go to the <em>prepareForSegue:sender:</em> and add just one line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>prepareForSegue<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>UIStoryboardSegue <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>segue sender<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; ...<br />
&nbsp; &nbsp; editInfoViewController.recordIDToEdit <span style="color: #002200;">=</span> self.recordIDToEdit;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>We are almost finished. The only issue that we&#8217;re still having, is that we haven&#8217;t specified the value of the <em>recordIDToEdit</em> property when we&#8217;re about to add a new record. That can be easily fixed, as we just have to go to the <em>addNewRecord:</em> IBAction method definition, and modify it as follows:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>addNewRecord<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Before performing the segue, set the -1 value to the recordIDToEdit. That way we'll indicate that we want to add a new record and not to edit an existing one.</span><br />
&nbsp; &nbsp; self.recordIDToEdit <span style="color: #002200;">=</span> <span style="color: #002200;">-</span><span style="color: #2400d9;">1</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Perform the segue.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self performSegueWithIdentifier<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;idSegueEditInfo&quot;</span> sender<span style="color: #002200;">:</span>self<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Everything is ready now. Feel free to run the app once again, and then try to edit one or more of any existing records. As it seems, our database class perfectly works and our sample app gains more features.</p>
<h2>Deleting a Record</h2>
<p>Now that we can insert, load and update records, let&#8217;s make our app able to delete them as well. To delete a record, we&#8217;ll use the built-in table view functionality, where by swiping on a row towards left, the delete button is appeared.</p>
<p>To do that possible, we must implement the <em>tableView:commitEditingStyle:forRowAtIndexPath:</em> table view method. In it, if the editing style is a delete style, we&#8217;ll execute a <em>delete</em> query, and then we&#8217;ll reload the data. As simple as that, and the record deletion will be ready. Let&#8217;s see it:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>tableView<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>UITableView <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>tableView commitEditingStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>UITableViewCellEditingStyle<span style="color: #002200;">&#41;</span>editingStyle forRowAtIndexPath<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/"><span style="color: #400080;">NSIndexPath</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>indexPath<span style="color: #002200;">&#123;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span>editingStyle <span style="color: #002200;">==</span> UITableViewCellEditingStyleDelete<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Delete the selected record.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Find the record ID.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">int</span> recordIDToDelete <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>self.arrPeopleInfo objectAtIndex<span style="color: #002200;">:</span>indexPath.row<span style="color: #002200;">&#93;</span> objectAtIndex<span style="color: #002200;">:</span><span style="color: #2400d9;">0</span><span style="color: #002200;">&#93;</span> intValue<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Prepare the query.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>query <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> stringWithFormat<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;delete from peopleInfo where peopleInfoID=%d&quot;</span>, recordIDToDelete<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Execute the query.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self.dbManager executeQuery<span style="color: #002200;">:</span>query<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Reload the table view.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self loadData<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>At first, we set the ID of the record to be deleted. Then, we compose the query string appropriately, we execute it using the <em>executeQuery:</em> method of our database class, and finally we load the data once again. That way, every time the delete button of a row is tapped, the respective record on the database will be permanently removed.</p>
<p>If you want now give the app one more try, and see how it works. All the basic features are now implemented and fully functional.</p>
<h2>Compile and Run the App</h2>
<p>This section exists in almost every tutorial in case you are one of those guys who wait to arrive at the finish point, and then run and test the app. Well, we&#8217;re almost at the end of our mission, so if you still haven&#8217;t run it, do it now. Begin by adding a new record, and then save it. Next, try to edit it, and finally delete it. Add as many records as you want and generally do whatever you want for testing both the sample app and the database class. Even more, add any extra features you may think of and build more complex queries.</p>
<p>Right next it&#8217;s demonstrated the animated graphic presented at the beginning of the tutorial too:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/06/t15_19_sample.gif" alt="SQLite Database Demo App" class="aligncenter size-full wp-image-3800" /></div>
<h2>Summary</h2>
<p>I&#8217;ve always believed that working with databases is the best possible solution when dealing with data, and having relevant tools or libraries ready for use is a must for every developer. SQLite might not be as powerful as other databases or database management systems, however is light and maybe the most suitable solution for a mobile platform. The class we developed in this tutorial is not set of stone, so keep in mind that you can change it and evolve it at any time and in any possible way that serves you. With it, I just wanted to provide you with a working, suitable for the most cases, reusable component, which could potentially have double results: Both to teach you the basics of SQLite, and to get you out of the hassle of developing other custom data handling solutions. That said, I truly hope you have learned and earned something new by this tutorial, and as always let me know your thoughts or questions. Until next time, I wish an easy, bug-free programming to all!</p>
<p>For your reference, you can <a href="https://dl.dropboxusercontent.com/u/2857188/SQLite3DBSample.zip">download the complete Xcode project from here</a>.</p>

<!-- Quick Adsense WordPress Plugin: http://quicksense.net/ -->
<div style="float:none;margin:20px 0 20px 0;text-align:center;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8501671653071605";
/* Appcoda_336_280_Ad */
google_ad_slot = "4009415334";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>

<div style="font-size:0px;height:0px;line-height:0px;margin:0;padding:0;clear:both"></div><h3>You May Like These:</h3><div style="clear: both"></div><div style="border: 0pt none ; margin: 0pt; padding: 0pt;"><a onmouseout="this.style.backgroundColor='#FFFFFF'" onmouseover="this.style.backgroundColor='#EEEEEF'" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/what-you-need-to-begin-ios-programming/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2012/04/requirement-1-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">What You Need to Begin iOS Programming</div></div></a><a onmouseout="this.style.backgroundColor='#FFFFFF'" onmouseover="this.style.backgroundColor='#EEEEEF'" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/core-data-tutorial-update-delete/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2012/12/MyStore-Delete-Device-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">Core Data Part 2: Update, Delete Managed Objects and View Raw SQL Statement</div></div></a><a onmouseout="this.style.backgroundColor='#FFFFFF'" onmouseover="this.style.backgroundColor='#EEEEEF'" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/ios-programming-facebook-login-sdk/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2014/05/facebook-login-feature-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">How to Integrate Facebook Login in iOS App</div></div></a><a onmouseout="this.style.backgroundColor='#FFFFFF'" onmouseover="this.style.backgroundColor='#EEEEEF'" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/building-rss-reader-using-uisplitviewcontroller-uipopoverviewcontroller/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2014/09/splitviewcontroller-featured-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">Building an RSS Reader Using UISplitViewController and UIPopoverViewController</div></div></a></div><div style="clear: both"></div><span class="et_social_bottom_trigger"></span><!--<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.appcoda.com/sqlite-database-ios-app-tutorial/"
    dc:identifier="http://www.appcoda.com/sqlite-database-ios-app-tutorial/"
    dc:title="How to Use SQLite to Manage Data in iOS Apps"
    trackback:ping="http://www.appcoda.com/sqlite-database-ios-app-tutorial/trackback/" />
</rdf:RDF>-->
</div><div class="post-meta"><span class="categories">Filed Under: <a href="http://www.appcoda.com/course/" rel="category tag">Course</a>, <a href="http://www.appcoda.com/course/intermediate/" rel="category tag">Intermediate</a></span> <span class="tags">Tagged With: <a href="http://www.appcoda.com/tag/database-programming/" rel="tag">database programming</a>, <a href="http://www.appcoda.com/tag/ios-programming/" rel="tag">iOS Programming</a>, <a href="http://www.appcoda.com/tag/sqlite/" rel="tag">sqlite</a>, <a href="http://www.appcoda.com/tag/xcode-5/" rel="tag">Xcode 5</a></span></div><div class="after-post widget-area"><div id="text-8" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Get Free Chapters of Our Swift Book</h4>
			<div class="textwidget"><a href="http://www.appcoda.com/swift/"><img src="http://www.appcoda.com/wp-content/uploads/2014/10/swift-book-cover-227x300.png" alt="Beginning iOS 8 Programming with Swift" class="alignright size-medium wp-image-4153" width="200" /></a>If you want to create an app but don't know where to begin, this book covers the whole aspect of Swift programming and iOS 8 development and shows you every step from an idea to a real app on App Store. This book features a lot of hands-on exercises and projects. You will first create a simple app, then prototype an app idea, and later add some features to it in each chapter, until a real app is built. Want to learn more? <a href="http://www.appcoda.com/swift/">Check it out here and get three free chapters.</a>
</p>
<br/></div>
		</div></div>
<div id="featured-page-2" class="widget featured-content featuredpage"><div class="widget-wrap"><h4 class="widget-title widgettitle">Sign Up for our Free Tutorials</h4>
<div class="post-38 page type-page status-publish has-post-thumbnail hentry entry"><ul>
<li>Learn iOS Programming From Scratch</li>
<li>Step by Step Guide to Build Your First iPhone App</li>
<li>Complete Source Code for Your Reference</li>
<li>More Programming Tips and Tutorials to Come</li>
</ul>
<div class="enews">
<h4 class="widgettitle">Whatcha waiting for?</h4>
<form action="http://sendy.appcoda.com/sendy/subscribe" method="post" id="subscribe" name="mc-embedded-subscribe-form" class="validate" target="_blank" accept-charset="utf-8">
	<input type="email" id="subbox" value="" name="email" class="email" id="mce-EMAIL" placeholder="Enter your email address" required><input type="submit" value="Subscribe" name="subscribe" id="subbutton" class="button"><br />
	<input type="hidden" name="list" value="KEdC8BeT8EC8znOnfjSQAw"/><br />
</form>
</div>
</div></div></div>
</div></div><div class="author-box"><div><img alt='' src='http://2.gravatar.com/avatar/582c964c3dafd700a4df627225d859fe?s=70&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/582c964c3dafd700a4df627225d859fe?s=140&amp;d=mm&amp;r=g 2x' class='avatar avatar-70 photo' height='70' width='70' /> <strong>About Gabriel Theodoropoulos</strong><br /><p>Gabriel has been a software developer for about two decades. He has long experience in developing software solutions for various platforms in many programming languages. Since middle-2010 he has been developing almost exclusively for iOS. Tutorials consist of the best way to share knowledge with people all over the world. Follow Gabriel at <a href="http://plus.google.com/+gabrieltheodoropoulos">Google+</a> and <a href="https://twitter.com/gabtheodor">Twitter</a>.</p>
</div></div>
<div id="disqus_thread">
            <div id="dsq-content">


            <ul id="dsq-comments">
                    <li class="comment even thread-even depth-1" id="dsq-comment-18502">
        <div id="dsq-comment-header-18502" class="dsq-comment-header">
            <cite id="dsq-cite-18502">
                <span id="dsq-author-user-18502">Fernando</span>
            </cite>
        </div>
        <div id="dsq-comment-body-18502" class="dsq-comment-body">
            <div id="dsq-comment-message-18502" class="dsq-comment-message"><p>How can I store an image?</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-18662">
        <div id="dsq-comment-header-18662" class="dsq-comment-header">
            <cite id="dsq-cite-18662">
                <span id="dsq-author-user-18662">Ioannis Gman</span>
            </cite>
        </div>
        <div id="dsq-comment-body-18662" class="dsq-comment-body">
            <div id="dsq-comment-message-18662" class="dsq-comment-message"><p>greek??nice to see such a good explained tutorial..bookmarked and will try this soon.. even tough i like the use of storyboards instead of interface builder! <br />
well done! and thank you very much</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-19322">
        <div id="dsq-comment-header-19322" class="dsq-comment-header">
            <cite id="dsq-cite-19322">
http://assfired.com                <span id="dsq-author-user-19322">Steely</span>
            </cite>
        </div>
        <div id="dsq-comment-body-19322" class="dsq-comment-body">
            <div id="dsq-comment-message-19322" class="dsq-comment-message"><p>The pictures above indicates that he is using Storyboard <img src="http://www.appcoda.com/wp-includes/images/smilies/simple-smile.png" alt=":)" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-18665">
        <div id="dsq-comment-header-18665" class="dsq-comment-header">
            <cite id="dsq-cite-18665">
                <span id="dsq-author-user-18665">bader</span>
            </cite>
        </div>
        <div id="dsq-comment-body-18665" class="dsq-comment-body">
            <div id="dsq-comment-message-18665" class="dsq-comment-message"><p>Thank you. Regards </p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-19251">
        <div id="dsq-comment-header-19251" class="dsq-comment-header">
            <cite id="dsq-cite-19251">
                <span id="dsq-author-user-19251">Anita Agrawal</span>
            </cite>
        </div>
        <div id="dsq-comment-body-19251" class="dsq-comment-body">
            <div id="dsq-comment-message-19251" class="dsq-comment-message"><p>Thank you for this tutorial.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-19263">
        <div id="dsq-comment-header-19263" class="dsq-comment-header">
            <cite id="dsq-cite-19263">
                <span id="dsq-author-user-19263">Anita Agrawal</span>
            </cite>
        </div>
        <div id="dsq-comment-body-19263" class="dsq-comment-body">
            <div id="dsq-comment-message-19263" class="dsq-comment-message"><p>How do we provide a path for image to store in data base from gallery?</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-19321">
        <div id="dsq-comment-header-19321" class="dsq-comment-header">
            <cite id="dsq-cite-19321">
http://assfired.com                <span id="dsq-author-user-19321">Steely</span>
            </cite>
        </div>
        <div id="dsq-comment-body-19321" class="dsq-comment-body">
            <div id="dsq-comment-message-19321" class="dsq-comment-message"><p>simply use the tutorial to get the name of the image.<br />
Store the image in files and add the image name to the database.</p>
<p>Get the name from database and use it like this:<br />
        UIImage *myImage = [UIImage imageNamed:yourStringFromDatabase];</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-3" id="dsq-comment-19327">
        <div id="dsq-comment-header-19327" class="dsq-comment-header">
            <cite id="dsq-cite-19327">
                <span id="dsq-author-user-19327">Anita Agrawal</span>
            </cite>
        </div>
        <div id="dsq-comment-body-19327" class="dsq-comment-body">
            <div id="dsq-comment-message-19327" class="dsq-comment-message"><p>what will be the storage type for image in database table,which I need to create on terminal?</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-4" id="dsq-comment-19348">
        <div id="dsq-comment-header-19348" class="dsq-comment-header">
            <cite id="dsq-cite-19348">
http://assfired.com                <span id="dsq-author-user-19348">Steely</span>
            </cite>
        </div>
        <div id="dsq-comment-body-19348" class="dsq-comment-body">
            <div id="dsq-comment-message-19348" class="dsq-comment-message"><p>If the image name is only numbers  = INT<br />
If the image contains characters and numbers = TEXT</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-5" id="dsq-comment-19382">
        <div id="dsq-comment-header-19382" class="dsq-comment-header">
            <cite id="dsq-cite-19382">
                <span id="dsq-author-user-19382">Anita Agrawal</span>
            </cite>
        </div>
        <div id="dsq-comment-body-19382" class="dsq-comment-body">
            <div id="dsq-comment-message-19382" class="dsq-comment-message"><p>Actually I want to choose image from gallery, so I used in editViewController a button named upload image,and an UIImageView to show the image.<br />
I am able to choose image from gallery,but facing problem while saving that image in the database.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even depth-5" id="dsq-comment-19388">
        <div id="dsq-comment-header-19388" class="dsq-comment-header">
            <cite id="dsq-cite-19388">
http://assfired.com                <span id="dsq-author-user-19388">Steely</span>
            </cite>
        </div>
        <div id="dsq-comment-body-19388" class="dsq-comment-body">
            <div id="dsq-comment-message-19388" class="dsq-comment-message"><p>First Method:<br />
The easy way to do that is then to take the picture from the gallery and save it in documents. This should give you an idea on how to do so: <a href="http://stackoverflow.com/questions/6545180/ios-copy-a-file-in-documents-folder" rel="nofollow">http://stackoverflow.com/questions/6545180/ios-copy-a-file-in-documents-folder</a></p>
<p>Then get the image name and store that in the database.</p>
<p>Second Method: (complicated)<br />
Take the picture and convert the picture into binary blobs and save the blobs to database.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt depth-3" id="dsq-comment-24251">
        <div id="dsq-comment-header-24251" class="dsq-comment-header">
            <cite id="dsq-cite-24251">
http://www.gtiapps.com/                <span id="dsq-author-user-24251">Gabriel Theodoropoulos</span>
            </cite>
        </div>
        <div id="dsq-comment-body-24251" class="dsq-comment-body">
            <div id="dsq-comment-message-24251" class="dsq-comment-message"><p>Hello everbody,<br />
Sorry for the so late reply&#8230;<br />
The best way to store images is as Steely says. Keep the image file names to the database, and store the actual images to files. Don&#8217;t forget that your database is going to work on a mobile device, and you don&#8217;t want to consume too much memory when loading the database. Keep it as lightweight as you can.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-4" id="dsq-comment-51308">
        <div id="dsq-comment-header-51308" class="dsq-comment-header">
            <cite id="dsq-cite-51308">
                <span id="dsq-author-user-51308">Alex</span>
            </cite>
        </div>
        <div id="dsq-comment-body-51308" class="dsq-comment-body">
            <div id="dsq-comment-message-51308" class="dsq-comment-message"><p>Hi Gabriel,</p>
<p>I try this to store the image in the database :<br />
        UIImage *coverPhotoImage = _backgroundPicture.image;<br />
        NSData *coverPhotoData = UIImagePNGRepresentation(coverPhotoImage);<br />
And it works.</p>
<p>But when I try to retrieve it, it doesn&#8217;t work :<br />
 NSData *coverPhotoData = [[self.arrPeopleInfo objectAtIndex:0] objectAtIndex:indexOfBackgroundPicture];<br />
UIImage *coverPhotoImage = [UIImage imageWithData:coverPhotoData];<br />
    _backgroundPicture.image = coverPhotoImage;</p>
<p>Do you know why ?</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-19548">
        <div id="dsq-comment-header-19548" class="dsq-comment-header">
            <cite id="dsq-cite-19548">
                <span id="dsq-author-user-19548">Marina Landisberg</span>
            </cite>
        </div>
        <div id="dsq-comment-body-19548" class="dsq-comment-body">
            <div id="dsq-comment-message-19548" class="dsq-comment-message"><p>i named my sqlite database sampledb.sqlite. When i was running in &#8220;debug&#8221; mode, I was getting: &#8220;SQLite3DBSample[493:60b] The operation couldnt be completed. (Cocoa error 4.)&#8221; after executing line:&#8221;[[NSFileManager defaultManager] copyItemAtPath:sourcePath toPath:destinationPath<br />
                                                 error:&amp;error];&#8221;</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-19600">
        <div id="dsq-comment-header-19600" class="dsq-comment-header">
            <cite id="dsq-cite-19600">
                <span id="dsq-author-user-19600">Marina Landisberg</span>
            </cite>
        </div>
        <div id="dsq-comment-body-19600" class="dsq-comment-body">
            <div id="dsq-comment-message-19600" class="dsq-comment-message"><p>I found why that was happening. instead constant &#8220;NSDocumentDirectory&#8221; I got something like NSDocumentationDirectory from one of constants, suggested by xcode. Now everything works fine. Thanks</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-19638">
        <div id="dsq-comment-header-19638" class="dsq-comment-header">
            <cite id="dsq-cite-19638">
                <span id="dsq-author-user-19638">cymst~</span>
            </cite>
        </div>
        <div id="dsq-comment-body-19638" class="dsq-comment-body">
            <div id="dsq-comment-message-19638" class="dsq-comment-message"><p>A little complex&#8230; and thanks very much</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-20851">
        <div id="dsq-comment-header-20851" class="dsq-comment-header">
            <cite id="dsq-cite-20851">
                <span id="dsq-author-user-20851">FF</span>
            </cite>
        </div>
        <div id="dsq-comment-body-20851" class="dsq-comment-body">
            <div id="dsq-comment-message-20851" class="dsq-comment-message"><p>Hi there, is there a way to use the same database with a desktop app or web app?</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-24242">
        <div id="dsq-comment-header-24242" class="dsq-comment-header">
            <cite id="dsq-cite-24242">
http://www.gtiapps.com/                <span id="dsq-author-user-24242">Gabriel Theodoropoulos</span>
            </cite>
        </div>
        <div id="dsq-comment-body-24242" class="dsq-comment-body">
            <div id="dsq-comment-message-24242" class="dsq-comment-message"><p>Hi,<br />
There are two options to do what you want: Either to keep a local and an online version of the database and always keep both of them updated, or just have an online database (MySQL or another DBMS, not SQLite), and store your data on the web. The second is simpler of course, but everything depends on your app requirements.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-21450">
        <div id="dsq-comment-header-21450" class="dsq-comment-header">
            <cite id="dsq-cite-21450">
                <span id="dsq-author-user-21450">yaseen Almanna</span>
            </cite>
        </div>
        <div id="dsq-comment-body-21450" class="dsq-comment-body">
            <div id="dsq-comment-message-21450" class="dsq-comment-message"><p>Thanks for this great tutorial and if you can add &#8220;how to implement a search bar&#8221; on this project that will be appreciated.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-24249">
        <div id="dsq-comment-header-24249" class="dsq-comment-header">
            <cite id="dsq-cite-24249">
http://www.gtiapps.com/                <span id="dsq-author-user-24249">Gabriel Theodoropoulos</span>
            </cite>
        </div>
        <div id="dsq-comment-body-24249" class="dsq-comment-body">
            <div id="dsq-comment-message-24249" class="dsq-comment-message"><p>Hi Yaseen,</p>
<p><a href="http://www.appcoda.com/search-bar-tutorial-ios7/" rel="nofollow">Here</a> you can find a tutorial on how to add a search bar on a table view that will definitely help you out. Currently, there are other tutorials being prepared, and I&#8217;m afraid that I won&#8217;t manage to create a new project for this one quite soon. Hope it helps you.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-3" id="dsq-comment-100866">
        <div id="dsq-comment-header-100866" class="dsq-comment-header">
            <cite id="dsq-cite-100866">
                <span id="dsq-author-user-100866">mostafa</span>
            </cite>
        </div>
        <div id="dsq-comment-body-100866" class="dsq-comment-body">
            <div id="dsq-comment-message-100866" class="dsq-comment-message"><p>Hi , It was wonderful and very good tutorial. Thanks for this.</p>
<p>But I added the search bar and added some code for this. but it does not work for me. </p>
<p>Is it possible to add search module on this or another sample that have search bar and work with database?</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-21824">
        <div id="dsq-comment-header-21824" class="dsq-comment-header">
            <cite id="dsq-cite-21824">
                <span id="dsq-author-user-21824">Jeroen</span>
            </cite>
        </div>
        <div id="dsq-comment-body-21824" class="dsq-comment-body">
            <div id="dsq-comment-message-21824" class="dsq-comment-message"><p>Thanks for this nice tutorial</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-22813">
        <div id="dsq-comment-header-22813" class="dsq-comment-header">
            <cite id="dsq-cite-22813">
                <span id="dsq-author-user-22813">Alex</span>
            </cite>
        </div>
        <div id="dsq-comment-body-22813" class="dsq-comment-body">
            <div id="dsq-comment-message-22813" class="dsq-comment-message"><p>Great tutorial!! Nice starting point for working with SQL engines.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-23420">
        <div id="dsq-comment-header-23420" class="dsq-comment-header">
            <cite id="dsq-cite-23420">
http://twitter.com/ShanghaiTimes                <span id="dsq-author-user-23420">ShanghaiTimes</span>
            </cite>
        </div>
        <div id="dsq-comment-body-23420" class="dsq-comment-body">
            <div id="dsq-comment-message-23420" class="dsq-comment-message"><p>Nice tutorial. You don&#8217;t always say which file you are adding code to, and that can be a little confusing, but I worked it all out in the end, and it works nicely.<br />
Having this foundation, I can now add SQL functionality to my other projects as needed.<br />
Thanks for sharing.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-24241">
        <div id="dsq-comment-header-24241" class="dsq-comment-header">
            <cite id="dsq-cite-24241">
http://www.gtiapps.com/                <span id="dsq-author-user-24241">Gabriel Theodoropoulos</span>
            </cite>
        </div>
        <div id="dsq-comment-body-24241" class="dsq-comment-body">
            <div id="dsq-comment-message-24241" class="dsq-comment-message"><p>Hi, thanks&#8230;<br />
I&#8217;ll keep in mind to always specify with more details the files where the code should be added to, but I&#8217;m glad you found your way at the end. Keep up the good work!</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-23929">
        <div id="dsq-comment-header-23929" class="dsq-comment-header">
            <cite id="dsq-cite-23929">
                <span id="dsq-author-user-23929">Alexander</span>
            </cite>
        </div>
        <div id="dsq-comment-body-23929" class="dsq-comment-body">
            <div id="dsq-comment-message-23929" class="dsq-comment-message"><p>This is the best tutorial I&#8217;ve ever seen !!! Thank you so much !!!</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-24687">
        <div id="dsq-comment-header-24687" class="dsq-comment-header">
            <cite id="dsq-cite-24687">
                <span id="dsq-author-user-24687">Alex</span>
            </cite>
        </div>
        <div id="dsq-comment-body-24687" class="dsq-comment-body">
            <div id="dsq-comment-message-24687" class="dsq-comment-message"><p>For those who wants to use a &#8220;Disclosure indicator&#8221; instead of a &#8220;Detail disclosure&#8221; : select the Table View Cell, then the &#8220;Show the attributes inspector&#8221;, and change the &#8220;accessory&#8221; to &#8220;Disclosure indicator&#8221;. In ViewController.m, you just have to change the &#8220;accessoryButtonTappedForRowWithIndexPath&#8221; by &#8220;didSelectRowAtIndexPath&#8221;</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-29820">
        <div id="dsq-comment-header-29820" class="dsq-comment-header">
            <cite id="dsq-cite-29820">
                <span id="dsq-author-user-29820">Ash Cresswell</span>
            </cite>
        </div>
        <div id="dsq-comment-body-29820" class="dsq-comment-body">
            <div id="dsq-comment-message-29820" class="dsq-comment-message"><p>brilliant Tutorial, however just one question, as im adding it the data on either my iPhone or the emulator, its not displaying in the.sql file, should it be and if not where is it storing the information? it remains on my phone and in the emulator mind like it would if i was using CoreData</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-68006">
        <div id="dsq-comment-header-68006" class="dsq-comment-header">
            <cite id="dsq-cite-68006">
                <span id="dsq-author-user-68006">Ryan Michael</span>
            </cite>
        </div>
        <div id="dsq-comment-body-68006" class="dsq-comment-body">
            <div id="dsq-comment-message-68006" class="dsq-comment-message"><p>I too would like to know how to pass null into the query successfully.  I get a syntax error and it will not allow me to add a record (could not execute the query</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-3" id="dsq-comment-68015">
        <div id="dsq-comment-header-68015" class="dsq-comment-header">
            <cite id="dsq-cite-68015">
                <span id="dsq-author-user-68015">Ryan Michael</span>
            </cite>
        </div>
        <div id="dsq-comment-body-68015" class="dsq-comment-body">
            <div id="dsq-comment-message-68015" class="dsq-comment-message"><p>Ash&#8230;.think i figured it out.    it is an auto incremented value, therefore null is just a placeholder for the id value of the table&#8230;&#8230;&#8230;.at least that it what I am thinking because I got it too work</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-30148">
        <div id="dsq-comment-header-30148" class="dsq-comment-header">
            <cite id="dsq-cite-30148">
http://twitter.com/ShanghaiTimes                <span id="dsq-author-user-30148">ShanghaiTimes</span>
            </cite>
        </div>
        <div id="dsq-comment-body-30148" class="dsq-comment-body">
            <div id="dsq-comment-message-30148" class="dsq-comment-message"><p>Hi again. I&#8217;ve made a few changes, all working fine, except &#8230; how do I store a URL into an sqlite3 database? ie;</p>
<p><a href="http://www.isleofskyeweather.org.uk/24elgol/clientraw.txt" rel="nofollow">http://www.isleofskyeweather.org.uk/24elgol/clientraw.txt</a></p>
<p>generating, [1028:60b] unrecognized token: &#8220;:&#8221; type errors. I realise I have to escape the string .. but how?</p>
<p>I can not save a url until I can <img src="http://www.appcoda.com/wp-includes/images/smilies/simple-smile.png" alt=":-)" class="wp-smiley" style="height: 1em; max-height: 1em;" /><br />
thanks</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-31611">
        <div id="dsq-comment-header-31611" class="dsq-comment-header">
            <cite id="dsq-cite-31611">
                <span id="dsq-author-user-31611">Abdulaziz</span>
            </cite>
        </div>
        <div id="dsq-comment-body-31611" class="dsq-comment-body">
            <div id="dsq-comment-message-31611" class="dsq-comment-message"><p>hello, </p>
<p>first of all thanks a lot for this tutorial. </p>
<p>I try to understand the code, and I came a cross a statement that I don&#8217;t know the purpose of it.<br />
in the copyDatabaseIntoDocumentsDirectory method, What is the purpose of the following statement:<br />
 NSString *destinationPath = [self.documentsDirectory stringByAppendingPathComponent:self.databaseFileName];</p>
<p>doesn&#8217;t the documentsDirectory contain the path, so in the if condition we check if the documentsDirectory exists or not? </p>
<p>plz, if i&#8217;m missing something or misunderstood anything explain that for me.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="post pingback">
        <p>Pingback: <a href='http://www.zescience.com/how-to-solve-ampldquono-such-tabletable_nameamprdquo-in-sqlite3-in-ios-61232' rel='external nofollow' class='url'>how to solve &ldquo;no such table:table_name&rdquo; in sqlite3 in iOS?</a>()</p>
    </li>
    </li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-34130">
        <div id="dsq-comment-header-34130" class="dsq-comment-header">
            <cite id="dsq-cite-34130">
                <span id="dsq-author-user-34130">Esra</span>
            </cite>
        </div>
        <div id="dsq-comment-body-34130" class="dsq-comment-body">
            <div id="dsq-comment-message-34130" class="dsq-comment-message"><p>Hi, when I &#8220;Reset Content and Settings&#8221; the iOS Simulator, it doesn&#8217;t keep the data that I stored. Why is that? Thanks</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-43570">
        <div id="dsq-comment-header-43570" class="dsq-comment-header">
            <cite id="dsq-cite-43570">
http://www.gtiapps.com/                <span id="dsq-author-user-43570">Gabriel Theodoropoulos</span>
            </cite>
        </div>
        <div id="dsq-comment-body-43570" class="dsq-comment-body">
            <div id="dsq-comment-message-43570" class="dsq-comment-message"><p>Hi. That&#8217;s normal to happen, as the *Reset Content &amp; Settings&#8221; works like the formatting does on hard drives. It deletes any contents existing on the Simulator.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-3" id="dsq-comment-54441">
        <div id="dsq-comment-header-54441" class="dsq-comment-header">
            <cite id="dsq-cite-54441">
                <span id="dsq-author-user-54441">Esra</span>
            </cite>
        </div>
        <div id="dsq-comment-body-54441" class="dsq-comment-body">
            <div id="dsq-comment-message-54441" class="dsq-comment-message"><p>Thank you for reply <img src="http://www.appcoda.com/wp-includes/images/smilies/simple-smile.png" alt=":)" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-39635">
        <div id="dsq-comment-header-39635" class="dsq-comment-header">
            <cite id="dsq-cite-39635">
                <span id="dsq-author-user-39635">Miguel Angel Rodrguez</span>
            </cite>
        </div>
        <div id="dsq-comment-body-39635" class="dsq-comment-body">
            <div id="dsq-comment-message-39635" class="dsq-comment-message"><p>Hi Gabriel,</p>
<p>Excellent tutorial! Thanks for sharing.</p>
<p>When I run the app on an iPhone using iOS 7 from XCode I get the following error:</p>
<p>DB: Error Unknown when I try to save some data set. In the phone, the Save button is not working as expected since it is not closing the Edit Info VC&#8230; But, if I close the app and reopen it again the values are on the Table View.</p>
<p>Can you help us?</p>
<p>Thanks.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-47181">
        <div id="dsq-comment-header-47181" class="dsq-comment-header">
            <cite id="dsq-cite-47181">
                <span id="dsq-author-user-47181">Chris</span>
            </cite>
        </div>
        <div id="dsq-comment-body-47181" class="dsq-comment-body">
            <div id="dsq-comment-message-47181" class="dsq-comment-message"><p>Hi, </p>
<p>I had the same problem.</p>
<p>I changed the variable &#8220;executeQueryResults&#8221; to an int instead of a BOOL. That seems to have solved the problem.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-3" id="dsq-comment-61293">
        <div id="dsq-comment-header-61293" class="dsq-comment-header">
            <cite id="dsq-cite-61293">
                <span id="dsq-author-user-61293">Vikram</span>
            </cite>
        </div>
        <div id="dsq-comment-body-61293" class="dsq-comment-body">
            <div id="dsq-comment-message-61293" class="dsq-comment-message"><p>Thanks a lot. Had almost given up. Works fine now</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even depth-3" id="dsq-comment-99129">
        <div id="dsq-comment-header-99129" class="dsq-comment-header">
            <cite id="dsq-cite-99129">
                <span id="dsq-author-user-99129">Stacey</span>
            </cite>
        </div>
        <div id="dsq-comment-body-99129" class="dsq-comment-body">
            <div id="dsq-comment-message-99129" class="dsq-comment-message"><p>Thanks, same thing was happening with me as well.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="post pingback">
        <p>Pingback: <a href='http://peppermintgraphics.com/blogs/?p=8' rel='external nofollow' class='url'>iPhone Interview Questions | iBlogs</a>()</p>
    </li>
    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-47981">
        <div id="dsq-comment-header-47981" class="dsq-comment-header">
            <cite id="dsq-cite-47981">
                <span id="dsq-author-user-47981">Vakas</span>
            </cite>
        </div>
        <div id="dsq-comment-body-47981" class="dsq-comment-body">
            <div id="dsq-comment-message-47981" class="dsq-comment-message"><p>I have an existing sqlite3 database. I want to use it in my iOS app. I have configured it successfully to use in my app. It saves whatever I want to save from the app but doesn&#8217;t read the data entries already present in the that database. What&#8217;s wrong here?<br />
Also the data doesn&#8217;t appear which is added by iOS app when I retrieve using terminal or any other tool but inside application it reads those records.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-63246">
        <div id="dsq-comment-header-63246" class="dsq-comment-header">
            <cite id="dsq-cite-63246">
                <span id="dsq-author-user-63246">Matty G.</span>
            </cite>
        </div>
        <div id="dsq-comment-body-63246" class="dsq-comment-body">
            <div id="dsq-comment-message-63246" class="dsq-comment-message"><p>Fantastic tutorial! I feel it has given me a strong, solid grounding in using sqlite databases in future apps. Thanks for writing such a thorough and detailed tutorial, it&#8217;s very much appreciated!</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-64273">
        <div id="dsq-comment-header-64273" class="dsq-comment-header">
            <cite id="dsq-cite-64273">
                <span id="dsq-author-user-64273">TechUser2011</span>
            </cite>
        </div>
        <div id="dsq-comment-body-64273" class="dsq-comment-body">
            <div id="dsq-comment-message-64273" class="dsq-comment-message"><p>In the DBManager class, are all the data fields kept as NSString? For example, in your database you have an integer field for the person&#8217;s age. Is this field kept as a string? And if we are reading from the table, we would have to convert the NSString back to integer to use its int value, right?</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-66390">
        <div id="dsq-comment-header-66390" class="dsq-comment-header">
            <cite id="dsq-cite-66390">
                <span id="dsq-author-user-66390">velociround</span>
            </cite>
        </div>
        <div id="dsq-comment-body-66390" class="dsq-comment-body">
            <div id="dsq-comment-message-66390" class="dsq-comment-message"><p>Great tutorial! Thank you very, very much!</p>
<p>There&#8217;s just a problem I found with the downloadable project.</p>
<p>BOOL executeQueryResults = sqlite3_step(compiledStatement);<br />
if (executeQueryResults == SQLITE_DONE) {<br />
// code<br />
} else {<br />
// error code<br />
}</p>
<p>Comparison of constant with bool is always false. You should change to int, NSInteger or whatever, otherwise SQLite will insert the data, but your code will always think there&#8217;s an error.<br />
int executeQueryResults = sqlite3_step(compiledStatement);</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-72775">
        <div id="dsq-comment-header-72775" class="dsq-comment-header">
            <cite id="dsq-cite-72775">
                <span id="dsq-author-user-72775">Ted</span>
            </cite>
        </div>
        <div id="dsq-comment-body-72775" class="dsq-comment-body">
            <div id="dsq-comment-message-72775" class="dsq-comment-message"><p>THIS IS HUGE. My code on iPhone 6 was failing because of this. Thank you for noticing! The author should update his code ASAP</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even depth-2" id="dsq-comment-77299">
        <div id="dsq-comment-header-77299" class="dsq-comment-header">
            <cite id="dsq-cite-77299">
                <span id="dsq-author-user-77299">Joey</span>
            </cite>
        </div>
        <div id="dsq-comment-body-77299" class="dsq-comment-body">
            <div id="dsq-comment-message-77299" class="dsq-comment-message"><p>Very important remark there! Please integrate in this otherwise awesome tutorial!</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt depth-2" id="dsq-comment-90814">
        <div id="dsq-comment-header-90814" class="dsq-comment-header">
            <cite id="dsq-cite-90814">
                <span id="dsq-author-user-90814">matogus</span>
            </cite>
        </div>
        <div id="dsq-comment-body-90814" class="dsq-comment-body">
            <div id="dsq-comment-message-90814" class="dsq-comment-message"><p>But. you can run on iOS 7.1</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even depth-2" id="dsq-comment-101117">
        <div id="dsq-comment-header-101117" class="dsq-comment-header">
            <cite id="dsq-cite-101117">
                <span id="dsq-author-user-101117">Ben</span>
            </cite>
        </div>
        <div id="dsq-comment-body-101117" class="dsq-comment-body">
            <div id="dsq-comment-message-101117" class="dsq-comment-message"><p>I found this as well. Got round it by getting rid of the BOOL execute.. line and making the the if statement directly if(sqlite3_step(compiledStatement) == SQLITE_DONE){..</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt depth-2" id="dsq-comment-101184">
        <div id="dsq-comment-header-101184" class="dsq-comment-header">
            <cite id="dsq-cite-101184">
                <span id="dsq-author-user-101184"></span>
            </cite>
        </div>
        <div id="dsq-comment-body-101184" class="dsq-comment-body">
            <div id="dsq-comment-message-101184" class="dsq-comment-message"><p>Please author update this code! This BUG take me so much time, <img src="http://www.appcoda.com/wp-includes/images/smilies/frownie.png" alt=":(" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-70283">
        <div id="dsq-comment-header-70283" class="dsq-comment-header">
            <cite id="dsq-cite-70283">
                <span id="dsq-author-user-70283">Dwight</span>
            </cite>
        </div>
        <div id="dsq-comment-body-70283" class="dsq-comment-body">
            <div id="dsq-comment-message-70283" class="dsq-comment-message"><p>I tried this tutorial, but I got a uncaught expression:<br />
__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array</p>
<p>how can I fix this?</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-70739">
        <div id="dsq-comment-header-70739" class="dsq-comment-header">
            <cite id="dsq-cite-70739">
                <span id="dsq-author-user-70739">Dwight</span>
            </cite>
        </div>
        <div id="dsq-comment-body-70739" class="dsq-comment-body">
            <div id="dsq-comment-message-70739" class="dsq-comment-message"><p>Nvm Fixed it ^^;</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-3" id="dsq-comment-94509">
        <div id="dsq-comment-header-94509" class="dsq-comment-header">
            <cite id="dsq-cite-94509">
                <span id="dsq-author-user-94509">Eric</span>
            </cite>
        </div>
        <div id="dsq-comment-body-94509" class="dsq-comment-body">
            <div id="dsq-comment-message-94509" class="dsq-comment-message"><p>how did you fix this? I&#8217;m getting this too</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt depth-3" id="dsq-comment-96156">
        <div id="dsq-comment-header-96156" class="dsq-comment-header">
            <cite id="dsq-cite-96156">
                <span id="dsq-author-user-96156">Amir Ashamalla</span>
            </cite>
        </div>
        <div id="dsq-comment-body-96156" class="dsq-comment-body">
            <div id="dsq-comment-message-96156" class="dsq-comment-message"><p>How did you fix it????? i had to put a record with id=0 but then all my edits are to that exact record could never retrieve any other record</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-70535">
        <div id="dsq-comment-header-70535" class="dsq-comment-header">
            <cite id="dsq-cite-70535">
                <span id="dsq-author-user-70535">Carlos</span>
            </cite>
        </div>
        <div id="dsq-comment-body-70535" class="dsq-comment-body">
            <div id="dsq-comment-message-70535" class="dsq-comment-message"><p>Sorry, but I had a few problems putting the code together, I keep getting messages of missing identifiers, for example: -(void)copyDatabaseIntoDocumentsDirectory{<br />
    // Check if the database file exists in the documents directory.<br />
    NSString *destinationPath = [self.documentsDirectory stringByAppendingPathComponent:self.databaseFilename];<br />
    if (![[NSFileManager defaultManager] fileExistsAtPath:destinationPath]) {<br />
        // The database file does not exist in the documents directory, so copy it from the main bundle now.<br />
        NSString *sourcePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:self.databaseFilename];<br />
        NSError *error;<br />
        [[NSFileManager defaultManager] copyItemAtPath:sourcePath toPath:destinationPath error:&amp;error];</p>
<p>It says I need a semi colon before the bracket and after I add it, it then says that I need to declare an identifier or use a parenthesis. Can anybody tell me if I&#8217;m missing something?</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-75070">
        <div id="dsq-comment-header-75070" class="dsq-comment-header">
            <cite id="dsq-cite-75070">
                <span id="dsq-author-user-75070">orit</span>
            </cite>
        </div>
        <div id="dsq-comment-body-75070" class="dsq-comment-body">
            <div id="dsq-comment-message-75070" class="dsq-comment-message"><p>How can I import SQLite files to swift? I don&#8217;t want to work on the built-in SQL. Is there any recommended guide?</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-81477">
        <div id="dsq-comment-header-81477" class="dsq-comment-header">
            <cite id="dsq-cite-81477">
                <span id="dsq-author-user-81477">Domingo Figueroa</span>
            </cite>
        </div>
        <div id="dsq-comment-body-81477" class="dsq-comment-body">
            <div id="dsq-comment-message-81477" class="dsq-comment-message"><p>Muchas gracias por tu gran aporte.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="post pingback">
        <p>Pingback: <a href='http://www.upcexpress.com/sqlite-error-codes-ios.htm' rel='external nofollow' class='url'>Fix Sqlite Error Codes Ios Windows XP, Vista, 7, 8 [Solved]</a>()</p>
    </li>
    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-87421">
        <div id="dsq-comment-header-87421" class="dsq-comment-header">
            <cite id="dsq-cite-87421">
                <span id="dsq-author-user-87421">Abhijeet Gite</span>
            </cite>
        </div>
        <div id="dsq-comment-body-87421" class="dsq-comment-body">
            <div id="dsq-comment-message-87421" class="dsq-comment-message"><p>Please provide the sample code in SWIFT. Need urgently.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-87446">
        <div id="dsq-comment-header-87446" class="dsq-comment-header">
            <cite id="dsq-cite-87446">
                <span id="dsq-author-user-87446">dani</span>
            </cite>
        </div>
        <div id="dsq-comment-body-87446" class="dsq-comment-body">
            <div id="dsq-comment-message-87446" class="dsq-comment-message"><p>I need it too&#8230;.thanks</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-3" id="dsq-comment-89271">
        <div id="dsq-comment-header-89271" class="dsq-comment-header">
            <cite id="dsq-cite-89271">
                <span id="dsq-author-user-89271">Abhijeet Gite</span>
            </cite>
        </div>
        <div id="dsq-comment-body-89271" class="dsq-comment-body">
            <div id="dsq-comment-message-89271" class="dsq-comment-message"><p>Please check following link. FMDB can be used<br />
<a href="http://www.theappguruz.com/tutorial/use-sqlite-database-swift/" rel="nofollow">http://www.theappguruz.com/tutorial/use-sqlite-database-swift/</a></p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-87782">
        <div id="dsq-comment-header-87782" class="dsq-comment-header">
            <cite id="dsq-cite-87782">
                <span id="dsq-author-user-87782">najoua mahi</span>
            </cite>
        </div>
        <div id="dsq-comment-body-87782" class="dsq-comment-body">
            <div id="dsq-comment-message-87782" class="dsq-comment-message"><p>Very Very Very interesting tutorial, well explained and rich of informations. Thank you so much <img src="http://www.appcoda.com/wp-includes/images/smilies/simple-smile.png" alt=":)" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-90354">
        <div id="dsq-comment-header-90354" class="dsq-comment-header">
            <cite id="dsq-cite-90354">
                <span id="dsq-author-user-90354">evian</span>
            </cite>
        </div>
        <div id="dsq-comment-body-90354" class="dsq-comment-body">
            <div id="dsq-comment-message-90354" class="dsq-comment-message"><p>Great tutorialjust wondering why you don&#8217;t choose to use Core Data?</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-94502">
        <div id="dsq-comment-header-94502" class="dsq-comment-header">
            <cite id="dsq-cite-94502">
                <span id="dsq-author-user-94502">Ashley</span>
            </cite>
        </div>
        <div id="dsq-comment-body-94502" class="dsq-comment-body">
            <div id="dsq-comment-message-94502" class="dsq-comment-message"><p>Amazing Tutorial! Very well written and a fantastic treasure trove of information for someone starting out with DBs in iOS apps.  Thank you very much!! Loved it.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-95192">
        <div id="dsq-comment-header-95192" class="dsq-comment-header">
            <cite id="dsq-cite-95192">
                <span id="dsq-author-user-95192">shyam</span>
            </cite>
        </div>
        <div id="dsq-comment-body-95192" class="dsq-comment-body">
            <div id="dsq-comment-message-95192" class="dsq-comment-message"><p>First of all thanks Gabriel for this helpful article.<br />
I am new to IOS development. I have integrated your solution into my project. I have created an sqlite db and added it to my project. But i am facing an issue in copyDatabaseIntoDocumentsDirectory method. Database is not getting copied and it always return following error:<br />
The operation couldn&#8217;t be completed. (Cocoa error 4.)</p>
<p>Can you please help to sort it out.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-96157">
        <div id="dsq-comment-header-96157" class="dsq-comment-header">
            <cite id="dsq-cite-96157">
                <span id="dsq-author-user-96157">Amir Ashamalla</span>
            </cite>
        </div>
        <div id="dsq-comment-body-96157" class="dsq-comment-body">
            <div id="dsq-comment-message-96157" class="dsq-comment-message"><p>all my edits are to a single  record (id=0)could never retrieve any other record; i checked and the recordtoedit is always 0???? please help</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-99021">
        <div id="dsq-comment-header-99021" class="dsq-comment-header">
            <cite id="dsq-cite-99021">
                <span id="dsq-author-user-99021">sagar vaholiya</span>
            </cite>
        </div>
        <div id="dsq-comment-body-99021" class="dsq-comment-body">
            <div id="dsq-comment-message-99021" class="dsq-comment-message"><p>#import &#8220;TableViewController.h&#8221;<br />
#import &#8220;DBManager.h&#8221;<br />
#import </p>
<p>@interface TableViewController ()<br />
@property (nonatomic, strong) NSArray *dataInfo;<br />
@property (nonatomic,strong) DBManager *dbManager;</p>
<p>@end</p>
<p>@implementation TableViewController</p>
<p>&#8211; (void)viewDidLoad {<br />
    [super viewDidLoad];<br />
   // [self openDB];<br />
    self.tableView.delegate = self;<br />
    self.tableView.dataSource = self;</p>
<p>    self.dbManager = [[DBManager alloc] initWithDatabaseFilename:@&#8221;db_tableview.db&#8221;];</p>
<p>    NSString *query = @&#8221;select name,age from data&#8221;;</p>
<p>    if(self.dataInfo != nil)<br />
        self.dataInfo = nil;</p>
<p>    self.dataInfo = [[NSArray alloc] initWithArray:[self.dbManager loadDataFromDB:query]];<br />
     NSLog(@&#8221;%@&#8221;,self.dataInfo);</p>
<p>    [self.tableView reloadData];</p>
<p>}</p>
<p>//tableView methods</p>
<p>-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section<br />
{<br />
    return self.dataInfo.count;<br />
}</p>
<p>-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView<br />
{<br />
    return 1;<br />
}</p>
<p>-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath<br />
{<br />
    static NSString *cellidentifier = @&#8221;cell&#8221;;<br />
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellidentifier forIndexPath:indexPath];<br />
    NSInteger name  = [self.dbManager.arrColumnNames indexOfObject:@&#8221;name&#8221;];<br />
    NSInteger age = [self.dbManager.arrColumnNames indexOfObject:@&#8221;age&#8221;];</p>
<p>    if (cell == nil)<br />
    {<br />
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellidentifier];<br />
        [cell setSelectionStyle:UITableViewCellSelectionStyleBlue];<br />
        [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];<br />
    }<br />
    cell.textLabel.text = [NSString stringWithFormat:@&#8221;%@&#8221;,[[self.dataInfo objectAtIndex:indexPath.row] objectAtIndex:name]];<br />
   // cell.textLabel.text = @&#8221;this is text label&#8221;;<br />
     NSLog(@&#8221;Name is: %@&#8221;,cell.textLabel.text);<br />
  //  cell.detailTextLabel.text = @&#8221;This is detail label&#8221;;<br />
    cell.detailTextLabel.text =[NSString stringWithFormat:@&#8221;%@&#8221;,[[self.dataInfo objectAtIndex:indexPath.row] objectAtIndex:age]];<br />
    NSLog(@&#8221;Age is: %@&#8221;,cell.detailTextLabel.text);<br />
    return cell;<br />
}<br />
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{<br />
    return 60.0;</p>
<p>}</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-99022">
        <div id="dsq-comment-header-99022" class="dsq-comment-header">
            <cite id="dsq-cite-99022">
                <span id="dsq-author-user-99022">sagar</span>
            </cite>
        </div>
        <div id="dsq-comment-body-99022" class="dsq-comment-body">
            <div id="dsq-comment-message-99022" class="dsq-comment-message"><p>error while fetch value of &#8220;age&#8221; field from an array&#8230;.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-99449">
        <div id="dsq-comment-header-99449" class="dsq-comment-header">
            <cite id="dsq-cite-99449">
                <span id="dsq-author-user-99449">wgiesel</span>
            </cite>
        </div>
        <div id="dsq-comment-body-99449" class="dsq-comment-body">
            <div id="dsq-comment-message-99449" class="dsq-comment-message"><p>Hello,</p>
<p>This is working great in my little project. But once database is written in the document folder it won&#8217;t be overwritten when you ship an update with a newer database.<br />
Is there any way to improve DBmanager Class with a version control for Database.<br />
Thanks in advance.<br />
Wolfgang</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-99504">
        <div id="dsq-comment-header-99504" class="dsq-comment-header">
            <cite id="dsq-cite-99504">
                <span id="dsq-author-user-99504">Vishnu</span>
            </cite>
        </div>
        <div id="dsq-comment-body-99504" class="dsq-comment-body">
            <div id="dsq-comment-message-99504" class="dsq-comment-message"><p>Hi,In this case of creating sqlite file by coding directly does result in creation of sqlite file in the bundle of the project file? please help</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-99652">
        <div id="dsq-comment-header-99652" class="dsq-comment-header">
            <cite id="dsq-cite-99652">
                <span id="dsq-author-user-99652">iCoderOnline</span>
            </cite>
        </div>
        <div id="dsq-comment-body-99652" class="dsq-comment-body">
            <div id="dsq-comment-message-99652" class="dsq-comment-message"><p>Thanks for this sample project. Got a question tough, is there a way to show the last updated/added insert first in the tableview instead of last? Thanks in advance.</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-100097">
        <div id="dsq-comment-header-100097" class="dsq-comment-header">
            <cite id="dsq-cite-100097">
                <span id="dsq-author-user-100097">hj</span>
            </cite>
        </div>
        <div id="dsq-comment-body-100097" class="dsq-comment-body">
            <div id="dsq-comment-message-100097" class="dsq-comment-message"><p>If I have an app where I made purchases like ringtones and photos, can I extract the these audio and picture files using this?</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="post pingback">
        <p>Pingback: <a href='http://www.rmsmobilegame.com/how-to-create-ios-apps/' rel='external nofollow' class='url'>How To Create Ios Apps | RMS</a>()</p>
    </li>
    </li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-100361">
        <div id="dsq-comment-header-100361" class="dsq-comment-header">
            <cite id="dsq-cite-100361">
                <span id="dsq-author-user-100361">veeru</span>
            </cite>
        </div>
        <div id="dsq-comment-body-100361" class="dsq-comment-body">
            <div id="dsq-comment-message-100361" class="dsq-comment-message"><p>Awesome article &#8211; I am a newbie in programming and I could understand a major part of the project. However when I tried to implement this with a custom data then I am getting duplicate data &#8211; duplicate data count = number of columns in the data.<br />
I understand that array count was total number of elements, what I don&#8217;t understand is why tableView cellForRowAtIndexPath is called as many times as the count and not based on the index of the database. when I delete though, it deletes all the rows of that specific data along with duplicates. </p>
<p>Plz help me out.</p>
<p>-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{<br />
//   NSLog(@&#8221;arrTestInfoCount is %lu&#8221;,(unsigned long)self.arrTestInfo.count);<br />
return self.arrTestInfo.count;<br />
}</p>
<p>-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView{<br />
return 1;<br />
}</p>
<p>-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{<br />
return 60.0;<br />
}</p>
<p>-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{<br />
static NSString *cellIdentifier = @&#8221;idCellRecord&#8221;;<br />
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];<br />
if(cell == nil){<br />
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];<br />
}<br />
//   NSLog(@&#8221;Creating a new cell&#8221;);<br />
//set the loaded data to the appropriate cell labels<br />
cell.textLabel.text = [NSString stringWithFormat:@&#8221;%@          %@&#8221;,[[self.arrTestInfo objectAtIndex:indexPath.row] objectAtIndex:0],[[self.arrTestInfo objectAtIndex:indexPath.row] objectAtIndex:1]];</p>
<p>    cell.detailTextLabel.text = [NSString stringWithFormat:@&#8221;time: %@&#8221;,[[self.arrTestInfo objectAtIndex:indexPath.row] objectAtIndex:2]];</p>
<p>    return cell;<br />
}</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-100364">
        <div id="dsq-comment-header-100364" class="dsq-comment-header">
            <cite id="dsq-cite-100364">
                <span id="dsq-author-user-100364">veeru</span>
            </cite>
        </div>
        <div id="dsq-comment-body-100364" class="dsq-comment-body">
            <div id="dsq-comment-message-100364" class="dsq-comment-message"><p>Never mind, my DBManager.m had an error. Imported the class files and it worked :). thank you so much for this awesome tutorial and source code.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-100402">
        <div id="dsq-comment-header-100402" class="dsq-comment-header">
            <cite id="dsq-cite-100402">
                <span id="dsq-author-user-100402">Rajneesh Gosai</span>
            </cite>
        </div>
        <div id="dsq-comment-body-100402" class="dsq-comment-body">
            <div id="dsq-comment-message-100402" class="dsq-comment-message"><p>i have error in line :</p>
<p>self.dbManager = [[DBManager alloc] initWithDatabseFileName:@&#8221;sample.sql&#8221;];</p>
<p>No visible @interface for &#8216;DBManager&#8217; declares the selector &#8216;initWithDatabaseFilename&#8217;</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="post pingback">
        <p>Pingback: <a href='http://fatal-errors.com/adding-rows-to-a-table-in-sqlite-table-using-objective-c/402556' rel='external nofollow' class='url'>Adding rows to a table in sqlite table using objective c | Solutions for enthusiast and professional programmers</a>()</p>
    </li>
    </li><!-- #comment-## -->
            </ul>


        </div>

    </div>

<script type="text/javascript">
var disqus_url = 'http://www.appcoda.com/sqlite-database-ios-app-tutorial/';
var disqus_identifier = '3778 http://www.appcoda.com/?p=3778';
var disqus_container_id = 'disqus_thread';
var disqus_shortname = 'appcoda';
var disqus_title = "How to Use SQLite to Manage Data in iOS Apps";
var disqus_config_custom = window.disqus_config;
var disqus_config = function () {
    /*
    All currently supported events:
    onReady: fires when everything is ready,
    onNewComment: fires when a new comment is posted,
    onIdentify: fires when user is authenticated
    */
    
    
    this.language = '';
        this.callbacks.onReady.push(function () {

        // sync comments in the background so we don't block the page
        var script = document.createElement('script');
        script.async = true;
        script.src = '?cf_action=sync_comments&post_id=3778';

        var firstScript = document.getElementsByTagName('script')[0];
        firstScript.parentNode.insertBefore(script, firstScript);
    });
    
    if (disqus_config_custom) {
        disqus_config_custom.call(this);
    }
};

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>

</div><div id="sidebar" class="sidebar widget-area"><div id="search-4" class="widget widget_search"><div class="widget-wrap"><form role="search" method="get" id="searchform" class="searchform" action="http://www.appcoda.com/" >
                    <div><label class="screen-reader-text" for="s">Search for:</label>
                    <input type="text" value="" name="s" id="s" />
                    <input type="submit" id="searchsubmit" value="Search" />
                    </div>
                    </form></div></div>
<div id="text-2" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Sign Up for Our Free Tutorials</h4>
			<div class="textwidget"><div class="enews"><form action="http://sendy.appcoda.com/sendy/subscribe" method="post" id="subscribe" name="mc-embedded-subscribe-form" class="validate" target="_blank" accept-charset="utf-8">
	<input type="email" id="subbox" value="" name="email" class="email" id="mce-EMAIL" placeholder="Enter your email address" required><input type="submit" value="Subscribe" name="subscribe" id="subbutton" class="button">
	<input type="hidden" name="list" value="KEdC8BeT8EC8znOnfjSQAw"/>
</form>
</div></div>
		</div></div>
<div id="text-6" class="widget widget_text"><div class="widget-wrap">			<div class="textwidget"><!-- BuySellAds Zone Code -->
<div id="bsap_1283996" class="bsarocks bsap_459a84cf8fa0d5ea9dccfcfd1c3531e0"></div>
<!-- End BuySellAds Zone Code --></div>
		</div></div>
<div id="text-4" class="widget widget_text"><div class="widget-wrap">			<div class="textwidget"><div class="fb-like-box" data-href="http://www.facebook.com/appcodamobile" data-width="300" data-height="260" data-show-faces="true" data-border-color="#F1F1F1" data-stream="false" data-header="false"></div></div>
		</div></div>
		<div id="recent-posts-3" class="widget widget_recent_entries"><div class="widget-wrap">		<h4 class="widget-title widgettitle">Recent Posts</h4>
		<ul>
					<li>
				<a href="http://www.appcoda.com/react-native-introduction/">Introduction to React Native: Building iOS Apps with JavaScript</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/cloudkit-introduction-tutorial/">Working with CloudKit in iOS 8</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/instagram-app-parse-swift/">Building an Instagram-Like App with Parse and Swift</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/google-maps-api-tutorial/">A Swift Tutorial for Google Maps SDK</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/ios8-share-extension-swift/">Building a Simple Share Extension in iOS 8 App</a>
						</li>
				</ul>
		</div></div>
<div id="wp_insert_ad_widget-3" class="widget widget_wp_insert_ad_widget"><div class="widget-wrap"><div class="wpInsert wpInsertAdWidget" style="margin: 5px; padding: 0px;"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Premium Large Skyscraper -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:600px"
     data-ad-client="ca-pub-8501671653071605"
     data-ad-slot="6120307730"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></div></div>
<div id="nav_menu-3" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Connect With Us</h4>
<div class="menu-sidebar-container"><ul id="menu-sidebar" class="menu"><li id="menu-item-57" class="social-twitter menu-item menu-item-type-custom menu-item-object-custom menu-item-57"><a href="http://twitter.com/appcodamobile">Twitter</a></li>
<li id="menu-item-58" class="social-facebook menu-item menu-item-type-custom menu-item-object-custom menu-item-58"><a href="http://facebook.com/appcodamobile">Facebook</a></li>
<li id="menu-item-59" class="social-rss menu-item menu-item-type-custom menu-item-object-custom menu-item-59"><a href="http://feeds.feedburner.com/appcoda">RSS</a></li>
<li id="menu-item-68" class="social-plus menu-item menu-item-type-custom menu-item-object-custom menu-item-68"><a href="https://plus.google.com/b/118438564257465271998/">Google Plus</a></li>
</ul></div></div></div>
</div></div></div></div><div id="footer-widgets" class="footer-widgets"><div class="wrap"><div class="footer-widgets-1 widget-area"><div id="nav_menu-4" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">About AppCoda</h4>
<div class="menu-default-container"><ul id="menu-default-1" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a href="http://www.appcoda.com/about/">About</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-28"><a href="http://www.appcoda.com/tutorials/">Tutorials</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-530"><a href="http://www.appcoda.com/ios-programming-course/">Course</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3045"><a title="Swift Programming Book for iOS 8" href="http://www.appcoda.com/swift">Book</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2140"><a href="http://www.appcoda.com/ios-app-kit/ios-game-kit.html">Game Kit</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-710"><a href="http://www.appcoda.com/marketplace/">Marketplace</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-34"><a href="http://www.appcoda.com/contact/">Contact</a></li>
</ul></div></div></div>
</div><div class="footer-widgets-2 widget-area"><div id="text-9" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Get Our New Book</h4>
			<div class="textwidget"><a href="http://www.appcoda.com/swift/"><img src="http://www.appcoda.com/wp-content/uploads/2014/10/swift-book-cover-227x300.png" alt="Beginning iOS 8 Programming with Swift" class="alignleft size-medium wp-image-4153" /></a></div>
		</div></div>
</div><div class="footer-widgets-3 widget-area"><div id="nav_menu-5" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Connect With Us</h4>
<div class="menu-sidebar-container"><ul id="menu-sidebar-1" class="menu"><li class="social-twitter menu-item menu-item-type-custom menu-item-object-custom menu-item-57"><a href="http://twitter.com/appcodamobile">Twitter</a></li>
<li class="social-facebook menu-item menu-item-type-custom menu-item-object-custom menu-item-58"><a href="http://facebook.com/appcodamobile">Facebook</a></li>
<li class="social-rss menu-item menu-item-type-custom menu-item-object-custom menu-item-59"><a href="http://feeds.feedburner.com/appcoda">RSS</a></li>
<li class="social-plus menu-item menu-item-type-custom menu-item-object-custom menu-item-68"><a href="https://plus.google.com/b/118438564257465271998/">Google Plus</a></li>
</ul></div></div></div>
<div id="text-3" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Email Newsletter</h4>
			<div class="textwidget"><p>Sign up to receive free tutorial and
to hear what's going on with AppCoda!</p>
<div class="enews"><form action="http://sendy.appcoda.com/sendy/subscribe" method="post" id="subscribe" name="mc-embedded-subscribe-form" class="validate" target="_blank" accept-charset="utf-8">
	<input type="email" id="subbox" value="" name="email" class="email" id="mce-EMAIL" placeholder="Enter your email address" required><input type="submit" value="Subscribe" name="subscribe" id="subbutton" class="button">
	<input type="hidden" name="list" value="KEdC8BeT8EC8znOnfjSQAw"/>
</form>
</div></div>
		</div></div>
</div></div></div><div id="footer" class="footer"><div class="wrap">    <p>&copy; Copyright 2015 <a href="http://appcoda.com/">AppCoda</a> &middot; All Rights Reserved &middot; Powered by <a href="http://wordpress.org/">WordPress &middot; <a href="http://www.appcoda.com/privacy-policy">Privacy Policy</a> &middot; <a href="http://www.appcoda.com/terms-of-service/">Terms of Service</a></p>
    </div></div></div><!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
<script src="/prismjs/prism.js"></script>        <script type="text/javascript">
        // <![CDATA[
        var disqus_shortname = 'appcoda';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('data-dsqidentifier'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) { url = url[0]; }
                    else { url = url[1]; }
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script'); 
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        // ]]>
        </script>
                    <!-- Version: 0.3.3 -->
            <script type="text/javascript">
                var EjSocialSlideoutJsApi_Settings =
                {
                    SliderImage: "<img width=\"150\" height=\"150\" src=\"http:\/\/www.appcoda.com\/wp-content\/uploads\/2015\/04\/appcoda-300-150x150.png\" class=\"attachment-thumbnail\" alt=\"appcoda-300\" \/>",
                    SocialProfiles: {"Facebook":{"Name":"Facebook","NetworkId":"Facebook","IsActive":true,"Id":"appcodamobile","Title":"Follow Us on Facebook","Description":"And get free tutorial updates"},"Twitter":{"Name":"Twitter","NetworkId":"Twitter","IsActive":true,"Id":"appcodamobile","Title":"Follow Us on Twitter","Description":"And get free tutorial updates"}},
                    Preview: false
                                    };

                if (typeof (EjSocialSlideoutJsApi) !== "undefined")
                    EjSocialSlideoutJsApi.SettingsLoaded(EjSocialSlideoutJsApi_Settings);
            </script>
            <div id='ej-ss-slideout-dom-templates' style='display:none'><div id='ej-ss-slideout-dom-template-facebook'><div class='fb-follow' data-href='https://www.facebook.com/appcodamobile' data-width='210' data-colorscheme='light' data-layout='standard' data-show-faces='true'></div></div><div id='ej-ss-slideout-dom-template-twitter'><a href='https://twitter.com/appcodamobile' class='twitter-follow-button' data-show-count='true' data-size='medium'>Follow @appcodamobile</a></div></div><div class="et_social_sidebar_networks et_social_visible_sidebar et_social_slideright et_social_animated et_social_rectangle et_social_sidebar_flip et_social_sidebar_withcounts et_social_withtotalcount et_social_mobile_off">
					<div class="et_social_totalcount et_social_dark">
							<span class="et_social_totalcount_count et_social_total_share" data-post_id="3778"></span>
							<span class="et_social_totalcount_label">Shares</span>
						</div>
					<ul class="et_social_icons_container"><li class="et_social_facebook">
									<a href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.appcoda.com%2Fsqlite-database-ios-app-tutorial%2F&#038;t=How%20to%20Use%20SQLite%20to%20Manage%20Data%20in%20iOS%20Apps" class="et_social_share" rel="nofollow" data-social_name="facebook" data-post_id="3778" data-social_type="share">
										<i class="et_social_icon et_social_icon_facebook"></i>
										
										<div class="et_social_count"><span>129</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li><li class="et_social_twitter">
									<a href="http://twitter.com/share?text=How%20to%20Use%20SQLite%20to%20Manage%20Data%20in%20iOS%20Apps&#038;url=http%3A%2F%2Fwww.appcoda.com%2Fsqlite-database-ios-app-tutorial%2F&#038;via=appcodamobile" class="et_social_share" rel="nofollow" data-social_name="twitter" data-post_id="3778" data-social_type="share">
										<i class="et_social_icon et_social_icon_twitter"></i>
										
										<div class="et_social_count"><span>22</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li><li class="et_social_googleplus">
									<a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.appcoda.com%2Fsqlite-database-ios-app-tutorial%2F&#038;t=How%20to%20Use%20SQLite%20to%20Manage%20Data%20in%20iOS%20Apps" class="et_social_share" rel="nofollow" data-social_name="googleplus" data-post_id="3778" data-social_type="share">
										<i class="et_social_icon et_social_icon_googleplus"></i>
										
										<div class="et_social_count"><span>17</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li><li class="et_social_linkedin">
									<a href="http://www.linkedin.com/shareArticle?mini=true&#038;url=http%3A%2F%2Fwww.appcoda.com%2Fsqlite-database-ios-app-tutorial%2F&#038;title=How%20to%20Use%20SQLite%20to%20Manage%20Data%20in%20iOS%20Apps" class="et_social_share" rel="nofollow" data-social_name="linkedin" data-post_id="3778" data-social_type="share">
										<i class="et_social_icon et_social_icon_linkedin"></i>
										
										<div class="et_social_count"><span>21</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li></ul>
					<span class="et_social_hide_sidebar et_social_icon"></span>
				</div><div class="et_social_flyin et_social_resize et_social_flyin_bottom_right et_social_slideup et_social_trigger_bottom et_social_mobile_on">
					<a href="#" class="et_social_icon et_social_icon_cancel"></a>
					<div class="et_social_header">
						<h3>Share This</h3>
						<p>Share this post with your friends!</p>
					</div>
					<div class="et_social_networks et_social_2col et_social_slide et_social_rectangle et_social_left et_social_withnetworknames">
						
						<ul class="et_social_icons_container"><li class="et_social_facebook"><a href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.appcoda.com%2Fsqlite-database-ios-app-tutorial%2F&#038;t=How%20to%20Use%20SQLite%20to%20Manage%20Data%20in%20iOS%20Apps" class="et_social_share" rel="nofollow" data-social_name="facebook" data-post_id="3778" data-social_type="share"><i class="et_social_icon et_social_icon_facebook"></i><div class="et_social_network_label"><div class="et_social_networkname">Facebook</div></div><span class="et_social_overlay"></span></a></li><li class="et_social_twitter"><a href="http://twitter.com/share?text=How%20to%20Use%20SQLite%20to%20Manage%20Data%20in%20iOS%20Apps&#038;url=http%3A%2F%2Fwww.appcoda.com%2Fsqlite-database-ios-app-tutorial%2F&#038;via=appcodamobile" class="et_social_share" rel="nofollow" data-social_name="twitter" data-post_id="3778" data-social_type="share"><i class="et_social_icon et_social_icon_twitter"></i><div class="et_social_network_label"><div class="et_social_networkname">Twitter</div></div><span class="et_social_overlay"></span></a></li><li class="et_social_googleplus"><a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.appcoda.com%2Fsqlite-database-ios-app-tutorial%2F&#038;t=How%20to%20Use%20SQLite%20to%20Manage%20Data%20in%20iOS%20Apps" class="et_social_share" rel="nofollow" data-social_name="googleplus" data-post_id="3778" data-social_type="share"><i class="et_social_icon et_social_icon_googleplus"></i><div class="et_social_network_label"><div class="et_social_networkname">Google+</div></div><span class="et_social_overlay"></span></a></li><li class="et_social_linkedin"><a href="http://www.linkedin.com/shareArticle?mini=true&#038;url=http%3A%2F%2Fwww.appcoda.com%2Fsqlite-database-ios-app-tutorial%2F&#038;title=How%20to%20Use%20SQLite%20to%20Manage%20Data%20in%20iOS%20Apps" class="et_social_share" rel="nofollow" data-social_name="linkedin" data-post_id="3778" data-social_type="share"><i class="et_social_icon et_social_icon_linkedin"></i><div class="et_social_network_label"><div class="et_social_networkname">LinkedIn</div></div><span class="et_social_overlay"></span></a></li></ul>
					</div>
				</div><span></span><style type="text/css" class="fluid-images">img{max-width:100%;height:auto;}</style><div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script><script type='text/javascript'>
/* <![CDATA[ */
var mejsL10n = {"language":"en-US","strings":{"Close":"Close","Fullscreen":"Fullscreen","Download File":"Download File","Download Video":"Download Video","Play\/Pause":"Play\/Pause","Mute Toggle":"Mute Toggle","None":"None","Turn off Fullscreen":"Turn off Fullscreen","Go Fullscreen":"Go Fullscreen","Unmute":"Unmute","Mute":"Mute","Captions\/Subtitles":"Captions\/Subtitles"}};
var _wpmejsSettings = {"pluginPath":"\/wp-includes\/js\/mediaelement\/"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.appcoda.com/wp-includes/js/mediaelement/mediaelement-and-player.min.js?ver=2.16.2'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-includes/js/mediaelement/wp-mediaelement.js?ver=4.2.1'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/contact-form-7/includes/js/jquery.form.min.js?ver=3.51.0-2014.06.20'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/www.appcoda.com\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Sending ...","cached":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=4.1.2'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/monarch/js/idle-timer.min.js?ver=1.2.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var monarchSettings = {"ajaxurl":"http:\/\/www.appcoda.com\/wp-admin\/admin-ajax.php","pageurl":"http:\/\/www.appcoda.com\/sqlite-database-ios-app-tutorial\/","stats_nonce":"3c279d6f27","share_counts":"41afbcf48b","follow_counts":"80583e3ade","total_counts":"861aff4fd8","media_single":"ed7cd3edd6","media_total":"e88d48f2ea","generate_all_window_nonce":"6da8221303","no_img_message":"No images available for sharing on this page"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/monarch/js/custom.js?ver=1.2.2'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-includes/js/comment-reply.min.js?ver=4.2.1'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/themes/genesis/lib/js/menu/superfish.min.js?ver=1.7.4'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/themes/genesis/lib/js/menu/superfish.args.min.js?ver=2.1.2'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/themes/genesis/lib/js/menu/superfish.compat.min.js?ver=2.1.2'></script>
</body>
</html>

<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Page Caching using disk: enhanced

 Served from: www.appcoda.com @ 2015-05-04 12:23:01 by W3 Total Cache -->