<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Using Text Kit to Manage and Draw Text in iOS Apps</title><link href="/prismjs/prism.css" rel="stylesheet" /><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<!-- This site is optimized with the Yoast WordPress SEO plugin v2.1.1 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="This is a detailed iOS programming tutorial that walk you through text kit. You&#039;ll learn how to use the kit to manage and draw text in iOS apps."/>
<link rel="canonical" href="http://www.appcoda.com/intro-text-kit-ios-programming-guide/" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:description" content="This is a detailed iOS programming tutorial that walk you through text kit. You&#039;ll learn how to use the kit to manage and draw text in iOS apps."/>
<meta name="twitter:title" content="Using Text Kit to Manage and Draw Text in iOS Apps"/>
<meta name="twitter:site" content="@appcodamobile"/>
<meta name="twitter:domain" content="AppCoda"/>
<meta name="twitter:image:src" content="http://www.appcoda.com/wp-content/uploads/2014/01/intro-text-kit.jpg"/>
<meta name="twitter:creator" content="@appcodamobile"/>
<script type='application/ld+json'>{"@context":"http:\/\/schema.org","@type":"WebSite","url":"http:\/\/www.appcoda.com\/","name":"AppCoda"}</script>
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="AppCoda &raquo; Feed" href="http://feeds.feedburner.com/appcoda" />
<link rel="alternate" type="application/rss+xml" title="AppCoda &raquo; Comments Feed" href="http://www.appcoda.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="AppCoda &raquo; Using Text Kit to Manage Text in Your iOS Apps Comments Feed" href="http://www.appcoda.com/intro-text-kit-ios-programming-guide/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.appcoda.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.1"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f;c.supports={simple:d("simple"),flag:d("flag")},c.supports.simple&&c.supports.flag||(f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='mediaelement-css'  href='http://www.appcoda.com/wp-includes/js/mediaelement/mediaelementplayer.min.css?ver=2.16.2' type='text/css' media='all' />
<link rel='stylesheet' id='wp-mediaelement-css'  href='http://www.appcoda.com/wp-includes/js/mediaelement/wp-mediaelement.css?ver=4.2.1' type='text/css' media='all' />
<link rel='stylesheet' id='eleven40-theme-css'  href='http://www.appcoda.com/wp-content/themes/eleven40/style.css?ver=2.1.2' type='text/css' media='all' />
<link rel='stylesheet' id='contact-form-7-css'  href='http://www.appcoda.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.1.2' type='text/css' media='all' />
<link rel='stylesheet' id='ej-socialslideout-content-style-css'  href='http://www.appcoda.com/wp-content/plugins/ej-socialslider/static/slideout.css?ver=4.2.1' type='text/css' media='all' />
<link rel='stylesheet' id='et_monarch-open-sans-css'  href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' type='text/css' media='all' />
<link rel='stylesheet' id='et_monarch-css-css'  href='http://www.appcoda.com/wp-content/plugins/monarch/css/style.css?ver=1.2.2' type='text/css' media='all' />
<link rel='stylesheet' id='codecolorer-css'  href='http://www.appcoda.com/wp-content/plugins/codecolorer/codecolorer.css?ver=0.9.9' type='text/css' media='screen' />
<script type='text/javascript' src='http://www.appcoda.com/wp-includes/js/jquery/jquery.js?ver=1.11.2'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/wp-fluid-images//lib/fluidimage.js?ver=1.0'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/ej-socialslider/static/slideout.js?ver=4.2.1'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/optin-monster/assets/js/api.js?ver=2.1.6.6'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/qards//js/iframeResizer.min.js?ver=4.2.1'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/qards//js/iframeResizer.contentWindow.min.js?ver=4.2.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.appcoda.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.appcoda.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.2.1" />
<link rel='shortlink' href='http://www.appcoda.com/?p=2871' />
<style type="text/css" id="et-social-custom-css">
				 
			</style><link rel="Shortcut Icon" href="http://www.appcoda.com/wp-content/themes/eleven40/images/favicon.ico" type="image/x-icon" />
<link rel="pingback" href="http://www.appcoda.com/xmlrpc.php" />
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-223304-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script></head>
<body class="single single-post postid-2871 single-format-standard et_monarch header-image content-sidebar"><div id="wrap"><div id="header"><div class="wrap"><div id="title-area"><p id="title"><a href="http://www.appcoda.com/">AppCoda</a></p><p id="description">Your iOS Programming Community</p></div><div class="widget-area header-widget-area"><div id="nav_menu-2" class="widget widget_nav_menu"><div class="widget-wrap"><div class="menu-default-container"><ul id="menu-default" class="menu genesis-nav-menu js-superfish"><li id="menu-item-26" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a href="http://www.appcoda.com/about/">About</a></li>
<li id="menu-item-28" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-28"><a href="http://www.appcoda.com/tutorials/">Tutorials</a></li>
<li id="menu-item-530" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-530"><a href="http://www.appcoda.com/ios-programming-course/">Course</a></li>
<li id="menu-item-3045" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3045"><a title="Swift Programming Book for iOS 8" href="http://www.appcoda.com/swift">Book</a></li>
<li id="menu-item-2140" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2140"><a href="http://www.appcoda.com/ios-app-kit/ios-game-kit.html">Game Kit</a></li>
<li id="menu-item-710" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-710"><a href="http://www.appcoda.com/marketplace/">Marketplace</a></li>
<li id="menu-item-34" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-34"><a href="http://www.appcoda.com/contact/">Contact</a></li>
</ul></div></div></div>
</div></div></div><div id="inner"><div class="wrap"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Leaderboard Responsive Ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-8501671653071605"
     data-ad-slot="1756840139"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script><div id="content-sidebar-wrap"><div id="content" class="hfeed"><div class="post-2871 post type-post status-publish format-standard hentry category-course category-intermediate category-tutorials tag-ios-7 tag-ios-programming tag-text-kit tag-xcode-5 entry"><h1 class="entry-title">Using Text Kit to Manage Text in Your iOS Apps</h1> 
<div class="post-info"><span class="date published time" title="2014-01-18T00:01:49+00:00">January 18, 2014</span>  by <span class="author vcard"><span class="fn"><a href="http://www.appcoda.com/author/gabrielth/" rel="author">Gabriel Theodoropoulos</a></span></span> <span class="post-comments"><a href="http://www.appcoda.com/intro-text-kit-ios-programming-guide/#comments"><span class="dsq-postid" data-dsqidentifier="2871 http://www.appcoda.com/?p=2871">15 Comments</span></a></span> </div><div class="entry-content">
<!-- Quick Adsense WordPress Plugin: http://quicksense.net/ -->
<div style="float:right;margin:10px 0 10px 10px;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8501671653071605";
/* Appcoda_300x250_iPhone_Development */
google_ad_slot = "8132041053";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<p>iOS 7 brings along new rules and <a href="https://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/">new Human Interface Guidelines</a> (HIG) that should be followed by all developers. One of those guidelines regarding the all brand-new look and feel, highlights the fact that an application&#8217;s interface should not compete with the content, nor distracting users from it, but supporting it in the best possible way. This fact is called <em>deference</em> and, along with some more new HI guidelines, makes clear that Apple with iOS 7 focuses on the content and on the way it&#8217;s presented. This is more apparent if we consider the flatten, simple and uncluttered UI, full of white space that makes more room for the content to be displayed. Thankfully, Apple supports developers in their effort to give prominence to their app content, and to text content especially, by introducing a new tool, named <strong>Text Kit</strong>.</p>
<p>Text Kit is part of the <em>UIKit</em> framework, and it consists of a collection of classes that enable developers to manage text and all of its attributes, as well as to display it in various ways, using new great methods and with a little effort. Indeed, prior to Text Kit and iOS 7, advanced text manipulation was really hard to be performed. In the need of modifying text details, such as font or layout attributes, one had to deal with <em>Core Text</em>, a powerful framework, yet hard to work with. Further than that, only <em>UIWebView</em> views were able to display formatted text. Things became better in iOS 6 with <em>attributed strings</em>, where <em>UITextView</em> views could also display rich text, but yet getting into advanced handling still remained a tricky task.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/intro-text-kit.jpg" alt="Introduction to text kit" class="aligncenter size-full wp-image-2898" /></div>
<p>It&#8217;s crucial to take a quick look at the structure of the Text Kit in order to fully understand how everything works in code. So, presenting everything in simple terms, Text Kit is composed by three primary classes:</p>
<ul>
<li>The <strong>Text Storage</strong> class (NSTextStorage)</li>
<li>The <strong>Layout Manager</strong> class (NSLayoutManager)</li>
<li>The <strong>Text Container</strong> class (NSTextContainer)</li>
</ul>
<p><span id="more-2871"></span><br />
Here is what each one of those classes is responsible for:</p>
<p>The <em>NSTextStorage</em> class is in charge for storing all text attribute-related information, such as font or paragraph information. It worths to mention, especially for those developers who have worked with <em>attributed strings</em>, that the NSTextStorage class is a subclass of the <em>NSMutableAttributedString</em> class, and that&#8217;s why is responsible for keeping all text attributes. Besides that, its role also lies to making sure that all the edited text attribute data will remain consistent throughout all management and editing operations that may be performed.</p>
<p>The <em>NSLayoutManager</em> class, as its name implies, manages the way the text data stored to a NSTextStorage object is going to be displayed in a view. Its job is to handle and support any view object that text can be displayed in it, and perform any required conversions of Unicode characters to glyphs in order each character to properly appear on-screen. An object of this class is notified by the NSTextStorage for any modifications been made to text and its attributes, so every change immediately gets reflected in the corresponding view.</p>
<p>The <em>NSTextContainer</em> class actually specifies the view where the text will appear to and it handles information regarding this view (such as its frame or shape). However, a quite important characteristic of this class is the ability to keep an array of <em>Bezier paths</em>, which define areas that should be excluded from the allowed region where text will appear. This gives Text Kit the unique possibility to let text flow around images or other non-text objects and make developers able to display text in great or demanding manners.</p>
<p>Further than all the above, it worths saying that except for the UIWebView that is based on the <em>WebKit</em> framework, the rest-related view objects (UITextView, UITextField, UILabel) are totally based on the Text Kit, which in turn relies on the Core Text and Core Graphics frameworks, something that didn&#8217;t happen in prior iOS versions.</p>
<p>Text Kit is a set of classes with a big number of methods which make it quite powerful and with numerous features. It&#8217;s impossible to describe all Text Kit characteristics just in one tutorial, so in here we will focus in those features that someone may mostly use.</p>
<ul>
<li>Dynamic Type and text styles</li>
<li>Exclusion paths</li>
<li>Use of Text Storage for managing rich text</li>
</ul>
<p>All the above will be discussed in details along the way. For the time being, a quick, necessary introduction to the Text Kit library was just made, which enables us to move forward.</p>
<h2>Demo App Overview</h2>
<p>In this tutorial we are going to create a sample application that will demonstrate the three features mentioned above. As there are many different topics we will work with, the application is going to be a <em>Tabbed</em> one, in order to best serve our needs. Right next I present a sample of the application while running, in its initial state and without any text changes been made yet.</p>
<div id="attachment_2874" style="width: 610px" class="wp-caption aligncenter"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_1_initial_sample.jpg" alt="Text Kit Sample App" class="size-full wp-image-2874" /><p class="wp-caption-text">Text Kit Demo App</p></div>
<p>A few words on how the sample app is going to work now. Both view controllers behind each tab are going to consist of two views:</p>
<ul>
<li>A <strong>UIToolbar</strong> containing various bar button items that will be used to demonstrate various Text Kit operations.</li>
<li>A <strong>UITextView</strong> with sample text for our experiments.</li>
</ul>
<p>Speaking more particularly now, in the first view controller we are going to implement and demonstrate both the <em>Dynamic Type</em> and the <em>Exclusion Paths</em> features. All the bar button items of the toolbar, except for the last one, are used to change the <em>text style</em> of the text view (more about text styles in a while, during implementation). The last bar button item will be used to either add or remove an image (UIImageView) to the view, so simply by using an exclusion path force text to flow around the image and not to be overlapped by it.</p>
<p>Regarding the second view controller, I guess that the respective figure above speaks for itself. As you may have understood, this is a mini RTF editor. On the text of the text view the following formatting will be possible to be applied:</p>
<ul>
<li>Bold and Italic</li>
<li>Underline</li>
<li>Color change (red and black)</li>
<li>Paragraph alignment (left, center, right)</li>
</ul>
<p>So, having presented the demo application and how it&#8217;s going to work, let&#8217;s do some real work and let&#8217;s see some cool Text Kit features in action!</p>
<h2>Creating Demo App Project</h2>
<p>Launch Xcode and while being in the Welcome screen, select to create a new project from the left-hand side of it:</p>
<div id="attachment_2875" style="width: 610px" class="wp-caption aligncenter"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_2_xcode_welcome.jpg" alt="Create a New Xcode Project" class="size-full wp-image-2875" /><p class="wp-caption-text">Create a New Xcode Project</p></div>
<p>Under the <strong>iOS</strong> section, make sure you select the <strong>Application</strong> category. Then, select the <strong>Tabbed Application</strong> as the template for our project and click on <strong>Next</strong>.</p>
<div id="attachment_2877" style="width: 610px" class="wp-caption aligncenter"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_3_template1.jpg" alt="Select Xcode Template" class="size-full wp-image-2877" /><p class="wp-caption-text">Select Xcode Template</p></div>
<p>Right next, specify a name for the project. I named it <strong>TextKitDemo</strong>, so go ahead and add it at the <strong>Product Name</strong> field. Also, in the <strong>Devices</strong> drop down menu, make sure that the selected options is the <strong>iPhone</strong> value. Click on the <strong>Next</strong> button to proceed.</p>
<div id="attachment_2878" style="width: 610px" class="wp-caption aligncenter"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_4_template2.jpg" alt="Setting project options" class="size-full wp-image-2878" /><p class="wp-caption-text">Setting project options</p></div>
<p>In this final window of the guide, select a place to store your project. Once you do that, click on the <strong>Create</strong> button and you&#8217;re ready.</p>
<h2>Setting Up the User Interface</h2>
<p>Let&#8217;s begin by setting up the interface for the first view controller being behind the first tab. Open the <em>Main.storyboard</em> file and let Interface Builder to show on-screen. Here is the initial interface that you should see right now:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_5_ib_initial.jpg" alt="Designing storyboard" class="aligncenter size-full wp-image-2880" /></div>
<p>Go to the First View Controller scene and delete both UILabel views existing on it:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_6_ib_delete_default.jpg" alt="Delete default view controller" class="aligncenter size-full wp-image-2881" /></div>
<p>Next, through the <strong>Utilities Pane</strong>, locate a <strong>UIToolbar</strong> view inside the <strong>Object Library</strong> and add it to the scene.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_7_ib_toolbar_view.jpg" alt="Interface Builder Toolbar" class="aligncenter size-full wp-image-2882" /></div>
<p>Set its frame as follows: <em>X=0, Y=20, Width=320, Height=44</em>.</p>
<p>Once you position it to the right place, go and grab 6 more bar button items and add them to the bar. You should have 7 item in total. Starting from the left and moving to the right, set their titles as it&#8217;s shown here:</p>
<p><strong>H, SH, B, F, C1, C2, EP</strong></p>
<p>I will explain later those weird titles. Apart from the above, go and add two <strong>Flexible Space Bar Button Items</strong> and place them at the far left and the far right sides of the toolbar respectively. For now, if your toolbar looks like the following, then you are just fine:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_8_toolbar1_finished.jpg" alt="Toolbar Complete" class="aligncenter size-full wp-image-2883" /></div>
<p>Go back to the Object Library, and this time get a <strong>UITextView</strong> object. Place it on the scene and make sure to let it occupy the remaining available space. For now, let it be with the default <em>Lorem Ipsum</em> text. However, in the <strong>Attributes Inspector</strong>, in the <strong>Text View</strong> section, select the <strong>Attributed</strong> value in the <strong>Text</strong> drop down menu. Here is how your scene should look like:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_9_scene1_ready.jpg" alt="Text Kit App Scene 1" class="aligncenter size-full wp-image-2884" /></div>
<p>Head now to the <em>FirstViewController.h</em> file. Let&#8217;s declare an <em>IBOutlet</em> property that we&#8217;ll connect with the text view. Add the next line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>weak, nonatomic<span style="color: #002200;">&#41;</span> IBOutlet UITextView <span style="color: #002200;">*</span>textView;</div></td></tr></tbody></table></div>
<p>Also, we want our bar button items to perform actions, so now it&#8217;s the best time to declare those <em>IBAction</em> methods and connect them later:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyHeadlineStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applySubHeadlineStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyBodyStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyFootnoteStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyCaption1Style<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyCaption2Style<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>toggleImage<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;</div></td></tr></tbody></table></div>
<p>Let&#8217;s make the necessary connections now. Open once again the <em>Main.storyboard</em> file. <em>Ctrl-Click or Right-Click</em> on the <strong>First View Controller</strong> object, under the <strong>First View Controller &#8211; First Scene</strong> section, inside the <strong>Document Outline</strong> pane. In the window that pops up, the IBOutlet property and the IBAction methods we declared are listed among some other options. Locate the <strong>textView</strong> IBOutlet property, and <em>click on the circle on the right side and drag and drop the text view</em>, just as it&#8217;s demonstrated in the following image:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_10_iboutlet_connect.jpg" alt="storyboard connecting outlet" class="aligncenter size-full wp-image-2885" /></div>
<p>Repeat the exact same steps, and connect the IBAction methods to the bar button items. Connect the first method to the first item, the second method to the second item, and so on. The IBAction methods were declared in the same order that the bar button items are.</p>
<h2>Dynamic Type and Text Styles</h2>
<p>Let&#8217;s do now some discussion and explain what the dynamic type is, before we proceed to implementation. In iOS 7, Apple introduces <em>Text Styles</em>, which actually describe default font styles that are used in order to line up text inside text containers with user preferences. These styles are six, and they represent the most important text styles that can be found in a text content. Here they are:</p>
<ul>
<li><strong>UIFontTextStyleHeadline</strong></li>
<li><strong>UIFontTextStyleSubheadline</strong></li>
<li><strong>UIFontTextStyleBody</strong></li>
<li><strong>UIFontTextStyleFootnote</strong></li>
<li><strong>UIFontTextStyleCaption1</strong></li>
<li><strong>UIFontTextStyleCaption2</strong></li>
</ul>
<p>Beginning from the first one, those styles describe:</p>
<ul>
<li><strong>Heading fonts</strong></li>
<li><strong>Sub-Heading fonts</strong></li>
<li><strong>Body fonts</strong></li>
<li><strong>Footnote fonts</strong></li>
<li><strong>Standard caption fonts</strong></li>
<li><strong>Alternate caption fonts</strong></li>
</ul>
<div class="note">
<strong>Note</strong>: Bar button item titles regard those text styles, therefore now you can explain the weird title values we set to them.
</div>
<p>The way, or in other words the <em>mechanism</em> that apply these styles to a text of a text container (such as a text view), is called Dynamic Type. Applications that adopt it have always their text displayed according to the user preferences. To make the latter more clear, if you open either in your device or in Simulator the <em>Settings</em> app, in the <em>General</em> section there is a setting named <strong>Text Size</strong>. When you go there, the next screen appears:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_11_settings_text_size.jpg" alt="Setting text size" class="aligncenter size-full wp-image-2887" /></div>
<p>Users set their desired font size here, and beginning from iOS 7, they expect to see their preference working to all applications they use.</p>
<p>Generally, regarding the Dynamic Type feature, keep in mind that when you adopt it in your applications, then the system is responsible for displaying your text content in the best possible way and according to user settings. That means that the same text won&#8217;t be shown in the same way to all devices, as it will automatically be adjusted by the system to meet user requirements.</p>
<p>Let&#8217;s go now to see everything in action, where all will become pretty clear.</p>
<h2>Dynamic Type in Action</h2>
<p>Testing the Dynamic Type for first time is really easy and fast, as we just have to implement the IBAction methods that we declared and connected to the bar button items earlier and see all text styles applied to our text view&#8217;s text. Before doing so, I&#8217;ll just say that we are going to use a new method existing on Text Kit, named <em>preferredFontForTextStyle:</em>. This method returns a <em>UIFont</em> object, which contains the font set to the text container scaled to the appropriate size according to the applied style and user settings.</p>
<p>Right next follows the implementation of the IBAction methods. Note that the font returned by the <em>preferredFontForTextStyle:</em> is set directly to the text view.</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyHeadlineStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView setFont<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>UIFont preferredFontForTextStyle<span style="color: #002200;">:</span>UIFontTextStyleHeadline<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applySubHeadlineStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView setFont<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>UIFont preferredFontForTextStyle<span style="color: #002200;">:</span>UIFontTextStyleSubheadline<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyBodyStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView setFont<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>UIFont preferredFontForTextStyle<span style="color: #002200;">:</span>UIFontTextStyleBody<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyFootnoteStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView setFont<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>UIFont preferredFontForTextStyle<span style="color: #002200;">:</span>UIFontTextStyleFootnote<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyCaption1Style<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView setFont<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>UIFont preferredFontForTextStyle<span style="color: #002200;">:</span>UIFontTextStyleCaption1<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyCaption2Style<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView setFont<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>UIFont preferredFontForTextStyle<span style="color: #002200;">:</span>UIFontTextStyleCaption2<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>If you run the app now, you&#8217;ll find out that simply by tapping (or clicking on the Simulator) on each bar button item except for the last one, the text style inside the text view gets changed. Pretty good!</p>
<p>Let&#8217;s see now a problem that is not immediately obvious, how it&#8217;s caused and how we&#8217;ll resolve it. Open the <strong>Settings app > General > Text Size</strong> and change the text size. Then close the settings app and go back to our demo application (important: don&#8217;t re-run the app through Xcode, just launch it). The text size inside the text view should have been changed too in accordance to your settings. However, this didn&#8217;t happen and of course, in a real app this would lead to a pretty bad user experience, as users expect to see any setting they apply affecting their applications at once.</p>
<p>Thankfully, we can overcome this problem easily, using a <em>notification</em> the system sends when a text size change occurs. This notification is the <em>UIContentSizeCategoryDidChangeNotification</em>, and our duty is to make our application observe for this one and take the necessary actions once it arrives. Go to the <em>viewDidLoad</em> method and add the next code fragment:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>viewDidLoad<br />
<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>super viewDidLoad<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/"><span style="color: #400080;">NSNotificationCenter</span></a> defaultCenter<span style="color: #002200;">&#93;</span> addObserver<span style="color: #002200;">:</span>self<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;selector<span style="color: #002200;">:</span><span style="color: #a61390;">@selector</span><span style="color: #002200;">&#40;</span>textSizeChangedWithNotification<span style="color: #002200;">:</span><span style="color: #002200;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;name<span style="color: #002200;">:</span>UIContentSizeCategoryDidChangeNotification<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;object<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>The <em>textSizeChangedWithNotification:</em> method that will be called if such a notification arrives, is a custom private method that we&#8217;ll implement right now. But firstly, let&#8217;s declare it by going in the private section of the interface and by adding the following line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> FirstViewController <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#41;</span><br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>textSizeChangedWithNotification<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSNotification_Class/"><span style="color: #400080;">NSNotification</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>notification;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Before we proceed to the implementation of the method, let&#8217;s think for a second what we want to take place in it. As this method will be called only after a text size changing notification, the best way to reflect the changes would be to set once again the text on the text view, so it gets redrawn with the new size. Okay, but here we have six different text styles, so what style will be used while setting the text again?</p>
<p>The best solution is to use a private <em>NSString</em> object, which will keep the current style once it&#8217;s set. So, while still being in the private section, add the next line too:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> FirstViewController <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#41;</span><br />
...<br />
<br />
<span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>nonatomic, strong<span style="color: #002200;">&#41;</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>styleApplied;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Now, go in each one IBAction method and assign to the <em>styleApplied</em> string the equivalent style, just like it&#8217;s shown right next:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyHeadlineStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView setFont<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>UIFont preferredFontForTextStyle<span style="color: #002200;">:</span>UIFontTextStyleHeadline<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; _styleApplied <span style="color: #002200;">=</span> UIFontTextStyleHeadline;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #11740a; font-style: italic;">// Set the text style to the styleApplied string for each IBAction method.</span></div></td></tr></tbody></table></div>
<p>After you have finished doing all that, we are ready to implement the <em>textSizeChangedWithNotification:</em> method, with just one simple line in it:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>textSizeChangedWithNotification<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSNotification_Class/"><span style="color: #400080;">NSNotification</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>notification<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView setFont<span style="color: #002200;">:</span><span style="color: #002200;">&#91;</span>UIFont preferredFontForTextStyle<span style="color: #002200;">:</span>_styleApplied<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Now go and change once again the text size inside the Settings app and re-launch our application. You&#8217;ll notice that the text view&#8217;s text perfectly gets changed too.</p>
<p>So far, so good, but simply changing the style of the whole text in a text view is not that impressive, right? It would be really cool and useful if we could modify our code, so we could set different styles to different text parts of the text view. So, for starters, let&#8217;s change the text in the text view so it&#8217;s easier to watch all different styles that will be applied. Go to the <em>Main.storyboard</em> file, select the text view and replace its default text with the next one:</p>
<p><em><br />
This is a headline!<br />
…and a sub-headline&#8230;</p>
<p>The body of the text is here.<br />
Lorem ipsum dolor sit er elit lamet, consectetaur cillium adipisicing pecu, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
<p>One caption here…</p>
<p>… and another caption there</p>
<p>A footnote to make this sample perfect<br />
</em></p>
<p>In order to apply a style to a specific text fragment, it should be selected first. Then, when tapping on any bar button item to set the respective style, the changing will take effect only in the selected region. However, this time we cannot set the font style directly to the text view, as this would affect its entire contents and not only the desired range. Therefore, we will access directly the <em>Text Storage</em> object of the text view. Remember that this is the responsible class for storing any text and font attributes regarding the text of a text container.</p>
<p>Because we want to do the same job for every text style (locate the selected text and apply the style in it), we will create a private method to write the necessary code just once, and not six times. Then we will update the IBAction methods and we will make them call this private method, specifying each one its respective style. Let&#8217;s begin by declaring the private method in the private section of the interface, inside the <em>FirstViewController.m</em> file:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> FirstViewController <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#41;</span><br />
...<br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>applyStyletoSelection<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>style;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>Let&#8217;s go straight ahead to its implementation and we&#8217;ll discuss it later.</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>applyStyletoSelection<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>style<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// 1. Get the range of the selected text. </span><br />
&nbsp; &nbsp; <span style="color: #a61390;">NSRange</span> range <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// 2. Create a new font with the selected text style.</span><br />
&nbsp; &nbsp; UIFont <span style="color: #002200;">*</span>styledFont <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>UIFont preferredFontForTextStyle<span style="color: #002200;">:</span>style<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// 3. Begin editing the text storage.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage beginEditing<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// 4. Create a dictionary with the new font as the value and the NSFontAttributeName property as a key.</span><br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>dict <span style="color: #002200;">=</span> @<span style="color: #002200;">&#123;</span>NSFontAttributeName <span style="color: #002200;">:</span> styledFont<span style="color: #002200;">&#125;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// 5. Set the new attributes to the text storage object of the selected text.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage setAttributes<span style="color: #002200;">:</span>dict range<span style="color: #002200;">:</span>range<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// 6. Notify that we end editing the text storage.</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage endEditing<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>At first, we get the range of the selected text as shown above. Next, we create a new font, applying the text style and then we dive into Text Kit. Using the <em>beginEditing</em> method we perform the first step required to update the text storage, telling it that we are planning to make changes. A new attribute in the text storage object is set using the <em>setAttributes:range:</em> method, where the first parameter expects a <em>NSDictionary</em> with all the font  or text attributes we want to get changed. That&#8217;s why we created the dictionary object at the exact previous step. Finally, after the new text storage attribute has been set, we call the <em>endEditing</em> method to finalize all changes.</p>
<p>In order for the above method to be called every time that a bar button is tapped, we need to modify all of the IBAction methods. Here they are:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyHeadlineStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self applyStyletoSelection<span style="color: #002200;">:</span>UIFontTextStyleHeadline<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applySubHeadlineStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self applyStyletoSelection<span style="color: #002200;">:</span>UIFontTextStyleSubheadline<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyBodyStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self applyStyletoSelection<span style="color: #002200;">:</span>UIFontTextStyleBody<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyFootnoteStyle<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self applyStyletoSelection<span style="color: #002200;">:</span>UIFontTextStyleFootnote<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyCaption1Style<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self applyStyletoSelection<span style="color: #002200;">:</span>UIFontTextStyleCaption1<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>applyCaption2Style<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self applyStyletoSelection<span style="color: #002200;">:</span>UIFontTextStyleCaption2<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>You may test the app now. You&#8217;ll notice that if you select a portion of the text and then tap on a text style bar button item, the change will affect only the selected region.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_12_apply_textstyles.jpg" alt="Applying text style" class="aligncenter size-full wp-image-2888" /></div>
<h2>Exclusion Paths</h2>
<p>At the beginning of this tutorial I presented the classes that compose Text Kit, and I said that one of them is the <em>Text Container</em> class. One great feature of it is that it can store an array of <em>UIBezierPaths</em> and force text to flow around these paths, and because they are excluded from the text draw region, they are called <em>Exclusion Paths</em>.</p>
<p>An exclusion path is actually describing an area that text should flow around it. The text container class can accept one or more bezier paths, or none if no text flow should occur. It&#8217;s not hard to manage to create such an effect, as long as you provide at least one path to the text container object of the text view. Let&#8217;s see how it works.</p>
<p>Go to the <em>Main.storyboard</em> file and add a <em>UIImageView</em> object on the First View Controller scene. Set its frame values to the next ones: <strong>X=100, Y=110, Width=120, Height=120</strong>. If you have <a href="https://dl.dropboxusercontent.com/u/2857188/TextKit_Sample_Icons.zip">downloaded the project images</a>, then set the <em>Sample.png</em> as its image. Your scene should look like this:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_13_ib_imageview_ep.jpg" alt="Text Kit - adding image view" class="aligncenter size-full wp-image-2889" /></div>
<p>Initially the image view should not be shown on the screen, but when the last bar button item is tapped, which will work as a toggle button, the image view will appear and disappear sequentially, and our text will either flow or not around it. So, go to the <em>FirstViewController.m</em> file, and in the <em>viewDidLoad:</em> method, add the next line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>viewDidLoad<br />
<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; ...<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_imageView setHidden<span style="color: #002200;">:</span><span style="color: #a61390;">YES</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Let&#8217;s implement now the <em>toggleImage:</em> IBAction method. At first, get the implementation, next we&#8217;ll discuss about it:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>toggleImage<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender<span style="color: #002200;">&#123;</span> &nbsp;<br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#91;</span>_imageView isHidden<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; CGRect convertedFrame <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView convertRect<span style="color: #002200;">:</span>_imageView.frame fromView<span style="color: #002200;">:</span>self.view<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>_textView textContainer<span style="color: #002200;">&#93;</span> setExclusionPaths<span style="color: #002200;">:</span>@<span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>UIBezierPath bezierPathWithRect<span style="color: #002200;">:</span>convertedFrame<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>_textView textContainer<span style="color: #002200;">&#93;</span> setExclusionPaths<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_imageView setHidden<span style="color: #002200;">:!</span><span style="color: #002200;">&#91;</span>_imageView isHidden<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>I don&#8217;t think it&#8217;s hard to understand it, but let me point a few things out. At first, we check if the image view is hidden or not. If it&#8217;s hidden (which is the initial state), then we have to set the exclusion path to the text container object of the text view so the text flows around the image view, and of course to make the image view visible. This line&#8230;</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">CGRect convertedFrame <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView convertRect<span style="color: #002200;">:</span>_imageView.frame fromView<span style="color: #002200;">:</span>self.view<span style="color: #002200;">&#93;</span>;</div></td></tr></tbody></table></div>
<p>&#8230; is used to convert the image view coordinates from the <em>self.view</em> view to the text view&#8217;s, so both the image view and the floating text exist on the same area. Next, using the <em>bezierPathWithRect:</em> class method of the <em>UIBezierPath</em> class, we get the bezier path created by the frame specified by its parameter, and in our case is the frame (converted to text view&#8217;s coordinates) of the image view. We add this bezier path to a NSArray and we finally set the exclusion path. Note that in the <em>else</em> case, we set the exclusion path to <em>nil</em>, because we don&#8217;t want our text to flow when the image view is not there.</p>
<p>So, go give it a try and see how the text is redrawn around the image view. The next figure shows this exact behavior:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_14_exclusion_path.jpg" alt="Text Kit - Exclusion Path" class="aligncenter size-full wp-image-2890" /></div>
<h2>A RTF Editor</h2>
<p>Up to now we have seen two very important aspects of Text Kit, how to adopt Dynamic Type and how to use Exclusion Paths so our text flows around a non-text object. Text Kit features are too many to be presented in just one tutorial, however we could dive a little bit more in by creating a mini RTF (rich text format) editor.</p>
<p>Before we begin working on it, let&#8217;s say a few more things about it. First of all, our editor will consist of two subviews: A toolbar at the top of the screen that will provide all various options for making a rich text, and a text view that will cover the rest of the available area and it will contain the edited text. Apart from setting various text attributes, we will also see how we can access the paragraph style and change its alignment (left, center, right). The following figure demonstrates the final result:</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_15_rtf_sample.jpg" alt="Text Kit - RTF Sample" class="aligncenter size-full wp-image-2891" /></div>
<p>Let&#8217;s start working on it.</p>
<h2>Editor Interface Setup</h2>
<p>Our first task is to setup the interface of the view controller in Interface Builder. Click on the <em>Main.storyboard</em> file to let it show its contents, and go straight ahead to the Second View Controller scene. For starters, delete the two default labels existing in it.</p>
<p>Next, through the <strong>Utilities Pane</strong>, get a <strong>UIToolbar</strong> object from the <strong>Object Library</strong> and add it to the scene. Set its frame as follows: <em>X=0, Y=20, Width=320, Height=44</em>.</p>
<p>Make sure to add in the toolbar seven more bar button items, so you have eight of them in total. If you have <a href="https://dl.dropboxusercontent.com/u/2857188/TextKit_Sample_Icons.zip">downloaded the project images</a> (and if you have added them to the project of course), you can set them to the bar button items. Starting from the very left one and moving to the right, set the next images:</p>
<ul>
<li>bold-25</li>
<li>italic-25</li>
<li>border_color-25</li>
<li>align_left-25</li>
<li>align_center-25</li>
<li>align_right-25</li>
</ul>
<p>To the last two bar button items, just set the titles: <strong>Red</strong> and <strong>Black</strong> as they won&#8217;t have any specific image.</p>
<p>Even though I am pretty confident that all readers know how to set a bar button item&#8217;s title or image, it might be better to make a quick reference. So, after having selected an item, make sure that the <strong>Utilities Pane</strong> is appeared, and then go to the <strong>Attributes Inspector</strong>, where under the <strong>Bar Item</strong> section you will find the <strong>Title</strong> and <strong>Image</strong> fields.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_16_bar_button_image.jpg" alt="Text Kit - Adding bar button image" class="aligncenter size-full wp-image-2892" /></div>
<p>Your toolbar should be now ready. You also have to add a text view, which you will also need to drag and drop from the <strong>Object Library</strong> of the Utilities Pane. Once you add it, be sure that (by having the text view selected at the same time) in the Attributes Inspector, in the <strong>Text View</strong> section, the value <strong>Attributed</strong> is selected in the <strong>Text</strong> drop down menu.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_17_textview_attributed.jpg" alt="Text Kit -Setting attribute" class="aligncenter size-full wp-image-2893" /></div>
<p>Regarding the text itself, either leave the default &#8220;Lorem Ipsum&#8221; as it is, or set any text you like. I am going to leave it as-is.</p>
<p>So far we are going perfect, but we need an IBOutlet property for the text view so we can access it programmatically, and a few IBAction methods that will trigger all actions we want to be done by our bar button items. Let&#8217;s declare all these now.</p>
<p>Click on the <em>SecondViewController.h</em> file, and declare the next IBOutlet property regarding the text view and all IBAction methods, as shown below. The method names clearly indicate their purpose:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@property</span> <span style="color: #002200;">&#40;</span>weak, nonatomic<span style="color: #002200;">&#41;</span> IBOutlet UITextView <span style="color: #002200;">*</span>textView;<br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>makeBold<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>makeItalic<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>underlineText<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>alignTextLeft<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>centerText<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>alignTextRight<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>makeTextColorRed<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>makeTextColorBlack<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender;</div></td></tr></tbody></table></div>
<p>While we were setting the interface of the first view controller up, I demonstrated how to connect an IBOutlet method, as well as IBAction methods, to the views of the scene. Follow the same steps, and connect the <em>textView</em> property to the text view of the Second View Controller scene. Do the same for all IBAction methods. Once you finish making connections, the interface is ready, so we are ready to move straight ahead to code.</p>
<h2>Bold and Italic Text</h2>
<p>Let&#8217;s begin doing some programming work by implementing the <em>makeBold:</em> IBAction method. As you will soon see, it&#8217;s not hard to make text attribute modifications, but pay special attention as we are going to use some new hot tools.</p>
<p>The logic we are going to follow in order to make a selected text bold (and later to un-bold it), is simple: First, we&#8217;ll get the range of the selected text, and for this range we will access the text attributes. We will get its font and we&#8217;ll change it so it uses the bold version of it. Finally, we will set the new font attributes to the selected text and we are done.</p>
<p>In order to do all the above, we are going to use a new class in iOS 7, named <strong>UIFontDescriptor</strong>. This class is super-useful, as it describes a font along with all of its attributes, but most importantly it allows to directly modify them and eventually create a new font. All font attributes are represented in the form of a dictionary (key/value pair), while a great number of key string constants exist to describe each single attribute. You&#8217;ll see this class in action right next, but before we proceed I strongly suggest to go and read more about it in Apple Documentation. It&#8217;s out of my scope to make a theoretical discussion about it, so I&#8217;m going to use it just as a tool.</p>
<p>Let&#8217;s write some code now. Get the next fragment and we&#8217;ll discuss it later:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>makeBold<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">NSRange</span> selectedRange <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>currentAttributesDict <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView.textStorage attributesAtIndex<span style="color: #002200;">:</span>selectedRange.location<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; effectiveRange<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; UIFont <span style="color: #002200;">*</span>currentFont <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>currentAttributesDict objectForKey<span style="color: #002200;">:</span>NSFontAttributeName<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; UIFontDescriptor <span style="color: #002200;">*</span>fontDescriptor <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>currentFont fontDescriptor<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Here is what this code does: First of all, we get the range of the selected text by using the <em>selectedRange:</em> method of the text view. Next, we get all attributes regarding the selected text from the text storage object of the text view, and we &#8220;extract&#8221; the current font from these attributes right after. Finally, we keep an instance of the font descriptor (UIFontDescriptor class) for the current object, so we can access all font attributes.</p>
<p>Now we are in position to modify the font properties and turn it to bold. Let&#8217;s see how:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>makeBold<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; ...<br />
<br />
&nbsp; &nbsp; UIFontDescriptor <span style="color: #002200;">*</span>changedFontDescriptor <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor fontDescriptorWithSymbolicTraits<span style="color: #002200;">:</span>UIFontDescriptorTraitBold<span style="color: #002200;">&#93;</span>;<br />
<br />
&nbsp; &nbsp; UIFont <span style="color: #002200;">*</span>updatedFont <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>UIFont fontWithDescriptor<span style="color: #002200;">:</span>changedFontDescriptor size<span style="color: #002200;">:</span><span style="color: #2400d9;">0.0</span><span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>We create a new font descriptor object by using the <em>fontDescriptorWithSymbolicTraits:</em> method. This method, returns a new descriptor based on an existing one (just right as we are doing here), but after having specified some new features for the font, called <em>symbolic traits</em> (more about it just in a while). Using the new font descriptor, we create a new font named <em>updatedFont</em> as shown above. The <em>0.0</em> size value indicates that the new font will keep the same size as before.</p>
<p>A <em>symbolic trait</em> is actually a font property that describes some style of it, and it&#8217;s an unsigned, 32-bit integer value. Here is a list of all traits, taken directly from Apple:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">typedef</span> <span style="color: #a61390;">enum</span> <span style="color: #002200;">:</span> uint32_t <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #11740a; font-style: italic;">/* Typeface info (lower 16 bits of UIFontDescriptorSymbolicTraits) */</span><br />
&nbsp; &nbsp;UIFontDescriptorTraitItalic <span style="color: #002200;">=</span> 1u &lt;&lt; <span style="color: #2400d9;">0</span>,<br />
&nbsp; &nbsp;UIFontDescriptorTraitBold <span style="color: #002200;">=</span> 1u &lt;&lt; <span style="color: #2400d9;">1</span>,<br />
&nbsp; &nbsp;UIFontDescriptorTraitExpanded <span style="color: #002200;">=</span> 1u &lt;&lt; <span style="color: #2400d9;">5</span>,<br />
&nbsp; &nbsp;UIFontDescriptorTraitCondensed <span style="color: #002200;">=</span> 1u &lt;&lt; <span style="color: #2400d9;">6</span>,<br />
&nbsp; &nbsp;UIFontDescriptorTraitMonoSpace <span style="color: #002200;">=</span> 1u &lt;&lt; <span style="color: #2400d9;">10</span>,<br />
&nbsp; &nbsp;UIFontDescriptorTraitVertical <span style="color: #002200;">=</span> 1u &lt;&lt; <span style="color: #2400d9;">11</span>,<br />
&nbsp; &nbsp;UIFontDescriptorTraitUIOptimized <span style="color: #002200;">=</span> 1u &lt;&lt; <span style="color: #2400d9;">12</span>,<br />
&nbsp; &nbsp;UIFontDescriptorTraitTightLeading <span style="color: #002200;">=</span> 1u &lt;&lt; <span style="color: #2400d9;">15</span>,<br />
&nbsp; &nbsp;UIFontDescriptorTraitLooseLeading <span style="color: #002200;">=</span> 1u &lt;&lt; <span style="color: #2400d9;">16</span>,<br />
&nbsp; &nbsp;<br />
&nbsp; &nbsp;<span style="color: #11740a; font-style: italic;">/* Font appearance info (upper 16 bits of UIFontDescriptorSymbolicTraits */</span><br />
&nbsp; &nbsp;UIFontDescriptorClassMask <span style="color: #002200;">=</span> 0xF0000000,<br />
&nbsp; &nbsp;<br />
&nbsp; &nbsp;UIFontDescriptorClassUnknown <span style="color: #002200;">=</span> 0u &lt;&lt; <span style="color: #2400d9;">28</span>,<br />
&nbsp; &nbsp;UIFontDescriptorClassOldStyleSerifs <span style="color: #002200;">=</span> 1u &lt;&lt; <span style="color: #2400d9;">28</span>,<br />
&nbsp; &nbsp;UIFontDescriptorClassTransitionalSerifs <span style="color: #002200;">=</span> 2u &lt;&lt; <span style="color: #2400d9;">28</span>,<br />
&nbsp; &nbsp;UIFontDescriptorClassModernSerifs <span style="color: #002200;">=</span> 3u &lt;&lt; <span style="color: #2400d9;">28</span>,<br />
&nbsp; &nbsp;UIFontDescriptorClassClarendonSerifs <span style="color: #002200;">=</span> 4u &lt;&lt; <span style="color: #2400d9;">28</span>,<br />
&nbsp; &nbsp;UIFontDescriptorClassSlabSerifs <span style="color: #002200;">=</span> 5u &lt;&lt; <span style="color: #2400d9;">28</span>,<br />
&nbsp; &nbsp;UIFontDescriptorClassFreeformSerifs <span style="color: #002200;">=</span> 7u &lt;&lt; <span style="color: #2400d9;">28</span>,<br />
&nbsp; &nbsp;UIFontDescriptorClassSansSerif <span style="color: #002200;">=</span> 8u &lt;&lt; <span style="color: #2400d9;">28</span>,<br />
&nbsp; &nbsp;UIFontDescriptorClassOrnamentals <span style="color: #002200;">=</span> 9u &lt;&lt; <span style="color: #2400d9;">28</span>,<br />
&nbsp; &nbsp;UIFontDescriptorClassScripts <span style="color: #002200;">=</span> 10u &lt;&lt; <span style="color: #2400d9;">28</span>,<br />
&nbsp; &nbsp;UIFontDescriptorClassSymbolic <span style="color: #002200;">=</span> 12u &lt;&lt; <span style="color: #2400d9;">28</span><br />
<span style="color: #002200;">&#125;</span> UIFontDescriptorSymbolicTraits;</div></td></tr></tbody></table></div>
<p>After having said all these, we are almost ready to have it finished. We need to set the new font to the text storage object of the text view, just right it&#8217;s shown below. Watch out the use of the dictionary object:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>makeBold<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; ...<br />
<br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>dict <span style="color: #002200;">=</span> @<span style="color: #002200;">&#123;</span>NSFontAttributeName<span style="color: #002200;">:</span> updatedFont<span style="color: #002200;">&#125;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage beginEditing<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage setAttributes<span style="color: #002200;">:</span>dict range<span style="color: #002200;">:</span>selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage endEditing<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>If you run the app now and select some text in the second view controller, then by tapping on the Bold bar button item the text becomes bold. Great right? And with too little effort!</p>
<p>Let&#8217;s return in our code now. This implementation does what we want, but just in the halfway. If you ran the app, then you surely noticed that once the selected text becomes bold, it cannot be reversed to normal, and that&#8217;s a situation that we want to change.</p>
<p>Begin by locating this line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">UIFontDescriptor <span style="color: #002200;">*</span>changedFontDescriptor <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor fontDescriptorWithSymbolicTraits<span style="color: #002200;">:</span>UIFontDescriptorTraitBold<span style="color: #002200;">&#93;</span>;</div></td></tr></tbody></table></div>
<p>Replace it with the following code fragment:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">&nbsp; &nbsp; ...<br />
<br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>fontNameAttribute <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>fontDescriptor fontAttributes<span style="color: #002200;">&#93;</span> objectForKey<span style="color: #002200;">:</span>UIFontDescriptorNameAttribute<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; UIFontDescriptor <span style="color: #002200;">*</span>changedFontDescriptor;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#91;</span>fontNameAttribute rangeOfString<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;Bold&quot;</span><span style="color: #002200;">&#93;</span>.location <span style="color: #002200;">==</span> NSNotFound<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; changedFontDescriptor <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor fontDescriptorWithSymbolicTraits<span style="color: #002200;">:</span>UIFontDescriptorTraitBold<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">&#123;</span><br />
<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<br />
&nbsp; &nbsp; ...</div></td></tr></tbody></table></div>
<p>There is no direct way that let us know if a font is bold or not. The only way to find this out is to see if the &#8220;Bold&#8221; keyword exists in the font name string as a substring. That&#8217;s exactly what is being done in the code above. If it&#8217;s not found, then we create the new font descriptor with the bold trait specified.</p>
<p>However, doing the opposite thing and removing the bold styling is a little bit more tricky, as there is no trait value just like the <em>UIFontDescriptorTraitBold</em> that turns a font to normal. We need to find a way so the bold value just to be removed from the symbolic traits of the font, and that is <em>to perform an AND (&#038;) bitwise operation between the current traits and the complement of the bold trait</em>, so as the new trait that will come out won&#8217;t contain the bold one. So, go ahead and add the next snippet in the <em>else</em> case:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">uint32_t existingTraitsWithoutTrait <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor symbolicTraits<span style="color: #002200;">&#93;</span> <span style="color: #002200;">&amp;</span> ~UIFontDescriptorTraitBold;<br />
changedFontDescriptor <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor fontDescriptorWithSymbolicTraits<span style="color: #002200;">:</span>existingTraitsWithoutTrait<span style="color: #002200;">&#93;</span>;</div></td></tr></tbody></table></div>
<p>Note that the <em>Not</em> (or Complement) bitwise operator is the <em>~</em> symbol. The <em>!</em> is logical operator, and I&#8217;m telling that just to avoid any possible confusion.</p>
<p>If you test it now, you&#8217;ll see that by tapping sequentially on the Bold bar button item, the selected text will toggle its weight.</p>
<p>Well, we are almost touching perfection, and I&#8217;m telling almost, because there is one small problem not apparent yet, but that needs to be fixed. When looking at the last line of code presented above, you understand that the <em>changedFontDescriptor</em> object describes a font with all of its attributes, except for the bold style, and that means that if the selected text was both bold and italic, then just the italic styling remains intact. A question arises here, and that is what happens to other applied traits when setting the bold trait? For instance, what if a text is already italic and we set the bold trait with the next command we used earlier?</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">changedFontDescriptor <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor fontDescriptorWithSymbolicTraits<span style="color: #002200;">:</span>UIFontDescriptorTraitBold<span style="color: #002200;">&#93;</span>;</div></td></tr></tbody></table></div>
<p>What is actually happening is that this line removes all other stylistic traits, and it just applies the bold one. If you want to see that with your own eyes, then implement the <em>makeItalic:</em> IBAction method by adding the same code we added to the <em>makeBold:</em>, just remember to replace any references to bold with the respective values regarding the italic styling.</p>
<p>The point is that if you have made a selected text region italic, then if you try to do it bold as well, the italic formatting no more applies. How can we overcome this? Simply by doing the exact opposing thing from what we did in the <em>else</em> previously. Locate this line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">changedFontDescriptor <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor fontDescriptorWithSymbolicTraits<span style="color: #002200;">:</span>UIFontDescriptorTraitBold<span style="color: #002200;">&#93;</span>;</div></td></tr></tbody></table></div>
<p>and replace it with these two:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap">uint32_t existingTraitsWithNewTrait <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor symbolicTraits<span style="color: #002200;">&#93;</span> | UIFontDescriptorTraitBold;<br />
changedFontDescriptor <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor fontDescriptorWithSymbolicTraits<span style="color: #002200;">:</span>existingTraitsWithNewTrait<span style="color: #002200;">&#93;</span>;</div></td></tr></tbody></table></div>
<p>That resolves the previous problem and our IBAction method is now perfect.</p>
<p>A nice programming technique is to create methods for writing repeating code, and that&#8217;s something we&#8217;ll do right next, as the <em>makeItalic:</em> method will work just like the <em>makeBold:</em> one. Go to the private section of the interface and declare the next method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>addOrRemoveFontTraitWithName<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>traitName andValue<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>uint32_t<span style="color: #002200;">&#41;</span>traitValue;</div></td></tr></tbody></table></div>
<p>This method will accept two parameters, the only ones that change depending on the style we want to apply or remove: The trait name (such as &#8220;Bold&#8221; or &#8220;Italic&#8221;) and the trait value (such as UIFontDescriptorTraitBold or UIFontDescriptorTraitItalic). Let&#8217;s go to implement it, simply by adding all the code of the <em>makeBold:</em> method. The next code fragment displays the method completed, with any bold specific points replaced by the parameter values:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br />23<br />24<br />25<br />26<br />27<br />28<br />29<br />30<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>addOrRemoveFontTraitWithName<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span><span style="color: #002200;">&#41;</span>traitName andValue<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>uint32_t<span style="color: #002200;">&#41;</span>traitValue<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">NSRange</span> selectedRange <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>currentAttributesDict <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView.textStorage attributesAtIndex<span style="color: #002200;">:</span>selectedRange.location<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; effectiveRange<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; UIFont <span style="color: #002200;">*</span>currentFont <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>currentAttributesDict objectForKey<span style="color: #002200;">:</span>NSFontAttributeName<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; UIFontDescriptor <span style="color: #002200;">*</span>fontDescriptor <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>currentFont fontDescriptor<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a> <span style="color: #002200;">*</span>fontNameAttribute <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>fontDescriptor fontAttributes<span style="color: #002200;">&#93;</span> objectForKey<span style="color: #002200;">:</span>UIFontDescriptorNameAttribute<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; UIFontDescriptor <span style="color: #002200;">*</span>changedFontDescriptor;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#91;</span>fontNameAttribute rangeOfString<span style="color: #002200;">:</span>traitName<span style="color: #002200;">&#93;</span>.location <span style="color: #002200;">==</span> NSNotFound<span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; uint32_t existingTraitsWithNewTrait <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor symbolicTraits<span style="color: #002200;">&#93;</span> | traitValue;<br />
&nbsp; &nbsp; &nbsp; &nbsp; changedFontDescriptor <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor fontDescriptorWithSymbolicTraits<span style="color: #002200;">:</span>existingTraitsWithNewTrait<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; uint32_t existingTraitsWithoutTrait <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor symbolicTraits<span style="color: #002200;">&#93;</span> <span style="color: #002200;">&amp;</span> ~traitValue;<br />
&nbsp; &nbsp; &nbsp; &nbsp; changedFontDescriptor <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>fontDescriptor fontDescriptorWithSymbolicTraits<span style="color: #002200;">:</span>existingTraitsWithoutTrait<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; UIFont <span style="color: #002200;">*</span>updatedFont <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>UIFont fontWithDescriptor<span style="color: #002200;">:</span>changedFontDescriptor size<span style="color: #002200;">:</span><span style="color: #2400d9;">0.0</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>dict <span style="color: #002200;">=</span> @<span style="color: #002200;">&#123;</span>NSFontAttributeName<span style="color: #002200;">:</span> updatedFont<span style="color: #002200;">&#125;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage beginEditing<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage setAttributes<span style="color: #002200;">:</span>dict range<span style="color: #002200;">:</span>selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage endEditing<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>One thing has only been left, to call the method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>makeBold<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self addOrRemoveFontTraitWithName<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;Bold&quot;</span> andValue<span style="color: #002200;">:</span>UIFontDescriptorTraitBold<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>makeItalic<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self addOrRemoveFontTraitWithName<span style="color: #002200;">:</span><span style="color: #bf1d1a;">@</span><span style="color: #bf1d1a;">&quot;Italic&quot;</span> andValue<span style="color: #002200;">:</span>UIFontDescriptorTraitItalic<span style="color: #002200;">&#93;</span>; &nbsp; &nbsp;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<h2>Underline Text</h2>
<p>Underlying text is not that complex as making font bold or italic. What we actually have to do, is to check if the <em>NSUnderlineStyleAttributeName</em> attribute exists in the list of attributes of the selected text or not, and then to set the line thickness accordingly. The <em>underlineText:</em> IBAction method is not hard to be implemented, and it&#8217;s given below:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br />16<br />17<br />18<br />19<br />20<br />21<br />22<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>underlineText<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">NSRange</span> selectedRange <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>currentAttributesDict <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView.textStorage attributesAtIndex<span style="color: #002200;">:</span>selectedRange.location<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; effectiveRange<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>dict;<br />
<br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#91;</span>currentAttributesDict objectForKey<span style="color: #002200;">:</span>NSUnderlineStyleAttributeName<span style="color: #002200;">&#93;</span> <span style="color: #002200;">==</span> <span style="color: #a61390;">nil</span> ||<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span>currentAttributesDict objectForKey<span style="color: #002200;">:</span>NSUnderlineStyleAttributeName<span style="color: #002200;">&#93;</span> intValue<span style="color: #002200;">&#93;</span> <span style="color: #002200;">==</span> <span style="color: #2400d9;">0</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; dict <span style="color: #002200;">=</span> @<span style="color: #002200;">&#123;</span>NSUnderlineStyleAttributeName<span style="color: #002200;">:</span> <span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/"><span style="color: #400080;">NSNumber</span></a> numberWithInt<span style="color: #002200;">:</span><span style="color: #2400d9;">1</span><span style="color: #002200;">&#93;</span><span style="color: #002200;">&#125;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">else</span><span style="color: #002200;">&#123;</span> &nbsp; &nbsp; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; dict <span style="color: #002200;">=</span> @<span style="color: #002200;">&#123;</span>NSUnderlineStyleAttributeName<span style="color: #002200;">:</span> <span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/"><span style="color: #400080;">NSNumber</span></a> numberWithInt<span style="color: #002200;">:</span><span style="color: #2400d9;">0</span><span style="color: #002200;">&#93;</span><span style="color: #002200;">&#125;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage beginEditing<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage setAttributes<span style="color: #002200;">:</span>dict range<span style="color: #002200;">:</span>selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage endEditing<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>This feature has now been added to our superb RTF editor, so go and give it and try if you want!</p>
<h2>Setting Paragraph Alignment</h2>
<p>What we have seen until now regards text properties, but we still haven&#8217;t tried to change any paragraph attributes. As you will finally see, working with paragraphs has nothing more difficult than what we have done already. For the purposes of this tutorial, we&#8217;ll implement the three IBAction methods <em>alignTextLeft:</em>, <em>centerText:</em> and <em>alignTextRight:</em> that we have already declared and connected to the appropriate bar button items. However, prior doing so, let&#8217;s create a private method in which we&#8217;ll write code common to all these three IBAction methods.</p>
<p>Navigate yourself at the private section of the interface, and declare the following method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">@interface</span> SecondViewController <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#41;</span><br />
...<br />
<br />
<span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>setParagraphAlignment<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>NSTextAlignment<span style="color: #002200;">&#41;</span>newAlignment;<br />
<br />
<span style="color: #a61390;">@end</span></div></td></tr></tbody></table></div>
<p>The method will accept just one parameter, the desired alignment. Let&#8217;s go to its implementation now. As you will see in the next code snippet, we create a new, mutable paragraph style object (<em>NSMutableParagraphStyle</em>) that will be used to set the new text alignment, as the current paragraph style attribute is immutable. This new mutable paragraph style will be assigned to the text storage object of the text view. I think that the code speaks for itself, so here it is:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">void</span><span style="color: #002200;">&#41;</span>setParagraphAlignment<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span>NSTextAlignment<span style="color: #002200;">&#41;</span>newAlignment<span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">NSRange</span> selectedRange <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMutableParagraphStyle_Class/"><span style="color: #400080;">NSMutableParagraphStyle</span></a> <span style="color: #002200;">*</span>newParagraphStyle <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span><span style="color: #002200;">&#91;</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMutableParagraphStyle_Class/"><span style="color: #400080;">NSMutableParagraphStyle</span></a> alloc<span style="color: #002200;">&#93;</span> init<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>newParagraphStyle setAlignment<span style="color: #002200;">:</span>newAlignment<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>dict <span style="color: #002200;">=</span> @<span style="color: #002200;">&#123;</span>NSParagraphStyleAttributeName<span style="color: #002200;">:</span> newParagraphStyle<span style="color: #002200;">&#125;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage beginEditing<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage setAttributes<span style="color: #002200;">:</span>dict range<span style="color: #002200;">:</span>selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage endEditing<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>After this implementation, setting a paragraph&#8217;s alignment is as simple as the code that follows. All three IBAction methods that do this job are given together:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>alignTextLeft<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self setParagraphAlignment<span style="color: #002200;">:</span>NSTextAlignmentLeft<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>centerText<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self setParagraphAlignment<span style="color: #002200;">:</span>NSTextAlignmentCenter<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span><br />
<br />
<span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>alignTextRight<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #002200;">&#91;</span>self setParagraphAlignment<span style="color: #002200;">:</span>NSTextAlignmentRight<span style="color: #002200;">&#93;</span>;<br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<h2>Setting Text Foreground Color</h2>
<p>Until now we have gained a great level of experience in doing some working with the text storage object, therefore setting the foreground color of the selected text will look like a piece of cake. The job we have to do here is similar to the one we did for underlying text, and that means that we simply have to check in the attributes of the selected text if a foreground color has been set, and if so, to check if it matches to the color we want to apply. If it doesn&#8217;t match, then we just have to set the desired fore color to the text storage object and that&#8217;s all. Here is the implementation for the <em>makeTextColorRed:</em> IBAction method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>makeTextColorRed<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">NSRange</span> selectedRange <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>currentAttributesDict <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView.textStorage attributesAtIndex<span style="color: #002200;">:</span>selectedRange.location<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; effectiveRange<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#91;</span>currentAttributesDict objectForKey<span style="color: #002200;">:</span>NSForegroundColorAttributeName<span style="color: #002200;">&#93;</span> <span style="color: #002200;">==</span> <span style="color: #a61390;">nil</span> ||<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>currentAttributesDict objectForKey<span style="color: #002200;">:</span>NSForegroundColorAttributeName<span style="color: #002200;">&#93;</span> <span style="color: #002200;">!=</span> <span style="color: #002200;">&#91;</span>UIColor redColor<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>dict <span style="color: #002200;">=</span> @<span style="color: #002200;">&#123;</span>NSForegroundColorAttributeName<span style="color: #002200;">:</span> <span style="color: #002200;">&#91;</span>UIColor redColor<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#125;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage beginEditing<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage setAttributes<span style="color: #002200;">:</span>dict range<span style="color: #002200;">:</span>selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage endEditing<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<p>Similarly we can implement the <em>makeTextColorBlack:</em> IBAction method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br />2<br />3<br />4<br />5<br />6<br />7<br />8<br />9<br />10<br />11<br />12<br />13<br />14<br />15<br /></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">-</span> <span style="color: #002200;">&#40;</span>IBAction<span style="color: #002200;">&#41;</span>makeTextColorBlack<span style="color: #002200;">:</span><span style="color: #002200;">&#40;</span><span style="color: #a61390;">id</span><span style="color: #002200;">&#41;</span>sender <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #a61390;">NSRange</span> selectedRange <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>currentAttributesDict <span style="color: #002200;">=</span> <span style="color: #002200;">&#91;</span>_textView.textStorage attributesAtIndex<span style="color: #002200;">:</span>selectedRange.location<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; effectiveRange<span style="color: #002200;">:</span><span style="color: #a61390;">nil</span><span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <br />
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">&#40;</span><span style="color: #002200;">&#91;</span>currentAttributesDict objectForKey<span style="color: #002200;">:</span>NSForegroundColorAttributeName<span style="color: #002200;">&#93;</span> <span style="color: #002200;">==</span> <span style="color: #a61390;">nil</span> ||<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>currentAttributesDict objectForKey<span style="color: #002200;">:</span>NSForegroundColorAttributeName<span style="color: #002200;">&#93;</span> <span style="color: #002200;">!=</span> <span style="color: #002200;">&#91;</span>UIColor blackColor<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#41;</span> <span style="color: #002200;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/"><span style="color: #400080;">NSDictionary</span></a> <span style="color: #002200;">*</span>dict <span style="color: #002200;">=</span> @<span style="color: #002200;">&#123;</span>NSForegroundColorAttributeName<span style="color: #002200;">:</span> <span style="color: #002200;">&#91;</span>UIColor blackColor<span style="color: #002200;">&#93;</span><span style="color: #002200;">&#125;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage beginEditing<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage setAttributes<span style="color: #002200;">:</span>dict range<span style="color: #002200;">:</span>selectedRange<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">&#91;</span>_textView.textStorage endEditing<span style="color: #002200;">&#93;</span>;<br />
&nbsp; &nbsp; <span style="color: #002200;">&#125;</span><br />
<span style="color: #002200;">&#125;</span></div></td></tr></tbody></table></div>
<h2>Compile and Test the Final App</h2>
<p>If you haven&#8217;t done so in any of the previous steps, then this is the best time to compile and test the sample application, either in a real device, or in the Simulator. Play around while applying various text styles in the first view controller, and see how text flows around the sample image when the exclusion path is set. Also, use the second view controller and format the text, combining features and attributes.</p>
<p>The next figure displays the outcome of this tutorial.</p>
<div class="figure"><img src="http://www.appcoda.com/wp-content/uploads/2014/01/t3_18_final_sample.jpg" alt="Text Kit - Final Sample" class="aligncenter size-full wp-image-2894" /></div>
<h2>Summary</h2>
<p>Text Kit is a powerful tool, as it&#8217;s based on other powerful classes and frameworks. What we&#8217;ve seen in this tutorial only demonstrates the most important aspects of it, but someone who wants to use it even more needs to do further study on Apple documentation. Text Kit makes it really easy for developers to work with text and text containers, as well as all of their properties. Further than that, new and rich-featured apps can be can now be created with less effort to be required. If you haven&#8217;t previously worked with text or Text Kit specifically, I hope this tutorial works as a guide and it provides useful tips and ideas that can be applied to your own applications.</p>
<p>For your complete reference, you can <a href="https://dl.dropboxusercontent.com/u/2857188/TextKitDemo.zip">download the Xcode project from here</a>.</p>
<p>The copyright for all bar button images items belongs to: <a href="http://www.icons8.com" target="_blank">icons8.com</a></p>

<!-- Quick Adsense WordPress Plugin: http://quicksense.net/ -->
<div style="float:none;margin:20px 0 20px 0;text-align:center;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8501671653071605";
/* Appcoda_336_280_Ad */
google_ad_slot = "4009415334";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>

<div style="font-size:0px;height:0px;line-height:0px;margin:0;padding:0;clear:both"></div><h3>You May Like These:</h3><div style="clear: both"></div><div style="border: 0pt none ; margin: 0pt; padding: 0pt;"><a onmouseout="this.style.backgroundColor='#FFFFFF'" onmouseover="this.style.backgroundColor='#EEEEEF'" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/ios-programming-tutorial-create-a-simple-table-view-app/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2012/04/UITableView-Sample-App-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">iOS Programming Tutorial: Create a Simple Table View App</div></div></a><a onmouseout="this.style.backgroundColor='#FFFFFF'" onmouseover="this.style.backgroundColor='#EEEEEF'" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/fetch-parse-json-ios-programming-tutorial/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2013/08/json-intro-tutorial-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">How To Fetch and Parse JSON Using iOS SDK</div></div></a><a onmouseout="this.style.backgroundColor='#FFFFFF'" onmouseover="this.style.backgroundColor='#EEEEEF'" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/ios7-airdrop-programming-tutorial/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2013/10/AirDrop-Tutorial-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">Adding AirDrop File Sharing Feature to Your iOS Apps</div></div></a><a onmouseout="this.style.backgroundColor='#FFFFFF'" onmouseover="this.style.backgroundColor='#EEEEEF'" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/intro-multipeer-connectivity-framework-ios-programming/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2014/02/multipeer-connectivity-featured-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">Understanding Multipeer Connectivity Framework in iOS 7 - Part 1</div></div></a></div><div style="clear: both"></div><span class="et_social_bottom_trigger"></span><!--<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.appcoda.com/intro-text-kit-ios-programming-guide/"
    dc:identifier="http://www.appcoda.com/intro-text-kit-ios-programming-guide/"
    dc:title="Using Text Kit to Manage Text in Your iOS Apps"
    trackback:ping="http://www.appcoda.com/intro-text-kit-ios-programming-guide/trackback/" />
</rdf:RDF>-->
</div><div class="post-meta"><span class="categories">Filed Under: <a href="http://www.appcoda.com/course/" rel="category tag">Course</a>, <a href="http://www.appcoda.com/course/intermediate/" rel="category tag">Intermediate</a>, <a href="http://www.appcoda.com/tutorials/" rel="category tag">Tutorials</a></span> <span class="tags">Tagged With: <a href="http://www.appcoda.com/tag/ios-7/" rel="tag">iOS 7</a>, <a href="http://www.appcoda.com/tag/ios-programming/" rel="tag">iOS Programming</a>, <a href="http://www.appcoda.com/tag/text-kit/" rel="tag">Text Kit</a>, <a href="http://www.appcoda.com/tag/xcode-5/" rel="tag">Xcode 5</a></span></div><div class="after-post widget-area"><div id="text-8" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Get Free Chapters of Our Swift Book</h4>
			<div class="textwidget"><a href="http://www.appcoda.com/swift/"><img src="http://www.appcoda.com/wp-content/uploads/2014/10/swift-book-cover-227x300.png" alt="Beginning iOS 8 Programming with Swift" class="alignright size-medium wp-image-4153" width="200" /></a>If you want to create an app but don't know where to begin, this book covers the whole aspect of Swift programming and iOS 8 development and shows you every step from an idea to a real app on App Store. This book features a lot of hands-on exercises and projects. You will first create a simple app, then prototype an app idea, and later add some features to it in each chapter, until a real app is built. Want to learn more? <a href="http://www.appcoda.com/swift/">Check it out here and get three free chapters.</a>
</p>
<br/></div>
		</div></div>
<div id="featured-page-2" class="widget featured-content featuredpage"><div class="widget-wrap"><h4 class="widget-title widgettitle">Sign Up for our Free Tutorials</h4>
<div class="post-38 page type-page status-publish has-post-thumbnail hentry entry"><ul>
<li>Learn iOS Programming From Scratch</li>
<li>Step by Step Guide to Build Your First iPhone App</li>
<li>Complete Source Code for Your Reference</li>
<li>More Programming Tips and Tutorials to Come</li>
</ul>
<div class="enews">
<h4 class="widgettitle">Whatcha waiting for?</h4>
<form action="http://sendy.appcoda.com/sendy/subscribe" method="post" id="subscribe" name="mc-embedded-subscribe-form" class="validate" target="_blank" accept-charset="utf-8">
	<input type="email" id="subbox" value="" name="email" class="email" id="mce-EMAIL" placeholder="Enter your email address" required><input type="submit" value="Subscribe" name="subscribe" id="subbutton" class="button"><br />
	<input type="hidden" name="list" value="KEdC8BeT8EC8znOnfjSQAw"/><br />
</form>
</div>
</div></div></div>
</div></div><div class="author-box"><div><img alt='' src='http://2.gravatar.com/avatar/582c964c3dafd700a4df627225d859fe?s=70&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/582c964c3dafd700a4df627225d859fe?s=140&amp;d=mm&amp;r=g 2x' class='avatar avatar-70 photo' height='70' width='70' /> <strong>About Gabriel Theodoropoulos</strong><br /><p>Gabriel has been a software developer for about two decades. He has long experience in developing software solutions for various platforms in many programming languages. Since middle-2010 he has been developing almost exclusively for iOS. Tutorials consist of the best way to share knowledge with people all over the world. Follow Gabriel at <a href="http://plus.google.com/+gabrieltheodoropoulos">Google+</a> and <a href="https://twitter.com/gabtheodor">Twitter</a>.</p>
</div></div>
<div id="disqus_thread">
            <div id="dsq-content">


            <ul id="dsq-comments">
                    <li class="comment even thread-even depth-1" id="dsq-comment-3255">
        <div id="dsq-comment-header-3255" class="dsq-comment-header">
            <cite id="dsq-cite-3255">
                <span id="dsq-author-user-3255">Baljeet Singh</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3255" class="dsq-comment-body">
            <div id="dsq-comment-message-3255" class="dsq-comment-message"><p>great Tutorial</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-3257">
        <div id="dsq-comment-header-3257" class="dsq-comment-header">
            <cite id="dsq-cite-3257">
                <span id="dsq-author-user-3257">Gabriel Thedoropoulos</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3257" class="dsq-comment-body">
            <div id="dsq-comment-message-3257" class="dsq-comment-message"><p>Thanks a lot!</p>
<p>Hope it helps you!</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-3303">
        <div id="dsq-comment-header-3303" class="dsq-comment-header">
            <cite id="dsq-cite-3303">
                <span id="dsq-author-user-3303">Сергей Герасименко</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3303" class="dsq-comment-body">
            <div id="dsq-comment-message-3303" class="dsq-comment-message"><p>text scrolling NOT working</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-3427">
        <div id="dsq-comment-header-3427" class="dsq-comment-header">
            <cite id="dsq-cite-3427">
                <span id="dsq-author-user-3427">Сергей Герасименко</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3427" class="dsq-comment-body">
            <div id="dsq-comment-message-3427" class="dsq-comment-message"><p>Great Tutorial, but Scrolling text does not work, you could not help with this problem ???!!!</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-2" id="dsq-comment-3434">
        <div id="dsq-comment-header-3434" class="dsq-comment-header">
            <cite id="dsq-cite-3434">
                <span id="dsq-author-user-3434">Gabriel Thedoropoulos</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3434" class="dsq-comment-body">
            <div id="dsq-comment-message-3434" class="dsq-comment-message"><p>Hi,<br />
Thanks a lot. What exactly do you mean? If you&#8217;re talking about the text view on the second view controller, then I should tell that the scrolling works only when there is text out of the visible area of the screen, and not when it&#8217;s behind the keyboard.</p>
<p>If that&#8217;s your case, then you could resize the text view so its height becomes equal to the available area&#8217;s height when the keyboard appears. Note that you should observe for the UIKeyboardDidShowNotification.</p>
<p>Alternatively, if you wouldn&#8217;t like to resize the text view, you could force a scrolling using either the -scrollRectToVisible- or -scrollRangeToVisible-, depending on what best works on you when the keyboard is shown. Look more in the documentation about them.</p>
<p>I hope that helps you.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-3598">
        <div id="dsq-comment-header-3598" class="dsq-comment-header">
            <cite id="dsq-cite-3598">
                <span id="dsq-author-user-3598">JuanM</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3598" class="dsq-comment-body">
            <div id="dsq-comment-message-3598" class="dsq-comment-message"><p>Awesome tutorial of Text Kit, but got a question: How do I save the attributes of the text view to see it after I close the app? In my case, I created a  table view controller that segues with a view controller where you can create text and modify its attributes using the rtf editor explained before. So the question is: How do I save the attributes of a text view? Considering that attributes are implied by specific ranges of text.<br />
Thanks a lot!</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-3654">
        <div id="dsq-comment-header-3654" class="dsq-comment-header">
            <cite id="dsq-cite-3654">
http://creativeappgroup.com                <span id="dsq-author-user-3654">Marc N Watson</span>
            </cite>
        </div>
        <div id="dsq-comment-body-3654" class="dsq-comment-body">
            <div id="dsq-comment-message-3654" class="dsq-comment-message"><p>Really appreciate your time on this tutorial. Finally! I can put in features that I have wanted in my app since the beginning without having to deal with CoreText!<br />
Couple of things with the tutorial&#8230; size of the font changes when using the Underline or the colors. Got a fix for that?<br />
Also, what if a user wanted Bold Italic Underline Red text? Not possible with current setup. Any ideas?<br />
Regardless&#8230; thanks for your time on this. Learned a lot.</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-11490">
        <div id="dsq-comment-header-11490" class="dsq-comment-header">
            <cite id="dsq-cite-11490">
                <span id="dsq-author-user-11490">DominikB</span>
            </cite>
        </div>
        <div id="dsq-comment-body-11490" class="dsq-comment-body">
            <div id="dsq-comment-message-11490" class="dsq-comment-message"><p>I have found a workaround to prevent the size change. First of all, I have written a helper method for both Red and Black with (UIColor *) color as parameter. Then I have added this code block that extracts the font-size from the  current font&#8217;s font descriptor. Then it &#8220;updates&#8221; the font size. </p>
<p>  UIFont *currentFont = [currentAttributesDict objectForKey:NSFontAttributeName];</p>
<p>        NSLog(@&#8221;currentFont: %@&#8221;, currentFont);</p>
<p>        UIFontDescriptor *fontDescriptor = [currentFont fontDescriptor];</p>
<p>        NSString *fontSizeAttribute = [[fontDescriptor fontAttributes] objectForKey:UIFontDescriptorSizeAttribute];</p>
<p>         float fontSize = (float)[fontSizeAttribute floatValue];</p>
<p>       UIFont *updatedFont =  [UIFont fontWithName:[currentFont fontName] size:fontSize];</p>
<p>Important: before finally setting the new  attribute dictionary to the textStorage property you need to add the NSFontAttributeName (along with the colour of course):</p>
<p>NSDictionary *dict = @{NSForegroundColorAttributeName: color, NSFontAttributeName: updatedFont};</p>
</div>
        </div>

    <ul class="children">
    <li class="comment even depth-3" id="dsq-comment-11491">
        <div id="dsq-comment-header-11491" class="dsq-comment-header">
            <cite id="dsq-cite-11491">
                <span id="dsq-author-user-11491">DominikB</span>
            </cite>
        </div>
        <div id="dsq-comment-body-11491" class="dsq-comment-body">
            <div id="dsq-comment-message-11491" class="dsq-comment-message"><p>It&#8217;s not very elegant&#8230; I know, but it does the trick&#8230;<br />
If anyone has a shorter and better solution, please let me know!!!<br />
Important: setting the size to 0.0 (which should leave it unchanged!) makes the selected text disappear&#8230;  I think I&#8217;ve got a lot to learn about TextKit&#8230;</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-4" id="dsq-comment-64364">
        <div id="dsq-comment-header-64364" class="dsq-comment-header">
            <cite id="dsq-cite-64364">
                <span id="dsq-author-user-64364">Tristan Warner-Smith</span>
            </cite>
        </div>
        <div id="dsq-comment-body-64364" class="dsq-comment-body">
            <div id="dsq-comment-message-64364" class="dsq-comment-message"><p>Swift code but the solution is universal.<br />
//Just start your dictionary with all the previous attributes, you&#8217;re only toggling a single key after all, that way you lose nothing and don&#8217;t have to manually recreate anything..</p>
<p>var dict : NSMutableDictionary = NSMutableDictionary(dictionary: currentAttributesDict)</p>
<p>        if (currentAttributesDict[underlineAttributeName] == nil || currentAttributesDict[underlineAttributeName]?.integerValue == 0) {<br />
    dict.setObject(1, forKey:underlineAttributeName)<br />
        }<br />
        else{<br />
    dict.setObject(0, forKey:underlineAttributeName)<br />
        }</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-11515">
        <div id="dsq-comment-header-11515" class="dsq-comment-header">
            <cite id="dsq-cite-11515">
                <span id="dsq-author-user-11515">DominikB</span>
            </cite>
        </div>
        <div id="dsq-comment-body-11515" class="dsq-comment-body">
            <div id="dsq-comment-message-11515" class="dsq-comment-message"><p>If the user just wants to write a new text into an empty textview, it is not possible to change the font property before typing the text (like in any other RTF editor. Changing these text decorations only works with selected text. Does anyone have an idea how to fix this?</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment odd alt thread-even depth-1" id="dsq-comment-13298">
        <div id="dsq-comment-header-13298" class="dsq-comment-header">
            <cite id="dsq-cite-13298">
                <span id="dsq-author-user-13298">UlliH</span>
            </cite>
        </div>
        <div id="dsq-comment-body-13298" class="dsq-comment-body">
            <div id="dsq-comment-message-13298" class="dsq-comment-message"><p>Indeed a very usefull tutorial!</p>
<p>But i have the same  Text Kit-question as JuanM:<br />
How do I save the attributes of the text view to see it after I close the app? </p>
<p>Any ideas? Please help me&#8230; Many TIA</p>
</div>
        </div>

    </li><!-- #comment-## -->
    <li class="comment even thread-odd thread-alt depth-1" id="dsq-comment-15554">
        <div id="dsq-comment-header-15554" class="dsq-comment-header">
            <cite id="dsq-cite-15554">
                <span id="dsq-author-user-15554">UlliH</span>
            </cite>
        </div>
        <div id="dsq-comment-body-15554" class="dsq-comment-body">
            <div id="dsq-comment-message-15554" class="dsq-comment-message"><p>meanwhile I´ve found two problems:</p>
<p>&#8211; UIFontDescriptor *fontDescriptor = [currentFont fontDescriptor] returns nil, when i use Dynamic Types<br />
&#8211; when i.e. setting a word to bold, news letters append behind this also get bold</p>
<p>Can anyone help me???</p>
</div>
        </div>

    <ul class="children">
    <li class="comment odd alt depth-2" id="dsq-comment-97726">
        <div id="dsq-comment-header-97726" class="dsq-comment-header">
            <cite id="dsq-cite-97726">
                <span id="dsq-author-user-97726">shivam</span>
            </cite>
        </div>
        <div id="dsq-comment-body-97726" class="dsq-comment-body">
            <div id="dsq-comment-message-97726" class="dsq-comment-message"><p>set textview property to attributed.</p>
<p>and font to Helvetica Neue.</p>
</div>
        </div>

    </li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
    <li class="comment even thread-even depth-1" id="dsq-comment-84697">
        <div id="dsq-comment-header-84697" class="dsq-comment-header">
            <cite id="dsq-cite-84697">
                <span id="dsq-author-user-84697">teuts</span>
            </cite>
        </div>
        <div id="dsq-comment-body-84697" class="dsq-comment-body">
            <div id="dsq-comment-message-84697" class="dsq-comment-message"><p>hi there! Are you planning to remake this tutorial with Swift by any chance&#8230;? (Say yes say yes say yes!), Good work anyway, and very nice books!</p>
</div>
        </div>

    </li><!-- #comment-## -->
            </ul>


        </div>

    </div>

<script type="text/javascript">
var disqus_url = 'http://www.appcoda.com/intro-text-kit-ios-programming-guide/';
var disqus_identifier = '2871 http://www.appcoda.com/?p=2871';
var disqus_container_id = 'disqus_thread';
var disqus_shortname = 'appcoda';
var disqus_title = "Using Text Kit to Manage Text in Your iOS Apps";
var disqus_config_custom = window.disqus_config;
var disqus_config = function () {
    /*
    All currently supported events:
    onReady: fires when everything is ready,
    onNewComment: fires when a new comment is posted,
    onIdentify: fires when user is authenticated
    */
    
    
    this.language = '';
        this.callbacks.onReady.push(function () {

        // sync comments in the background so we don't block the page
        var script = document.createElement('script');
        script.async = true;
        script.src = '?cf_action=sync_comments&post_id=2871';

        var firstScript = document.getElementsByTagName('script')[0];
        firstScript.parentNode.insertBefore(script, firstScript);
    });
    
    if (disqus_config_custom) {
        disqus_config_custom.call(this);
    }
};

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>

</div><div id="sidebar" class="sidebar widget-area"><div id="search-4" class="widget widget_search"><div class="widget-wrap"><form role="search" method="get" id="searchform" class="searchform" action="http://www.appcoda.com/" >
                    <div><label class="screen-reader-text" for="s">Search for:</label>
                    <input type="text" value="" name="s" id="s" />
                    <input type="submit" id="searchsubmit" value="Search" />
                    </div>
                    </form></div></div>
<div id="text-2" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Sign Up for Our Free Tutorials</h4>
			<div class="textwidget"><div class="enews"><form action="http://sendy.appcoda.com/sendy/subscribe" method="post" id="subscribe" name="mc-embedded-subscribe-form" class="validate" target="_blank" accept-charset="utf-8">
	<input type="email" id="subbox" value="" name="email" class="email" id="mce-EMAIL" placeholder="Enter your email address" required><input type="submit" value="Subscribe" name="subscribe" id="subbutton" class="button">
	<input type="hidden" name="list" value="KEdC8BeT8EC8znOnfjSQAw"/>
</form>
</div></div>
		</div></div>
<div id="text-6" class="widget widget_text"><div class="widget-wrap">			<div class="textwidget"><!-- BuySellAds Zone Code -->
<div id="bsap_1283996" class="bsarocks bsap_459a84cf8fa0d5ea9dccfcfd1c3531e0"></div>
<!-- End BuySellAds Zone Code --></div>
		</div></div>
<div id="text-4" class="widget widget_text"><div class="widget-wrap">			<div class="textwidget"><div class="fb-like-box" data-href="http://www.facebook.com/appcodamobile" data-width="300" data-height="260" data-show-faces="true" data-border-color="#F1F1F1" data-stream="false" data-header="false"></div></div>
		</div></div>
		<div id="recent-posts-3" class="widget widget_recent_entries"><div class="widget-wrap">		<h4 class="widget-title widgettitle">Recent Posts</h4>
		<ul>
					<li>
				<a href="http://www.appcoda.com/react-native-introduction/">Introduction to React Native: Building iOS Apps with JavaScript</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/cloudkit-introduction-tutorial/">Working with CloudKit in iOS 8</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/instagram-app-parse-swift/">Building an Instagram-Like App with Parse and Swift</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/google-maps-api-tutorial/">A Swift Tutorial for Google Maps SDK</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/ios8-share-extension-swift/">Building a Simple Share Extension in iOS 8 App</a>
						</li>
				</ul>
		</div></div>
<div id="wp_insert_ad_widget-3" class="widget widget_wp_insert_ad_widget"><div class="widget-wrap"><div class="wpInsert wpInsertAdWidget" style="margin: 5px; padding: 0px;"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Premium Large Skyscraper -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:600px"
     data-ad-client="ca-pub-8501671653071605"
     data-ad-slot="6120307730"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></div></div>
<div id="nav_menu-3" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Connect With Us</h4>
<div class="menu-sidebar-container"><ul id="menu-sidebar" class="menu"><li id="menu-item-57" class="social-twitter menu-item menu-item-type-custom menu-item-object-custom menu-item-57"><a href="http://twitter.com/appcodamobile">Twitter</a></li>
<li id="menu-item-58" class="social-facebook menu-item menu-item-type-custom menu-item-object-custom menu-item-58"><a href="http://facebook.com/appcodamobile">Facebook</a></li>
<li id="menu-item-59" class="social-rss menu-item menu-item-type-custom menu-item-object-custom menu-item-59"><a href="http://feeds.feedburner.com/appcoda">RSS</a></li>
<li id="menu-item-68" class="social-plus menu-item menu-item-type-custom menu-item-object-custom menu-item-68"><a href="https://plus.google.com/b/118438564257465271998/">Google Plus</a></li>
</ul></div></div></div>
</div></div></div></div><div id="footer-widgets" class="footer-widgets"><div class="wrap"><div class="footer-widgets-1 widget-area"><div id="nav_menu-4" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">About AppCoda</h4>
<div class="menu-default-container"><ul id="menu-default-1" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a href="http://www.appcoda.com/about/">About</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-28"><a href="http://www.appcoda.com/tutorials/">Tutorials</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-530"><a href="http://www.appcoda.com/ios-programming-course/">Course</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3045"><a title="Swift Programming Book for iOS 8" href="http://www.appcoda.com/swift">Book</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2140"><a href="http://www.appcoda.com/ios-app-kit/ios-game-kit.html">Game Kit</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-710"><a href="http://www.appcoda.com/marketplace/">Marketplace</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-34"><a href="http://www.appcoda.com/contact/">Contact</a></li>
</ul></div></div></div>
</div><div class="footer-widgets-2 widget-area"><div id="text-9" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Get Our New Book</h4>
			<div class="textwidget"><a href="http://www.appcoda.com/swift/"><img src="http://www.appcoda.com/wp-content/uploads/2014/10/swift-book-cover-227x300.png" alt="Beginning iOS 8 Programming with Swift" class="alignleft size-medium wp-image-4153" /></a></div>
		</div></div>
</div><div class="footer-widgets-3 widget-area"><div id="nav_menu-5" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Connect With Us</h4>
<div class="menu-sidebar-container"><ul id="menu-sidebar-1" class="menu"><li class="social-twitter menu-item menu-item-type-custom menu-item-object-custom menu-item-57"><a href="http://twitter.com/appcodamobile">Twitter</a></li>
<li class="social-facebook menu-item menu-item-type-custom menu-item-object-custom menu-item-58"><a href="http://facebook.com/appcodamobile">Facebook</a></li>
<li class="social-rss menu-item menu-item-type-custom menu-item-object-custom menu-item-59"><a href="http://feeds.feedburner.com/appcoda">RSS</a></li>
<li class="social-plus menu-item menu-item-type-custom menu-item-object-custom menu-item-68"><a href="https://plus.google.com/b/118438564257465271998/">Google Plus</a></li>
</ul></div></div></div>
<div id="text-3" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Email Newsletter</h4>
			<div class="textwidget"><p>Sign up to receive free tutorial and
to hear what's going on with AppCoda!</p>
<div class="enews"><form action="http://sendy.appcoda.com/sendy/subscribe" method="post" id="subscribe" name="mc-embedded-subscribe-form" class="validate" target="_blank" accept-charset="utf-8">
	<input type="email" id="subbox" value="" name="email" class="email" id="mce-EMAIL" placeholder="Enter your email address" required><input type="submit" value="Subscribe" name="subscribe" id="subbutton" class="button">
	<input type="hidden" name="list" value="KEdC8BeT8EC8znOnfjSQAw"/>
</form>
</div></div>
		</div></div>
</div></div></div><div id="footer" class="footer"><div class="wrap">    <p>&copy; Copyright 2015 <a href="http://appcoda.com/">AppCoda</a> &middot; All Rights Reserved &middot; Powered by <a href="http://wordpress.org/">WordPress &middot; <a href="http://www.appcoda.com/privacy-policy">Privacy Policy</a> &middot; <a href="http://www.appcoda.com/terms-of-service/">Terms of Service</a></p>
    </div></div></div><!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
<script src="/prismjs/prism.js"></script>        <script type="text/javascript">
        // <![CDATA[
        var disqus_shortname = 'appcoda';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('data-dsqidentifier'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) { url = url[0]; }
                    else { url = url[1]; }
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script'); 
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        // ]]>
        </script>
                    <!-- Version: 0.3.3 -->
            <script type="text/javascript">
                var EjSocialSlideoutJsApi_Settings =
                {
                    SliderImage: "<img width=\"150\" height=\"150\" src=\"http:\/\/www.appcoda.com\/wp-content\/uploads\/2015\/04\/appcoda-300-150x150.png\" class=\"attachment-thumbnail\" alt=\"appcoda-300\" \/>",
                    SocialProfiles: {"Facebook":{"Name":"Facebook","NetworkId":"Facebook","IsActive":true,"Id":"appcodamobile","Title":"Follow Us on Facebook","Description":"And get free tutorial updates"},"Twitter":{"Name":"Twitter","NetworkId":"Twitter","IsActive":true,"Id":"appcodamobile","Title":"Follow Us on Twitter","Description":"And get free tutorial updates"}},
                    Preview: false
                                    };

                if (typeof (EjSocialSlideoutJsApi) !== "undefined")
                    EjSocialSlideoutJsApi.SettingsLoaded(EjSocialSlideoutJsApi_Settings);
            </script>
            <div id='ej-ss-slideout-dom-templates' style='display:none'><div id='ej-ss-slideout-dom-template-facebook'><div class='fb-follow' data-href='https://www.facebook.com/appcodamobile' data-width='210' data-colorscheme='light' data-layout='standard' data-show-faces='true'></div></div><div id='ej-ss-slideout-dom-template-twitter'><a href='https://twitter.com/appcodamobile' class='twitter-follow-button' data-show-count='true' data-size='medium'>Follow @appcodamobile</a></div></div><div class="et_social_sidebar_networks et_social_visible_sidebar et_social_slideright et_social_animated et_social_rectangle et_social_sidebar_flip et_social_sidebar_withcounts et_social_withtotalcount et_social_mobile_off">
					<div class="et_social_totalcount et_social_dark">
							<span class="et_social_totalcount_count et_social_total_share" data-post_id="2871"></span>
							<span class="et_social_totalcount_label">Shares</span>
						</div>
					<ul class="et_social_icons_container"><li class="et_social_facebook">
									<a href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.appcoda.com%2Fintro-text-kit-ios-programming-guide%2F&#038;t=Using%20Text%20Kit%20to%20Manage%20Text%20in%20Your%20iOS%20Apps" class="et_social_share" rel="nofollow" data-social_name="facebook" data-post_id="2871" data-social_type="share">
										<i class="et_social_icon et_social_icon_facebook"></i>
										
										<div class="et_social_count"><span>44</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li><li class="et_social_twitter">
									<a href="http://twitter.com/share?text=Using%20Text%20Kit%20to%20Manage%20Text%20in%20Your%20iOS%20Apps&#038;url=http%3A%2F%2Fwww.appcoda.com%2Fintro-text-kit-ios-programming-guide%2F&#038;via=appcodamobile" class="et_social_share" rel="nofollow" data-social_name="twitter" data-post_id="2871" data-social_type="share">
										<i class="et_social_icon et_social_icon_twitter"></i>
										
										<div class="et_social_count"><span>13</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li><li class="et_social_googleplus">
									<a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.appcoda.com%2Fintro-text-kit-ios-programming-guide%2F&#038;t=Using%20Text%20Kit%20to%20Manage%20Text%20in%20Your%20iOS%20Apps" class="et_social_share" rel="nofollow" data-social_name="googleplus" data-post_id="2871" data-social_type="share">
										<i class="et_social_icon et_social_icon_googleplus"></i>
										
										<div class="et_social_count"><span>8</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li><li class="et_social_linkedin">
									<a href="http://www.linkedin.com/shareArticle?mini=true&#038;url=http%3A%2F%2Fwww.appcoda.com%2Fintro-text-kit-ios-programming-guide%2F&#038;title=Using%20Text%20Kit%20to%20Manage%20Text%20in%20Your%20iOS%20Apps" class="et_social_share" rel="nofollow" data-social_name="linkedin" data-post_id="2871" data-social_type="share">
										<i class="et_social_icon et_social_icon_linkedin"></i>
										
										<div class="et_social_count"><span>1</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li></ul>
					<span class="et_social_hide_sidebar et_social_icon"></span>
				</div><div class="et_social_flyin et_social_resize et_social_flyin_bottom_right et_social_slideup et_social_trigger_bottom et_social_mobile_on">
					<a href="#" class="et_social_icon et_social_icon_cancel"></a>
					<div class="et_social_header">
						<h3>Share This</h3>
						<p>Share this post with your friends!</p>
					</div>
					<div class="et_social_networks et_social_2col et_social_slide et_social_rectangle et_social_left et_social_withnetworknames">
						
						<ul class="et_social_icons_container"><li class="et_social_facebook"><a href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.appcoda.com%2Fintro-text-kit-ios-programming-guide%2F&#038;t=Using%20Text%20Kit%20to%20Manage%20Text%20in%20Your%20iOS%20Apps" class="et_social_share" rel="nofollow" data-social_name="facebook" data-post_id="2871" data-social_type="share"><i class="et_social_icon et_social_icon_facebook"></i><div class="et_social_network_label"><div class="et_social_networkname">Facebook</div></div><span class="et_social_overlay"></span></a></li><li class="et_social_twitter"><a href="http://twitter.com/share?text=Using%20Text%20Kit%20to%20Manage%20Text%20in%20Your%20iOS%20Apps&#038;url=http%3A%2F%2Fwww.appcoda.com%2Fintro-text-kit-ios-programming-guide%2F&#038;via=appcodamobile" class="et_social_share" rel="nofollow" data-social_name="twitter" data-post_id="2871" data-social_type="share"><i class="et_social_icon et_social_icon_twitter"></i><div class="et_social_network_label"><div class="et_social_networkname">Twitter</div></div><span class="et_social_overlay"></span></a></li><li class="et_social_googleplus"><a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.appcoda.com%2Fintro-text-kit-ios-programming-guide%2F&#038;t=Using%20Text%20Kit%20to%20Manage%20Text%20in%20Your%20iOS%20Apps" class="et_social_share" rel="nofollow" data-social_name="googleplus" data-post_id="2871" data-social_type="share"><i class="et_social_icon et_social_icon_googleplus"></i><div class="et_social_network_label"><div class="et_social_networkname">Google+</div></div><span class="et_social_overlay"></span></a></li><li class="et_social_linkedin"><a href="http://www.linkedin.com/shareArticle?mini=true&#038;url=http%3A%2F%2Fwww.appcoda.com%2Fintro-text-kit-ios-programming-guide%2F&#038;title=Using%20Text%20Kit%20to%20Manage%20Text%20in%20Your%20iOS%20Apps" class="et_social_share" rel="nofollow" data-social_name="linkedin" data-post_id="2871" data-social_type="share"><i class="et_social_icon et_social_icon_linkedin"></i><div class="et_social_network_label"><div class="et_social_networkname">LinkedIn</div></div><span class="et_social_overlay"></span></a></li></ul>
					</div>
				</div><span></span><style type="text/css" class="fluid-images">img{max-width:100%;height:auto;}</style><div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script><script type='text/javascript'>
/* <![CDATA[ */
var mejsL10n = {"language":"en-US","strings":{"Close":"Close","Fullscreen":"Fullscreen","Download File":"Download File","Download Video":"Download Video","Play\/Pause":"Play\/Pause","Mute Toggle":"Mute Toggle","None":"None","Turn off Fullscreen":"Turn off Fullscreen","Go Fullscreen":"Go Fullscreen","Unmute":"Unmute","Mute":"Mute","Captions\/Subtitles":"Captions\/Subtitles"}};
var _wpmejsSettings = {"pluginPath":"\/wp-includes\/js\/mediaelement\/"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.appcoda.com/wp-includes/js/mediaelement/mediaelement-and-player.min.js?ver=2.16.2'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-includes/js/mediaelement/wp-mediaelement.js?ver=4.2.1'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/contact-form-7/includes/js/jquery.form.min.js?ver=3.51.0-2014.06.20'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/www.appcoda.com\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Sending ...","cached":"1"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=4.1.2'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/monarch/js/idle-timer.min.js?ver=1.2.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var monarchSettings = {"ajaxurl":"http:\/\/www.appcoda.com\/wp-admin\/admin-ajax.php","pageurl":"http:\/\/www.appcoda.com\/intro-text-kit-ios-programming-guide\/","stats_nonce":"3c279d6f27","share_counts":"41afbcf48b","follow_counts":"80583e3ade","total_counts":"861aff4fd8","media_single":"ed7cd3edd6","media_total":"e88d48f2ea","generate_all_window_nonce":"6da8221303","no_img_message":"No images available for sharing on this page"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/plugins/monarch/js/custom.js?ver=1.2.2'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-includes/js/comment-reply.min.js?ver=4.2.1'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/themes/genesis/lib/js/menu/superfish.min.js?ver=1.7.4'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/themes/genesis/lib/js/menu/superfish.args.min.js?ver=2.1.2'></script>
<script type='text/javascript' src='http://www.appcoda.com/wp-content/themes/genesis/lib/js/menu/superfish.compat.min.js?ver=2.1.2'></script>
</body>
</html>

<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Page Caching using disk: enhanced

 Served from: www.appcoda.com @ 2015-05-04 12:50:58 by W3 Total Cache -->