<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0048)http://www.appcoda.com/google-maps-api-tutorial/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US" class="wf-montserrat7cbreeserif7copensans-n4-inactive wf-inactive"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>A Swift Tutorial for Google Maps SDK on iOS</title><link href="http://www.appcoda.com/prismjs/prism.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- This site is optimized with the Yoast WordPress SEO plugin v2.1.1 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="This Swift programming tutorial shows you how to integrate your app with Google Maps SDK on iOS. You&#39;ll learn how to annotate a specific location and draw routes.">
<link rel="canonical" href="./A Swift Tutorial for Google Maps SDK on iOS_files/A Swift Tutorial for Google Maps SDK on iOS.html">
<meta name="twitter:card" content="summary">
<meta name="twitter:description" content="This Swift programming tutorial shows you how to integrate your app with Google Maps SDK on iOS. You&#39;ll learn how to annotate a specific location and draw routes.">
<meta name="twitter:title" content="A Swift Tutorial for Google Maps SDK on iOS">
<meta name="twitter:site" content="@appcodamobile">
<meta name="twitter:domain" content="AppCoda">
<meta name="twitter:image:src" content="http://www.appcoda.com/wp-content/uploads/2015/04/googlemapios-1024x576.jpg">
<meta name="twitter:creator" content="@appcodamobile">
<script async="" src="./A Swift Tutorial for Google Maps SDK on iOS_files/saved_resource"></script><script id="facebook-jssdk" src="./A Swift Tutorial for Google Maps SDK on iOS_files/all.js"></script><script async="" type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/ca-pub-8501671653071605.js"></script><script type="text/javascript" async="" src="./A Swift Tutorial for Google Maps SDK on iOS_files/ga.js"></script><script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"WebSite","url":"http:\/\/www.appcoda.com\/","name":"AppCoda"}</script>
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="AppCoda » Feed" href="http://feeds.feedburner.com/appcoda">
<link rel="alternate" type="application/rss+xml" title="AppCoda » Comments Feed" href="http://www.appcoda.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="AppCoda » A Swift Tutorial for Google Maps SDK Comments Feed" href="http://www.appcoda.com/google-maps-api-tutorial/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.appcoda.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.1"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f;c.supports={simple:d("simple"),flag:d("flag")},c.supports.simple&&c.supports.flag||(f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./A Swift Tutorial for Google Maps SDK on iOS_files/wp-emoji-release.min.js" type="text/javascript"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="mediaelement-css" href="./A Swift Tutorial for Google Maps SDK on iOS_files/mediaelementplayer.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-mediaelement-css" href="./A Swift Tutorial for Google Maps SDK on iOS_files/wp-mediaelement.css" type="text/css" media="all">
<link rel="stylesheet" id="eleven40-theme-css" href="./A Swift Tutorial for Google Maps SDK on iOS_files/style.css" type="text/css" media="all">
<link rel="stylesheet" id="contact-form-7-css" href="./A Swift Tutorial for Google Maps SDK on iOS_files/styles.css" type="text/css" media="all">
<link rel="stylesheet" id="ej-socialslideout-content-style-css" href="./A Swift Tutorial for Google Maps SDK on iOS_files/slideout.css" type="text/css" media="all">
<link rel="stylesheet" id="et_monarch-open-sans-css" href="./A Swift Tutorial for Google Maps SDK on iOS_files/css" type="text/css" media="all">
<link rel="stylesheet" id="et_monarch-css-css" href="./A Swift Tutorial for Google Maps SDK on iOS_files/style(1).css" type="text/css" media="all">
<link rel="stylesheet" id="codecolorer-css" href="./A Swift Tutorial for Google Maps SDK on iOS_files/codecolorer.css" type="text/css" media="screen">
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/jquery.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/jquery-migrate.min.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/fluidimage.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/slideout.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/api.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/iframeResizer.min.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/iframeResizer.contentWindow.min.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.appcoda.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.appcoda.com/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 4.2.1">
<link rel="shortlink" href="http://www.appcoda.com/?p=5324">
<style type="text/css" id="et-social-custom-css">
				 
			</style><link rel="Shortcut Icon" href="http://www.appcoda.com/wp-content/themes/eleven40/images/favicon.ico" type="image/x-icon">
<link rel="pingback" href="http://www.appcoda.com/xmlrpc.php">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-223304-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><script type="text/javascript" async="" src="./A Swift Tutorial for Google Maps SDK on iOS_files/embed.js"></script><script type="text/javascript" async="" src="./A Swift Tutorial for Google Maps SDK on iOS_files/bsa.js"></script><script async="" type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/count.js"></script><script type="text/javascript" id="_bsap_js_459a84cf8fa0d5ea9dccfcfd1c3531e0" src="./A Swift Tutorial for Google Maps SDK on iOS_files/s_459a84cf8fa0d5ea9dccfcfd1c3531e0.js" async="async"></script><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Montserrat%7CBree+Serif%7COpen+Sans"><script async="" src="./A Swift Tutorial for Google Maps SDK on iOS_files/count-data.js"></script><script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/pro.js" id="_bsap_premium_pro"></script><script type="text/javascript" id="_bsaPRO_js" src="./A Swift Tutorial for Google Maps SDK on iOS_files/saved_resource(1)" async="async"></script><style type="text/css">.fancybox-margin{margin-right:0px;}</style><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(http://static.ak.fbcdn.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f8;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3a5795;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{max-height:590px;min-height:590px;max-width:500px;min-width:500px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #2f477a;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f8;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(http://static.ak.fbcdn.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style><script src="./A Swift Tutorial for Google Maps SDK on iOS_files/alfie.f51946af45e0b561c60f768335c9eb79.js" async="" charset="UTF-8"></script></head>
<body class="single single-post postid-5324 single-format-standard et_monarch header-image content-sidebar"><div id="wrap"><div id="header"><div class="wrap"><div id="title-area"><p id="title"><a href="http://www.appcoda.com/">AppCoda</a></p><p id="description">Your iOS Programming Community</p></div><div class="widget-area header-widget-area"><div id="nav_menu-2" class="widget widget_nav_menu"><div class="widget-wrap"><div class="menu-default-container"><ul id="menu-default" class="menu genesis-nav-menu js-superfish sf-js-enabled sf-arrows"><li id="menu-item-26" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a href="http://www.appcoda.com/about/">About</a></li>
<li id="menu-item-28" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-28"><a href="http://www.appcoda.com/tutorials/">Tutorials</a></li>
<li id="menu-item-530" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-530"><a href="http://www.appcoda.com/ios-programming-course/">Course</a></li>
<li id="menu-item-3045" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3045"><a title="Swift Programming Book for iOS 8" href="http://www.appcoda.com/swift">Book</a></li>
<li id="menu-item-2140" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2140"><a href="http://www.appcoda.com/ios-app-kit/ios-game-kit.html">Game Kit</a></li>
<li id="menu-item-710" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-710"><a href="http://www.appcoda.com/marketplace/">Marketplace</a></li>
<li id="menu-item-34" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-34"><a href="http://www.appcoda.com/contact/">Contact</a></li>
</ul></div></div></div>
</div></div></div><div id="inner"><div class="wrap"><script async="" src="./A Swift Tutorial for Google Maps SDK on iOS_files/adsbygoogle.js"></script>
<!-- Leaderboard Responsive Ad -->
<ins class="adsbygoogle" style="display: block; height: 90px;" data-ad-client="ca-pub-8501671653071605" data-ad-slot="1756840139" data-ad-format="auto" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:1140px;background-color:transparent"><ins id="aswift_1_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:1140px;background-color:transparent"><iframe width="1140" height="90" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script><div id="content-sidebar-wrap"><div id="content" class="hfeed"><div class="post-5324 post type-post status-publish format-standard hentry category-course category-intermediate category-swift-2 category-tutorials tag-apple-maps tag-google-maps tag-ios-programming tag-swift entry"><h1 class="entry-title">A Swift Tutorial for Google Maps SDK</h1> 
<div class="post-info"><span class="date published time" title="2015-04-09T11:17:00+00:00">April 9, 2015</span>  by <span class="author vcard"><span class="fn"><a href="http://www.appcoda.com/author/gabrielth/" rel="author">Gabriel Theodoropoulos</a></span></span> <span class="post-comments"><a href="http://www.appcoda.com/google-maps-api-tutorial/#disqus_thread" data-disqus-identifier="5324 http://www.appcoda.com/?p=5324">10 Comments</a></span> </div><div class="entry-content">
<!-- Quick Adsense WordPress Plugin: http://quicksense.net/ -->
<div style="float:right;margin:10px 0 10px 10px;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8501671653071605";
/* Appcoda_300x250_iPhone_Development */
google_ad_slot = "8132041053";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/show_ads.js">
</script><ins id="aswift_0_expand" style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><ins id="aswift_0_anchor" style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><iframe width="300" height="250" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;"></iframe></ins></ins>
</div>
<p>Working with maps in iOS consists of an entire programming chapter, as there are tons of things that a developer can do with them. From just presenting a location on a map to drawing a journey’s route with intermediate positions, or even exploiting a map’s possibilities in a completely different way, dealing with all these undoubtably is a great experience that leads to amazing results.</p>
<p>Up to iOS 5.1 (including that version as well), iOS was using the <em>Google Mobile Maps</em> service to provide access to maps and all the related services. Since then however, things changed and Apple introduced the <em>Map Kit</em>, a brand new framework completely built in-house, which is used until today. By the time Apple stopped using Google’s map services, Google decided to create its own Maps SDK for all platforms, including iOS, and that way to compete the Map kit or any other map SDKs that other platforms use. Right now, Google consist of a strong player in this field, as many developers use that SDK. So writing for the <strong>Google Maps SDK for iOS</strong> is something that definitely worths to be done.</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/googlemapios-1024x576.jpg" alt="Google Maps API for iOS" class="aligncenter size-large wp-image-5358" style="width:NaN%;"></div>
<p>At the writing time of this tutorial, the Google Maps SDK for iOS is in the 1.9.2 version. It contains many features, the most of what’s included in the web version of maps, but on the other hand there are missing features as well that are unable to work on a mobile platform. The remarkable point is that in this version, the SDK is quite large in size (MB), and surely that’s something you have to consider if you want to copy the framework’s source files in your project. However, the features it offers are pretty interesting and important so to be rejected without second thought.</p>
<p><span id="more-5324"></span></p>
<p>In contrary to <a href="http://www.appcoda.com/author/gabrielth/">other tutorials of mine</a>, this time my introduction isn’t going to be long enough. That’s mostly because we have a lot of things to do in the upcoming parts, and it’s totally pointless to start discussing about various features here, since we’re about to see them in details later. All I want to say is to be prepared to meet some really interesting stuff, and if you’ve never worked with Google Maps SDK in the past, you’ll definitely enjoy working with them. In the sections that follow I’ll cover the most common tasks that developers usually perform when dealing with maps. In short, here’s what we are going to see:</p>
<ul>
<li>How to present the user’s current location on the map.</li>
<li>How to spot a custom address.</li>
<li>How to draw a route.</li>
<li>How to add intermediate locations (waypoints) to a route.</li>
<li>And more…</li>
</ul>
<p>So, without losing any more time, let’s move forward to all the great stuff we are going to meet today!</p>
<h2>Demo App Overview</h2>
<p>Let me introduce you to the demo app of this tutorial, by telling first of all that we won’t create a new project from the beginning. Instead, you can get a <em><a href="https://www.dropbox.com/s/0le4t9x0amzml6q/GMapsDemo.zip?dl=0">starter project</a></em>  which will be our base, and then we’ll start adding new features to it. So, go ahead and download it, open it in Xcode, and be prepared.</p>
<p>The demo application is actually a single view application, which contains three subviews:</p>
<ol>
<li>A toolbar at the top side of the screen, where some bar button items can be found. These bar button items have already been connected to IBAction methods in the starter project, therefore we don’t have to deal with that. We’ll write just code when appropriate.</li>
<li>A view (<em>UIVIew</em>) covering the most of the available screen area, where the map will appear.</li>
<li>A label at the bottom where we’ll display the distance and duration of a route.</li>
</ol>
<p>Now, the bar button items from left to right at the top toolbar are for:</p>
<ul>
<li>Specifying a custom address.</li>
<li>Setting the start and end location of a route.</li>
<li>Changing the <em>travel mode</em>.</li>
<li>Changing the map type.</li>
</ul>
<p>We’ll see about all of them in details as we move to the upcoming parts of the tutorial. For now, all you have to do is to take a quick look at the starter project, so you feel comfortable moving around in it. Right next, you can see a couple of screenshots as a sample of our goal in this tutorial:</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_1_my_location.png" alt="t33_1_my_location" class="aligncenter size-full wp-image-5329" style="width:NaN%;"></div>
<p><em>Important Note: If you’re going to download and test the final app, make sure to set your API key to the AppDelegate.swift file. See the next part for more information about that.</em></p>
<h2>Obtaining an API Key</h2>
<p>The first thing we need before we make use of the Google Maps SDK is to obtain an <em>API key</em>. In simple words, that means that we need to get from Google a special string which will enable us later to make calls to the Google API right from our app. That API key is fetched from the <em>Google Developers Console</em>, and as this title suggests, it’s a special “place” for developers. Obviously, you can do that if only you have a Google account, so if you still don’t have one, then just go and create it. On the other hand, if you already have a Google account, you’re good to proceed as described next.</p>
<p>In order to get an API key for use in the app, you can disregard the instructions presented here and follow the <a href="https://developers.google.com/maps/documentation/ios/start">getting started guide</a> by Google. However, during the writing of this tutorial, the Google Developers Console interface did not match to the guides given to the above link (obviously the interface has been updated but not the guidelines yet), so I’d advise you to go through the following steps to fetch your own API key.</p>
<p>So, let’s get started. Using your Google account, sign in to the <a href="https://console.developers.google.com/project">Developers Console</a> and then click to the <strong>API Project</strong> option given at the following screen:</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_3_APIProject.png" alt="t33_3_APIProject" class="aligncenter size-full wp-image-5331" style="width:NaN%;"></div>
<p>Next, click to expand the <strong>APIs &amp; auth</strong> menu, and then select the <strong>APIs</strong> option. By doing so, you’ll find all the available APIs provided by Google, but the one we’re interested in is the <strong>Google Maps SDK for iOS</strong>. Depending on the browser you’re using, you’ll see the APIs shown either as a list, so you have to scroll until you find the maps API, or as groups, so you just have to click to the proper one. The next two screenshots illustrate both of these options:</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_5_select_API_group.png" alt="t33_5_select_API_group" class="aligncenter size-full wp-image-5333" style="width:NaN%;"></div>
<p>By selecting the <em>Google Maps SDK for iOS</em> API, you’ll be navigated to a new page, where all you have to do is to enable the API:</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_6_maps_api_on.png" alt="t33_6_maps_api_on" class="aligncenter size-full wp-image-5334" style="width:NaN%;"></div>
<p>Once you do that, click to the <strong>Credentials</strong> options, once again under the <strong>APIs &amp; auth</strong> menu. In the new page, click to the <strong>Create new Key</strong> button which is located at the bottom-left side:</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_7_create_new_key_button.png" alt="t33_7_create_new_key_button" class="aligncenter size-full wp-image-5335" style="width:NaN%;"></div>
<p>By clicking to that button, a dialog window pops up asking for the type of the key you want to create. Obviously, you have to click to the <strong>iOS Key</strong> button in order to produce a valid key for our application.</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_8_select_key_type.png" alt="t33_8_select_key_type" class="aligncenter size-full wp-image-5336" style="width:NaN%;"></div>
<p>In the next dialog window you have to type or paste the <em>bundle identifier (bundle ID)</em> of the app. The bundle ID of the starter project is the <strong>com.appcoda.GMapsDemo</strong> value, so just copy it from here and paste it as shown next:</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_9_set_bundle_id.png" alt="t33_9_set_bundle_id" class="aligncenter size-full wp-image-5337" style="width:NaN%;"></div>
<p>The above step is necessary, so our app is authorized to use the Google Maps API. Note that if you’re planning to use the same API key in more applications, then you first have to add their bundle IDs in this dialog (which of course you can find later as well).</p>
<p>Click to the <strong>Create</strong> button and the desired API key will be generated. At the bottom-right side of the window that you return to, you’ll see an area similar to this one:</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_10_maps_api_key.png" alt="t33_10_maps_api_key" class="aligncenter size-full wp-image-5338" style="width:NaN%;"></div>
<p>By clicking to the <em>Edit allowed iOS applications</em> you can add or remove app bundle IDs, as shown above. You can also re-generate the key, but that’s not necessary right now. All you have to do here is to select the API key and copy it, so you can paste it a bit later to the project.</p>
<h2>Project Configuration</h2>
<p>There is a drawback when using SDKs other than those provided by iOS, and that’s because some level of configuration is required to be done to the project, depending always on the SDK that’s about to be used. So, in this part we are going to perform some initial steps necessary for the Google Maps SDK to work, otherwise it will be impossible to use it. Note that some of the steps described next can also be found in the official documentation by Google. Some others however are not described there, and searching around is required to achieve them. Of course, all you need is here, so you don’t have to search anything by yourself.</p>
<p>So, first of all, you need to download the Google Maps SDK (the framework that must be added to the project). You can get it <a href="https://developers.google.com/maps/documentation/ios/">here</a>; click to the <strong>Download the SDK</strong> button, and then to the version suggested in the page you’ll be landed to (currently 1.9.2). Once you get it, unzip the package and move on.</p>
<p>Continue by opening the starter project in Xcode, if you haven’t done so already. Then drag the <strong>GoogleMaps.framework</strong> from the Finder to the Project Navigator. When the Xcode asks you, make sure to select the <em>Copy items if needed</em> option, and of course, don’t forget to also check the <em>GMapsDemo</em> target as well:</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_11_add_gmaps_framework.png" alt="t33_11_add_gmaps_framework" class="aligncenter size-full wp-image-5339" style="width:NaN%;"></div>
<p>Next, go back to the Finder, and click to the <em>GoogleMaps.framework</em> once again. From the <em>Resources</em> directory, select the <strong>GoogleMaps.bundle</strong> and drag it to the Project Navigator in Xcode too. While adding that bundle to the project, make the same selections as above.</p>
<p>At this point, the next two should appear in your project too (the <em>Google Maps SDK</em> group is a custom one I created for better file organization):</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_12_sdk_added_files.png" alt="t33_12_sdk_added_files" class="aligncenter size-full wp-image-5340" style="width:NaN%;"></div>
<p>The Google Maps SDK needs several other frameworks to exist in the project in order to function properly. Before I give you the list of all the necessary frameworks and libraries that you have to add, make sure to select the project in the Project Navigator, then click to the <strong>Build Phases</strong> and expand the <strong>Link Binary With Libraries</strong> section. Use the plus (+) button to add one by one the following:</p>
<ul>
<li>AVFoundation.framework</li>
<li>CoreData.framework</li>
<li>CoreLocation.framework</li>
<li>CoreText.framework</li>
<li>GLKit.framework</li>
<li>ImageIO.framework</li>
<li>libc++.dylib</li>
<li>libicucore.dylib</li>
<li>libz.dylib</li>
<li>OpenGLES.framework</li>
<li>QuartzCore.framework</li>
<li>SystemConfiguration.framework</li>
</ul>
<p>Here’s what you should see at the end:</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_13_framework_list.png" alt="t33_13_framework_list" class="aligncenter size-full wp-image-5341" style="width:NaN%;"></div>
<p>Next, click to the <strong>Build Settings</strong> tab, and search for the <strong>Other Linker Flags</strong> setting. Once you spot it, add the <strong>-ObjC</strong> value to it, as we are going to bridge the maps SDK written in Objective-C with the Swift project we currently have.</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_14_other_linker_flags.png" alt="t33_14_other_linker_flags" class="aligncenter size-full wp-image-5342" style="width:NaN%;"></div>
<p>Speaking of bridging, unfortunately there’s still not a real straight way to embed Objective-C code in Swift. And in our case, we need to do that, because we must import in Objective-C the header file of the Google maps library. Actually, what we want from Xcode is to create for us an Objective-C header (.h) file, and as there’s no a direct way to do that, we’ll manage it indirectly following the next steps:</p>
<ol>
<li>Hit the Command + N keys in the keyboard to add a new file in the project.</li>
<li>In the file template selection, select the <em>Objective-C File</em> option. Proceed with the guide, name the file <em>temp</em> and create it.<br>
<img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_15_objective_c_file.png" alt="t33_15_objective_c_file" class="aligncenter size-full wp-image-5343" style="width:NaN%;"><p></p>
</li><li>By finishing the guide, Xcode will display the following message. Make sure to tap to the <em>Yes</em> button.<br>
<img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_16_bridging_header.png" alt="t33_16_bridging_header" class="aligncenter size-full wp-image-5344" style="width:NaN%;"></li>
<li>Besides the <em>temp.m</em>, a new file named <em>GMapsDemo-Bridging-Header.h</em> will be also created. Select it to open in the editor, and add the following line to it:
<div class="codecolorer-container text geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="text codecolorer" style="white-space:nowrap">import &lt;GoogleMaps/GoogleMaps.h&gt;</div></td></tr></tbody></table></div>
</li>
<li>Delete the <em>temp.m</em> file, as we’re not going to need it.</li>
</ol>
<p>Lastly, time to make use of the API key we generated to the previous section. Open the <em>AppDelegate.swift</em> file, and in the <em>application(_:didFinishLaunchingWithOptions:)</em> method add the next line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func application<span style="color: #002200;">(</span>application<span style="color: #002200;">:</span> UIApplication, didFinishLaunchingWithOptions launchOptions<span style="color: #002200;">:</span> <span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a><span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">]</span>?<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Bool <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Override point for customization after application launch.</span><br>
<br>
&nbsp; &nbsp; GMSServices.provideAPIKey<span style="color: #002200;">(</span><span style="color: #bf1d1a;">"YOUR_API_KEY"</span><span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; <span style="color: #a61390;">return</span> <span style="color: #a61390;">true</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Of course, you have to replace the <em>“YOUR_API_KEY”</em> string with the real API key you generated in the Google Developers Console. Note that having access to the GoogleMaps framework and its classes (just like in the above snippet) would be impossible without having performed the previous steps regarding the bridging and having imported the header file.</p>
<p>The initial preparation of the project is now over, and we can dive right into the code from now on. As I said to the beginning of this part, this kind of configuration can’t be avoided when using external SKDs, but thankfully in this case all the preliminary tasks were easy enough, even though they were more than a few.</p>
<h2>Displaying a Map</h2>
<p>Now that all the required initial preparation has been done in the project, let’s start doing some real programming work by adding a Google map to the app for first time. As you’ll see right next, that’s pretty easy to do, but let’s do everything in the proper order.</p>
<p>If you open the <em>Main.storyboard</em> file, you’ll notice that in the <em>View Controller</em> scene there’s a view (UIView) in the center of the canvas.</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_17_view_controller_scene.png" alt="t33_17_view_controller_scene" class="aligncenter size-full wp-image-5345" style="width:NaN%;"></div>
<p>This view is going to be our map view, but in order to use it for that purpose we must perform a couple of modifications to it. So, first of all select it, and then open the Utilities pane. Go to the Identity Inspector, and in the class field set the <strong>GMSMapView</strong> value as its class name. The <em>GMSMapView</em> is part of the Google Maps framework, and actually it’s a UIView subclass.</p>
<p>There’s one more modification needed to be done in that view, but this time we must go to the <em>ViewController.swift</em> file. At the top of the class you’ll find the following IBOutlet property declaration:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">@IBOutlet weak var viewMap<span style="color: #002200;">:</span> UIView<span style="color: #002200;">!</span></div></td></tr></tbody></table></div>
<p>All we have to do here is to change the <em>viewMap</em> property’s class from <em>UIView</em> to <em>GMSMapView</em> as shown next:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">@IBOutlet weak var viewMap<span style="color: #002200;">:</span> GMSMapView<span style="color: #002200;">!</span></div></td></tr></tbody></table></div>
<p>Now, we can use the <em>viewMap</em> as our map view.</p>
<p>Adding a Google map in the app is really easy. Just go to the <em>viewDidLoad</em> method and add the following two lines:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">override func viewDidLoad<span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; super.viewDidLoad<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Do any additional setup after loading the view, typically from a nib.</span><br>
<br>
&nbsp; &nbsp; let camera<span style="color: #002200;">:</span> GMSCameraPosition <span style="color: #002200;">=</span> GMSCameraPosition.cameraWithLatitude<span style="color: #002200;">(</span><span style="color: #2400d9;">48.857165</span>, longitude<span style="color: #002200;">:</span> <span style="color: #2400d9;">2.354613</span>, zoom<span style="color: #002200;">:</span> <span style="color: #2400d9;">8.0</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; viewMap.camera <span style="color: #002200;">=</span> camera<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>The first task when setting up a map is to initialize a <em>GMSCameraPosition</em> object. Using this, we specify the initial location that will be displayed in the map. The above coordinates center the map in Paris, but you can find other coordinates to use instead (this is just a demo). Besides the coordinates, we also need to specify the initial <em>zoom</em> level of the map.</p>
<p>The above object is assigned to the <em>camera</em> property of the map view. With that, the actual map can be successfully rendered in the <em>viewMap</em> view.</p>
<p>For first time now you can test the app. So, go for it either in a real device or in the Simulator, and wait until the map appears on the view.</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_18_map_first_run.png" alt="t33_18_map_first_run" class="aligncenter size-full wp-image-5346" style="width:NaN%;"></div>
<p>Let’s extend a bit what we did so far before we move to the next part, and let’s create an action sheet so we can select another map type. The Maps SDK provides three types in iOS:</p>
<ol>
<li>Normal</li>
<li>Terrain</li>
<li>Hybrid</li>
</ol>
<p>The normal mode is the default one and it’s shown in the above screenshot. The other two options change the map appearance according to the respective type, and it would be really great if we would be able to set them to our map.</p>
<p>The map view contains a property named <em>mapType</em>. There are three constants in the Google Maps SDK that represent each type, and the desired one must be set to that property. These constants are:</p>
<ol>
<li>kGMSTypeNormal</li>
<li>kGMSTypeTerrain</li>
<li>kGMSTypeHybrid</li>
</ol>
<p>Now, let’s go to the <em>changeMapType(_:)</em> IBAction method, where we are going to add the necessary code to display the action sheet and set the proper map type to the map view. The following snippet contains all you need:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">@IBAction func changeMapType<span style="color: #002200;">(</span>sender<span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; let actionSheet <span style="color: #002200;">=</span> UIAlertController<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Map Types"</span>, message<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Select map type:"</span>, preferredStyle<span style="color: #002200;">:</span> UIAlertControllerStyle.ActionSheet<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; let normalMapTypeAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Normal"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Default<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; self.viewMap.mapType <span style="color: #002200;">=</span> kGMSTypeNormal<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; let terrainMapTypeAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Terrain"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Default<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; self.viewMap.mapType <span style="color: #002200;">=</span> kGMSTypeTerrain<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; let hybridMapTypeAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Hybrid"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Default<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; self.viewMap.mapType <span style="color: #002200;">=</span> kGMSTypeHybrid<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; let cancelAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Close"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Cancel<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; actionSheet.addAction<span style="color: #002200;">(</span>normalMapTypeAction<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; actionSheet.addAction<span style="color: #002200;">(</span>terrainMapTypeAction<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; actionSheet.addAction<span style="color: #002200;">(</span>hybridMapTypeAction<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; actionSheet.addAction<span style="color: #002200;">(</span>cancelAction<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; presentViewController<span style="color: #002200;">(</span>actionSheet, animated<span style="color: #002200;">:</span> <span style="color: #a61390;">true</span>, completion<span style="color: #002200;">:</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>There’s nothing particularly difficult in the above implementation. As you see, in each action (except for the cancel action) we specify the proper map type to the map view.</p>
<p>Now run the app once again. This time you can change the map type simply by using the far right bar button item in the toolbar at the top.</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_20_hybrid_type.png" alt="t33_20_hybrid_type" class="aligncenter size-full wp-image-5348" style="width:NaN%;"></div>
<h2>My Location</h2>
<p>Displaying a map on the screen is absolutely interesting, but it’s not much helpful if there is nothing to point to. So, starting from this part, we’ll begin adding new features that will make our map really useful.</p>
<p>One of the most common tasks one has to deal with when working with maps, is to point to the current location of the user. This is easy to do, but it involves the user’s consent so the current location to be retrieved. Since iOS 8, asking for the user’s permission is a two-step job: First, a new entry must be added to the .plist file of the project. This entry will have as a key the kind of the required permission, and as a value a description that will be presented to the user in an alert view when the app will run for first time. The second step is to programmatically request for permission, and that will trigger the appearance of the alert controller, if the user hasn’t been presented with it yet. We’ll see that in a while.</p>
<p>When working with Core Location services (and we’ll work here a bit), the app can monitor for location updates either at all time (even if the app is on the background), or just while it’s being used. The kind of permission I mentioned right above is just that; depending on the way we want the app to monitor for location changes we’ll provide the proper key in the .plist file, and a bit later we’ll request for the respective permissions in code. In our case there’s no need for the app to always monitor for location updates. That would be totally meaningless as no changes are going to take place to the map when the app doesn’t run, and also it would be a great waste of the device’s battery. We’ll ask permission to access the user’s location only when the app runs.</p>
<p>In the Project Navigator locate and open the <em>Info.plist</em> file. Then, go to the <strong>Editor &gt; Add Item</strong> menu to add a new entry. As a key specify the <strong>NSLocationWhenInUseUsageDescription</strong> string, and as a value write any description you like. Alternatively, use this: <em>“Allowing access to your location, you can spot your position on the map.”</em> (without the quotes).</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_21_plist_file.png" alt="t33_21_plist_file" class="aligncenter size-full wp-image-5350" style="width:NaN%;"></div>
<p>Back in the <em>ViewController.swift</em> file now, let’s declare two properties that we’ll need right next. At the top of the class, just add the next two lines, right after the IBOutlet property declarations:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">var locationManager <span style="color: #002200;">=</span> CLLocationManager<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
<br>
var didFindMyLocation <span style="color: #002200;">=</span> <span style="color: #a61390;">false</span></div></td></tr></tbody></table></div>
<p>The <em>locationManager</em> property will be used to ask for the user’s permission to keep track of his location, and then based on the authorization status to either display his current location or not. The <em>didFindMyLocation</em> flag will be used a bit later, so we know whether the user’s current position was spotted on the map or not, and eventually to avoid unnecessary location updates. </p>
<p>But, first things first. As you see in the snippet above, the <em>locationManager</em> object is initialized upon its declaration. However, that’s not enough. In the <em>viewDidLoad</em> method we must set the <em>ViewController</em> class as its delegate, and request for the user’s permission. Here we go:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">override func viewDidLoad<span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ...<br>
<br>
&nbsp; &nbsp; locationManager.delegate <span style="color: #002200;">=</span> self<br>
&nbsp; &nbsp; locationManager.requestWhenInUseAuthorization<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Note that the kind of request asked at this point must match to the kind of request we added to the .plist file. By making a call to the <em>requestWhenInUseAuthorization()</em> method of the location manager object, either the user will be presented with an alert view asking for his permission to track his current location if the app runs for first time, or the system will return his preference that was specified at an earlier time. In any case we must check the authorization status of the app using a special delegate method of the <em>CLLocationManagerDelegate</em> protocol, but prior to that, let’s adopt it. Go to the class header line and add that protocol declaration:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">class ViewController<span style="color: #002200;">:</span> UIViewController, CLLocationManagerDelegate <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ...<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Let’s see now that delegate method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func locationManager<span style="color: #002200;">(</span>manager<span style="color: #002200;">:</span> CLLocationManager<span style="color: #002200;">!</span>, didChangeAuthorizationStatus status<span style="color: #002200;">:</span> CLAuthorizationStatus<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> status <span style="color: #002200;">==</span> CLAuthorizationStatus.AuthorizedWhenInUse <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; viewMap.myLocationEnabled <span style="color: #002200;">=</span> <span style="color: #a61390;">true</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>At this point we realize that the only case we are actually interested in is when the authorization status value matches to the one shown above. In that case, we only have to set the <em>myLocationEnabled</em> flag of the map view to <em>true</em>, and the Maps SDK will do the hard work of finding the current location of the user. However, it is our work to make the application capable of knowing when the map’s location has updated with the user’s location.</p>
<p>The current location of the user is described by a property of the map view object named <em>myLocation</em>. The good news regarding this property is that is a KVO-compliant (key-value observing compliant), meaning that we simply have to observe for changes on its value, and that way we’ll be able to know when the user’s location gets updated. If you want to know more about the KVO mechanism, you can take a look at <a href="http://www.appcoda.com/understanding-key-value-observing-coding/">this tutorial</a>.</p>
<p>So, based on the above, our next move is to let our class observe for changes in the <em>myLocation</em> property of the <em>viewMap</em> object. Return in the <em>viewDidLoad</em> method once again, and add the following line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">override func viewDidLoad<span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ...<br>
<br>
&nbsp; &nbsp; viewMap.addObserver<span style="color: #002200;">(</span>self, forKeyPath<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"myLocation"</span>, options<span style="color: #002200;">:</span> NSKeyValueObservingOptions.New, context<span style="color: #002200;">:</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>What we really want to happen when the Google Maps SDK locates the user’s current location, it to center the map on that spot and display the well-known blue dot at that point. The truth here is that the blue dot will be automatically displayed, so no further coding is required from us for that task. So, let’s make the current location appear on the map once the user’s position has been spotted, and if we still haven’t done so:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">override func observeValueForKeyPath<span style="color: #002200;">(</span>keyPath<span style="color: #002200;">:</span> String, ofObject object<span style="color: #002200;">:</span> AnyObject, change<span style="color: #002200;">:</span> <span style="color: #002200;">[</span><a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a> <span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">]</span>, context<span style="color: #002200;">:</span> UnsafeMutablePointer&lt;Void&gt;<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">!</span>didFindMyLocation <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; let myLocation<span style="color: #002200;">:</span> CLLocation <span style="color: #002200;">=</span> change<span style="color: #002200;">[</span>NSKeyValueChangeNewKey<span style="color: #002200;">]</span> as CLLocation<br>
&nbsp; &nbsp; &nbsp; &nbsp; viewMap.camera <span style="color: #002200;">=</span> GMSCameraPosition.cameraWithTarget<span style="color: #002200;">(</span>myLocation.coordinate, zoom<span style="color: #002200;">:</span> <span style="color: #2400d9;">10.0</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; viewMap.settings.myLocationButton <span style="color: #002200;">=</span> <span style="color: #a61390;">true</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; didFindMyLocation <span style="color: #002200;">=</span> <span style="color: #a61390;">true</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>As I already said, the <em>didFindMyLocation</em> flag will help the app to avoid unnecessary location updates. Further than that, we get the new location for the map from the <em>change</em> dictionary. This dictionary is passed as a parameter to the method by the system, and by using the <em>NSKeyValueChangeNewKey</em> key we can fetch the new value of the changed property we observe. Using this location, we configure a new <em>GMSCameraPosition</em> object and and we set it directly to the <em>camera</em> property of the map view. This will make it center to the new position. Another interesting task here is that by setting the <em>myLocationButton</em> property of the <em>settings</em> property of the map view to true, we manage to display on the bottom-right side of the screen a default button for returning back to the current location, in case the user pans the map. This button is provided by the Google Maps SDK. There’s a also a <em>compass</em> button that can be enabled in the exact same way, but we don’t need it here.</p>
<p>Now you can give another try to the app. If you’re going to test it in the Simulator, you must provide it with a fake location because your real location is not monitored there. To do that, simply edit the scheme of the project, and in the <em>Options</em> tab select a default location:</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_22_edit_scheme.png" alt="t33_22_edit_scheme" class="aligncenter size-full wp-image-5351" style="width:NaN%;"></div>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_23_default_location.png" alt="t33_23_default_location" class="aligncenter size-full wp-image-5352" style="width:NaN%;"></div>
<h2>Spotting a Custom Location</h2>
<p>Further than finding the current user’s location, another quite common scenario when working with maps is to spot a custom location. Always this is done by providing to the map API some kind of address (for example street name, city, country, area), and no coordinate (longitude and latitude) values, as nobody could remember them. But, have you ever really wondered how it’s possible for a map service to locate the exact address you provide without knowing the coordinate?</p>
<p>The answer is that there’s a process named <strong>geocoding</strong>, and according to this an address is translated into longitude and latitude values before it gets spotted to a map. Even more, a map service (such as Google Maps) doesn’t really care about the address we provide since it “translates” that to a geo-coordinate. So, the actual interesting point here is how can we manage to give an address to the Google Maps SDK, how it will convert it to a geo-coordinate, and how it’s going to be represented on our map.</p>
<p>Thankfully, Google provides the <strong>Google Geocoding API</strong>, a web service that in short accepts requests containing real addresses and returns responses with longitude and latitude values (among other values of course). If you are really interested in working with Google maps, then you definitely need to give a good reading in the <a href="https://developers.google.com/maps/documentation/geocoding/">geocoding API documentation</a>. Actually, I encourage you to visit that documentation and take a quick tour on the service details right now. It will help you to better understand what we’re about to do next.</p>
<p>The response data of the geocoding API is either in JSON or in XML format. In this sample we’ll make use of the JSON format as it takes just one line to covert it to Swift (or Objective-C) data representation (dictionary or array). The following sample is grabbed from the Google documentation directly, and is a great example of a JSON response:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #002200;">{</span><br>
&nbsp; &nbsp;<span style="color: #bf1d1a;">"results"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">[</span><br>
&nbsp; &nbsp; &nbsp; <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"address_components"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">[</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"long_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"1600"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"short_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"1600"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"types"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">[</span> <span style="color: #bf1d1a;">"street_number"</span> <span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"long_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Amphitheatre Pkwy"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"short_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Amphitheatre Pkwy"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"types"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">[</span> <span style="color: #bf1d1a;">"route"</span> <span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"long_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Mountain View"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"short_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Mountain View"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"types"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">[</span> <span style="color: #bf1d1a;">"locality"</span>, <span style="color: #bf1d1a;">"political"</span> <span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"long_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Santa Clara"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"short_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Santa Clara"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"types"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">[</span> <span style="color: #bf1d1a;">"administrative_area_level_2"</span>, <span style="color: #bf1d1a;">"political"</span> <span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"long_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"California"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"short_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"CA"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"types"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">[</span> <span style="color: #bf1d1a;">"administrative_area_level_1"</span>, <span style="color: #bf1d1a;">"political"</span> <span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"long_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"United States"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"short_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"US"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"types"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">[</span> <span style="color: #bf1d1a;">"country"</span>, <span style="color: #bf1d1a;">"political"</span> <span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"long_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"94043"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"short_name"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"94043"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"types"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">[</span> <span style="color: #bf1d1a;">"postal_code"</span> <span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #002200;">]</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"formatted_address"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"1600 Amphitheatre Pkwy, Mountain View, CA 94043, USA"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"geometry"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #bf1d1a;">"location"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"lat"</span> <span style="color: #002200;">:</span> <span style="color: #2400d9;">37.42291810</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"lng"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">-</span><span style="color: #2400d9;">122.08542120</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #bf1d1a;">"location_type"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"ROOFTOP"</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #bf1d1a;">"viewport"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"northeast"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #bf1d1a;">"lat"</span> <span style="color: #002200;">:</span> <span style="color: #2400d9;">37.42426708029149</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #bf1d1a;">"lng"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">-</span><span style="color: #2400d9;">122.0840722197085</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #002200;">}</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"southwest"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #bf1d1a;">"lat"</span> <span style="color: #002200;">:</span> <span style="color: #2400d9;">37.42156911970850</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #bf1d1a;">"lng"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">-</span><span style="color: #2400d9;">122.0867701802915</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #002200;">}</span>,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #bf1d1a;">"types"</span> <span style="color: #002200;">:</span> <span style="color: #002200;">[</span> <span style="color: #bf1d1a;">"street_address"</span> <span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp;<span style="color: #002200;">]</span>,<br>
&nbsp; &nbsp;<span style="color: #bf1d1a;">"status"</span> <span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"OK"</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>If you look thoroughly, this response represents the found address in two ways: As address components (an array with dictionaries as its items), and as a formatted address, where the full address is given as a single string. Besides that, there are two more interesting points in the above example: The <em>geometry</em> dictionary that contains that longitude and latitude values, and the <em>status</em> that obviously describes the result of the request made to the geocoding web service.</p>
<p>From all the above we’ll use three things in this app: The formatted address, the geometry details, and the status. I advise you to take a look at the status codes in the Google documentation; it’s really out of this scope to discuss about it here. Before you proceed, make sure that you can “read” the JSON data representation properly. If you feel uncomfortable with JSON, then you might want to take a look <a href="http://json.org/">here</a> and <a href="http://www.copterlabs.com/blog/json-what-it-is-how-it-works-how-to-use-it/">here</a>. What I would just like to mention is that when something begins with “some_key” is a dictionary, and when begins with a bracket ([) it’s an array.</p>
<p>Back to our app now, we are going to create a new class to handle the request to and the response from the geocoding API. I’m talking for a new class here for two reasons:</p>
<ol>
<li>The code will be much more reusable.</li>
<li>Later on we’ll make use of another Google web service (API), and it would be great to have all this kind of tasks gathered in one place.</li>
</ol>
<p>So, create a new class, and make sure that it’s a subclass of the <em>NSObject</em>. Name it <strong>MapTasks</strong> and when it’s been added to the project you’re good to continue.</p>
<p>Let’s begin our work in the <em>MapTasks.swift</em> file by declaring some properties that we’ll use right next:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">let baseURLGeocode <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">"https://maps.googleapis.com/maps/api/geocode/json?"</span><br>
<br>
var lookupAddressResults<span style="color: #002200;">:</span> Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<span style="color: #002200;">!</span><br>
<br>
var fetchedFormattedAddress<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span><br>
<br>
var fetchedAddressLongitude<span style="color: #002200;">:</span> Double<span style="color: #002200;">!</span><br>
<br>
var fetchedAddressLatitude<span style="color: #002200;">:</span> Double<span style="color: #002200;">!</span></div></td></tr></tbody></table></div>
<p>The <em>baseURLGeocode</em> is the URL that we’ll use to do the request for the geocoding. Of course, we’ll add the address as a parameter to it, but as this is a dynamic value, it will be done programmatically. In the <em>lookupAddressResults</em> dictionary we’ll store the data of the first address that will be returned in the results. Note that it’s possible more than one result to be returned after having geocoded an address, but for simplicity here we’ll keep just the first one. Lastly, in the three remaining properties we’ll store the values that their names suggest.</p>
<p>At this point we must add an initializer function to the class, so we can create an object of it later in the <em>ViewController</em> class. As there’s no need for a custom init method, let’s stick to the default one:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">override init<span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; super.init<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Now, let’s create a new method as shown next:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func geocodeAddress<span style="color: #002200;">(</span>address<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span>, withCompletionHandler completionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">(</span><span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> String, success<span style="color: #002200;">:</span> Bool<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void<span style="color: #002200;">)</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>The first parameter is the address we want to spot to the map. The second parameter is a completion handler that will be called once we have received and processed the response data. The app will display results to the map only after this completion handler has been called by this method. As you see, it gets two parameters: In the first one we’ll provide the status string from the response, and in the second one we’ll indicate whether the geocoding was successful or not (meaning whether we have data for the map on our hands or not).</p>
<p>Let’s go now step by step to the implementation of that method. Initially, we must compose the URL string properly, convert it to the proper format, and then using it to create a <em>NSURL</em> object. Note that we first make sure that a valid address has been given:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">if</span> let lookupAddress <span style="color: #002200;">=</span> address <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; var geocodeURLString <span style="color: #002200;">=</span> baseURLGeocode <span style="color: #002200;">+</span> <span style="color: #bf1d1a;">"address="</span> <span style="color: #002200;">+</span> lookupAddress<br>
&nbsp; &nbsp; geocodeURLString <span style="color: #002200;">=</span> geocodeURLString.stringByAddingPercentEscapesUsingEncoding<span style="color: #002200;">(</span>NSUTF8StringEncoding<span style="color: #002200;">)</span><span style="color: #002200;">!</span><br>
<br>
&nbsp; &nbsp; let geocodeURL <span style="color: #002200;">=</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/"><span style="color: #400080;">NSURL</span></a><span style="color: #002200;">(</span><span style="color: #a61390;">string</span><span style="color: #002200;">:</span> geocodeURLString<span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Next, we must make a request to the geocoding API and store the returned results to a <em>NSData</em> object. There’s an important detail here, and that is that we’ll do that (and all the upcoming processing) <em>asynchronously</em>, so the app be responsive during the data fetching period. Also, as you’ll see next, after we have the data taken back from the API, we convert it from the JSON format to a dictionary object:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">dispatch_async<span style="color: #002200;">(</span>dispatch_get_main_queue<span style="color: #002200;">(</span><span style="color: #002200;">)</span>, <span style="color: #002200;">{</span> <span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; let geocodingResultsData <span style="color: #002200;">=</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/"><span style="color: #400080;">NSData</span></a><span style="color: #002200;">(</span>contentsOfURL<span style="color: #002200;">:</span> geocodeURL<span style="color: #002200;">!</span><span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; var error<span style="color: #002200;">:</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/"><span style="color: #400080;">NSError</span></a>?<br>
&nbsp; &nbsp; let dictionary<span style="color: #002200;">:</span> Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt; <span style="color: #002200;">=</span> NSJSONSerialization.JSONObjectWithData<span style="color: #002200;">(</span>geocodingResultsData<span style="color: #002200;">!</span>, options<span style="color: #002200;">:</span> NSJSONReadingOptions.MutableContainers, error<span style="color: #002200;">:</span> <span style="color: #002200;">&amp;</span>error<span style="color: #002200;">)</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt; &nbsp; &nbsp;<br>
<span style="color: #002200;">}</span><span style="color: #002200;">)</span></div></td></tr></tbody></table></div>
<p>The last line in the snippet is all it takes to convert data from JSON to Swift representation.</p>
<p>As you notice, we use a <em>NSError</em> object to “catch” any errors that might occur during the conversion process. So, our first care now is to check if after the conversion this value is nil or not. If it’s not, then we’ll call the completion handler and we’ll set the flag argument to <em>false</em>:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>error <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; println<span style="color: #002200;">(</span>error<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">""</span>, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>In case that everything went smoothly, then we’ll first get the status of the response. If it contains the “OK” value we’ll “extract” the first result and store it to the <em>lookupAddressResults</em> dictionary, and then we’ll fetch all the other values we are interested in (the formatted address, the longitude and the latitude). If the status has a value other than “OK”, then we’ll call the completion handler and we’ll pass the status value, but we’ll set the flag to <em>false</em> once again:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Get the response status.</span><br>
&nbsp; &nbsp; let status <span style="color: #002200;">=</span> dictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"status"</span><span style="color: #002200;">]</span> as String<br>
<br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> status <span style="color: #002200;">==</span> <span style="color: #bf1d1a;">"OK"</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; let allResults <span style="color: #002200;">=</span> dictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"results"</span><span style="color: #002200;">]</span> as Array&lt;Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.lookupAddressResults <span style="color: #002200;">=</span> allResults<span style="color: #002200;">[</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Keep the most important values.</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; self.fetchedFormattedAddress <span style="color: #002200;">=</span> self.lookupAddressResults<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"formatted_address"</span><span style="color: #002200;">]</span> as String<br>
&nbsp; &nbsp; &nbsp; &nbsp; let geometry <span style="color: #002200;">=</span> self.lookupAddressResults<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"geometry"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.fetchedAddressLongitude <span style="color: #002200;">=</span> <span style="color: #002200;">(</span><span style="color: #002200;">(</span>geometry<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"location"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<span style="color: #002200;">)</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"lng"</span><span style="color: #002200;">]</span> as <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/"><span style="color: #400080;">NSNumber</span></a><span style="color: #002200;">)</span>.doubleValue<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.fetchedAddressLatitude <span style="color: #002200;">=</span> <span style="color: #002200;">(</span><span style="color: #002200;">(</span>geometry<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"location"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<span style="color: #002200;">)</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"lat"</span><span style="color: #002200;">]</span> as <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/"><span style="color: #400080;">NSNumber</span></a><span style="color: #002200;">)</span>.doubleValue<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> status, success<span style="color: #002200;">:</span> <span style="color: #a61390;">true</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> status, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>The above is actually the “heart” of the method. Notice that the key names used above were taken from the JSON data example I gave you previously and that you can find in the Google Geocoding API documentation too.</p>
<p>Lastly, there’s one more case we have to cove; whether a nil address has been given as an argument to the method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"No valid address."</span>, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>This time we provide a custom message in the status parameter.</p>
<p>Here’s the whole method in one piece:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func geocodeAddress<span style="color: #002200;">(</span>address<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span>, withCompletionHandler completionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">(</span><span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> String, success<span style="color: #002200;">:</span> Bool<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void<span style="color: #002200;">)</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> let lookupAddress <span style="color: #002200;">=</span> address <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; var geocodeURLString <span style="color: #002200;">=</span> baseURLGeocode <span style="color: #002200;">+</span> <span style="color: #bf1d1a;">"address="</span> <span style="color: #002200;">+</span> lookupAddress<br>
&nbsp; &nbsp; &nbsp; &nbsp; geocodeURLString <span style="color: #002200;">=</span> geocodeURLString.stringByAddingPercentEscapesUsingEncoding<span style="color: #002200;">(</span>NSUTF8StringEncoding<span style="color: #002200;">)</span><span style="color: #002200;">!</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; let geocodeURL <span style="color: #002200;">=</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/"><span style="color: #400080;">NSURL</span></a><span style="color: #002200;">(</span><span style="color: #a61390;">string</span><span style="color: #002200;">:</span> geocodeURLString<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; dispatch_async<span style="color: #002200;">(</span>dispatch_get_main_queue<span style="color: #002200;">(</span><span style="color: #002200;">)</span>, <span style="color: #002200;">{</span> <span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let geocodingResultsData <span style="color: #002200;">=</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/"><span style="color: #400080;">NSData</span></a><span style="color: #002200;">(</span>contentsOfURL<span style="color: #002200;">:</span> geocodeURL<span style="color: #002200;">!</span><span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var error<span style="color: #002200;">:</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/"><span style="color: #400080;">NSError</span></a>?<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let dictionary<span style="color: #002200;">:</span> Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt; <span style="color: #002200;">=</span> NSJSONSerialization.JSONObjectWithData<span style="color: #002200;">(</span>geocodingResultsData<span style="color: #002200;">!</span>, options<span style="color: #002200;">:</span> NSJSONReadingOptions.MutableContainers, error<span style="color: #002200;">:</span> <span style="color: #002200;">&amp;</span>error<span style="color: #002200;">)</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>error <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; println<span style="color: #002200;">(</span>error<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">""</span>, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Get the response status.</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let status <span style="color: #002200;">=</span> dictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"status"</span><span style="color: #002200;">]</span> as String<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> status <span style="color: #002200;">==</span> <span style="color: #bf1d1a;">"OK"</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let allResults <span style="color: #002200;">=</span> dictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"results"</span><span style="color: #002200;">]</span> as Array&lt;Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.lookupAddressResults <span style="color: #002200;">=</span> allResults<span style="color: #002200;">[</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #11740a; font-style: italic;">// Keep the most important values.</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.fetchedFormattedAddress <span style="color: #002200;">=</span> self.lookupAddressResults<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"formatted_address"</span><span style="color: #002200;">]</span> as String<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let geometry <span style="color: #002200;">=</span> self.lookupAddressResults<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"geometry"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.fetchedAddressLongitude <span style="color: #002200;">=</span> <span style="color: #002200;">(</span><span style="color: #002200;">(</span>geometry<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"location"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<span style="color: #002200;">)</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"lng"</span><span style="color: #002200;">]</span> as <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/"><span style="color: #400080;">NSNumber</span></a><span style="color: #002200;">)</span>.doubleValue<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.fetchedAddressLatitude <span style="color: #002200;">=</span> <span style="color: #002200;">(</span><span style="color: #002200;">(</span>geometry<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"location"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<span style="color: #002200;">)</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"lat"</span><span style="color: #002200;">]</span> as <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSNumber_Class/"><span style="color: #400080;">NSNumber</span></a><span style="color: #002200;">)</span>.doubleValue<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> status, success<span style="color: #002200;">:</span> <span style="color: #a61390;">true</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> status, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"No valid address."</span>, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Time to use the above method, so let’s return to the <em>ViewController.swift</em> file. Initially, let’s declare and initialize an object of the <em>MapTasks</em> class:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">var mapTasks <span style="color: #002200;">=</span> MapTasks<span style="color: #002200;">(</span><span style="color: #002200;">)</span></div></td></tr></tbody></table></div>
<p>Now, let’s navigate to the <em>findAddress(_:)</em> IBAction method. This one is called every time the left button in the toolbar is tapped. In it, we’ll create an <em>alert controller</em> with a textfield, asking from the user to type an address in. We’ll provide two action buttons, one for initiating the address searching and one to dismiss the controller. When the first button gets tapped, we’ll call the method we created previously and then we’ll handle the completion handler results. Let’s see all that in code:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">@IBAction func findAddress<span style="color: #002200;">(</span>sender<span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; let addressAlert <span style="color: #002200;">=</span> UIAlertController<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Address Finder"</span>, message<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Type the address you want to find:"</span>, preferredStyle<span style="color: #002200;">:</span> UIAlertControllerStyle.Alert<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; addressAlert.addTextFieldWithConfigurationHandler <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>textField<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; textField.placeholder <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">"Address?"</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; let findAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Find Address"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Default<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; let address <span style="color: #002200;">=</span> <span style="color: #002200;">(</span>addressAlert.textFields<span style="color: #002200;">!</span><span style="color: #002200;">[</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span> as UITextField<span style="color: #002200;">)</span>.text as String<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.mapTasks.geocodeAddress<span style="color: #002200;">(</span>address, withCompletionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>status, success<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; let closeAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Close"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Cancel<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; addressAlert.addAction<span style="color: #002200;">(</span>findAction<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; addressAlert.addAction<span style="color: #002200;">(</span>closeAction<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; presentViewController<span style="color: #002200;">(</span>addressAlert, animated<span style="color: #002200;">:</span> <span style="color: #a61390;">true</span>, completion<span style="color: #002200;">:</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>In the closure body now, we have to handle the results. If the <em>success</em> flag is <em>false</em> then we’ll display the status on the console. Even more, if the status equals to “ZERO_RESULTS” value, we’ll display another alert controller telling the user that the address wasn’t found (see the status codes in the Google Documentation). On the other hand, if everything is okay, we’ll center the map to the new location:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">@IBAction func findAddress<span style="color: #002200;">(</span>sender<span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ... &nbsp; &nbsp; &nbsp; &nbsp;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.mapTasks.geocodeAddress<span style="color: #002200;">(</span>address, withCompletionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>status, success<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">!</span>success <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; println<span style="color: #002200;">(</span>status<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> status <span style="color: #002200;">==</span> <span style="color: #bf1d1a;">"ZERO_RESULTS"</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.showAlertWithMessage<span style="color: #002200;">(</span><span style="color: #bf1d1a;">"The location could not be found."</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let coordinate <span style="color: #002200;">=</span> CLLocationCoordinate2D<span style="color: #002200;">(</span>latitude<span style="color: #002200;">:</span> self.mapTasks.fetchedAddressLatitude, longitude<span style="color: #002200;">:</span> self.mapTasks.fetchedAddressLongitude<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.viewMap.camera <span style="color: #002200;">=</span> GMSCameraPosition.cameraWithTarget<span style="color: #002200;">(</span>coordinate, zoom<span style="color: #002200;">:</span> <span style="color: #2400d9;">14.0</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><span style="color: #002200;">)</span> &nbsp; &nbsp; &nbsp; &nbsp;<br>
&nbsp; &nbsp; ...<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>The <em>showAlertWithMessage(_:)</em> is another custom method used only to display an alert controller with the given message. It clearly consists of a reusable piece of code:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func showAlertWithMessage<span style="color: #002200;">(</span>message<span style="color: #002200;">:</span> String<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; let alertController <span style="color: #002200;">=</span> UIAlertController<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"GMapsDemo"</span>, message<span style="color: #002200;">:</span> message, preferredStyle<span style="color: #002200;">:</span> UIAlertControllerStyle.Alert<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; let closeAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Close"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Cancel<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; alertController.addAction<span style="color: #002200;">(</span>closeAction<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; presentViewController<span style="color: #002200;">(</span>alertController, animated<span style="color: #002200;">:</span> <span style="color: #a61390;">true</span>, completion<span style="color: #002200;">:</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>We’re ready. Test the app once again, and this time type an address to point to the map. If you write it correctly the map will center to this location.</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_24_search_address.png" alt="t33_24_search_address" class="aligncenter size-full wp-image-5353" style="width:NaN%;"></div>
<h2>Adding a Marker</h2>
<p>Adding a marker on the map is a really easy task, as doing so it only takes two lines of code. However, there are various properties that can be configured so a marker can be customized according to your needs or preferences. In the Google Maps SDK a marker is an object of the <em>GMSMarker</em> class. When initializing such an object, you must specify the longitude and latitude expressed as a <em>CLLocationCoordinate2D</em> type. In the previous section we created such an object with the following line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">let coordinate <span style="color: #002200;">=</span> CLLocationCoordinate2D<span style="color: #002200;">(</span>latitude<span style="color: #002200;">:</span> self.mapTasks.fetchedAddressLatitude, longitude<span style="color: #002200;">:</span> self.mapTasks.fetchedAddressLongitude<span style="color: #002200;">)</span></div></td></tr></tbody></table></div>
<p>Once the marker object has been initialized and the maps SDK knows where to place it, it’s then necessary to specify the map object to which the marker will be added to.</p>
<p>Let’s see how all these are done in code, but first let’s declare a marker property so we hold a strong reference to it. Go to the beginning of the <em>ViewController</em> class and add the following:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">var locationMarker<span style="color: #002200;">:</span> GMSMarker<span style="color: #002200;">!</span></div></td></tr></tbody></table></div>
<p>Now let’s define the following method. We are going to call it every time a custom address is spotted to the map, so we point to it.</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func setupLocationMarker<span style="color: #002200;">(</span>coordinate<span style="color: #002200;">:</span> CLLocationCoordinate2D<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>The required coordinate object will be provided to the method as an argument. Let’s initialize the marker:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func setuplocationMarker<span style="color: #002200;">(</span>coordinate<span style="color: #002200;">:</span> CLLocationCoordinate2D<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; locationMarker <span style="color: #002200;">=</span> GMSMarker<span style="color: #002200;">(</span>position<span style="color: #002200;">:</span> coordinate<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; locationMarker.map <span style="color: #002200;">=</span> viewMap<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Let’s go back to the <em>findAddress(_:)</em> IBAction method and let’s add one more line so the above gets called when a custom location is found and the map is centered to it:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">@IBAction func findAddress<span style="color: #002200;">(</span>sender<span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ... &nbsp; &nbsp; &nbsp; &nbsp;<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.mapTasks.geocodeAddress<span style="color: #002200;">(</span>address, withCompletionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>status, success<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let coordinate <span style="color: #002200;">=</span> CLLocationCoordinate2D<span style="color: #002200;">(</span>latitude<span style="color: #002200;">:</span> self.mapTasks.fetchedAddressLatitude, longitude<span style="color: #002200;">:</span> self.mapTasks.fetchedAddressLongitude<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.viewMap.camera <span style="color: #002200;">=</span> GMSCameraPosition.cameraWithTarget<span style="color: #002200;">(</span>coordinate, zoom<span style="color: #002200;">:</span> <span style="color: #2400d9;">14.0</span><span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.setupLocationMarker<span style="color: #002200;">(</span>coordinate<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><span style="color: #002200;">)</span> &nbsp; &nbsp; &nbsp; &nbsp;<br>
&nbsp; &nbsp; ...<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Run the app once again, and type a custom address. Now, a marker will point right into the new location.</p>
<p>As I said in the beginning of this part, a marker has various properties that can be used so to achieve some level of customization. For example, you can specify the color of the marker, some text to be displayed when it’s tapped, or even change its opacity. Let’s extend the above method by configuring some of those properties:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func setuplocationMarker<span style="color: #002200;">(</span>coordinate<span style="color: #002200;">:</span> CLLocationCoordinate2D<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ...<br>
<br>
&nbsp; &nbsp; locationMarker.title <span style="color: #002200;">=</span> mapTasks.fetchedFormattedAddress<br>
&nbsp; &nbsp; locationMarker.appearAnimation <span style="color: #002200;">=</span> kGMSMarkerAnimationPop<br>
&nbsp; &nbsp; locationMarker.icon <span style="color: #002200;">=</span> GMSMarker.markerImageWithColor<span style="color: #002200;">(</span>UIColor.blueColor<span style="color: #002200;">(</span><span style="color: #002200;">)</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; locationMarker.opacity <span style="color: #002200;">=</span> <span style="color: #2400d9;">0.75</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>By using the <em>title</em> property the formatted address from the <em>mapTasks</em> object will be displayed above the marker when it gets tapped. The <em>appearAnimation</em> specifies whether the marker will be displayed in an animated fashion, and the value we assign to it is the only option the maps SDK provides. Regarding the marker’s color, as you see it can’t be changed directly; instead we need to access its <em>icon</em> property and provide the desired color as an image, but how it’s handled next is something that the <em>GMSMarker</em> class does; we don’t really care about it. Finally, we also change the opacity of the marker. The above lines will result to a bit transparent blue marker that will be presented animated to the map.</p>
<p>When rotating a map or changing the <em>camera position</em> with gestures, a marker remains always still. However it’s possible to alter this behavior by indicating to the SDK that you want it to be <em>flat</em>, and therefore allow the marker to be moved in accordance to the performed gestures.</p>
<p>Besides that, it’s also possible to add some extra text to the placeholder that appears when tapping on the marker. That extra text must be assigned to the <em>snippet</em> property of the marker.</p>
<p>Here are the last two mentioned things in code:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func setuplocationMarker<span style="color: #002200;">(</span>coordinate<span style="color: #002200;">:</span> CLLocationCoordinate2D<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ...<br>
<br>
&nbsp; &nbsp; locationMarker.flat <span style="color: #002200;">=</span> <span style="color: #a61390;">true</span><br>
&nbsp; &nbsp; locationMarker.snippet <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">"The best place on earth."</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>You can see the effects of all the modified properties if you run the app once again.</p>
<p>Before we move to the next part, there’s one more detail I have to say about. As I mentioned earlier, the marker we set up in the above method will be added to the map every time a new custom address is looked up. However, this isn’t going to work properly unless we remove the marker (if already exists) first, and then add it again. So, all we have to do is to go to the beginning of the method and add the next condition:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func setuplocationMarker<span style="color: #002200;">(</span>coordinate<span style="color: #002200;">:</span> CLLocationCoordinate2D<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> locationMarker <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; locationMarker.map <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; ...<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>The properties presented above are not the only ones existing in the Google Maps SDK. I encourage you to take a look in the <a href="https://developers.google.com/maps/documentation/ios/marker">official documentation</a> as well. You’ll definitely find useful stuff to read.</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_25_marker.png" alt="t33_25_marker" class="aligncenter size-full wp-image-5354" style="width:NaN%;"></div>
<h2>Drawing a Route</h2>
<p>Besides the Geocode API, Google provides other web services as well that can be used in combination to the Maps SDK. One of them is the <strong>Directions API</strong>, which can help us create a <em>route</em> on the map. A route is actually a line connecting two places, and besides the <em>origin</em> and the <em>destination</em> points it can also contain intermediate locations, also called <em>waypoints</em>.</p>
<p>The way we make requests to the Directions API is pretty much similar to the requests made to the Geocode API. That means that we have to provide the web service with some required parameter values, and then to process the returned data which, once again, can be either in JSON or in XML format. I think that now is the best time to take a look to the <a href="https://developers.google.com/maps/documentation/directions">Directions API documentation</a>, and especially to the <a href="https://developers.google.com/maps/documentation/directions/#sample-response">sample responses</a> section, where you can find a nice example of a JSON response.</p>
<p>Before we proceed to the implementation it’s important to understand some basic stuff regarding routes, and the data that is returned from the API back to us. In here I’ll just highlight some aspects, but you can always refer to the official documentation for more information. So first of all, a single response from the Directions API can give us more than one possible routes for going from point A to point B (in this sample app we’ll use just the first route returned, we’ll ignore all the rest). Each route is composed by <em>legs</em>, where a leg is just a part of the journey described in the Directions API response. A simple route without any waypoints (locations between origin and destination) has only one leg, but as new waypoints are added to the route, the legs are increased accordingly.</p>
<p>Now, each leg is composed by <em>steps</em>, where a step is a direction unit, meaning an instruction regarding the direction the route should follow. A step contains useful data about itself, like for example the distance that covers, the duration of the journey in this step, the start and end locations of it, and the points needed so it can be drawn on the map. There is more, but I intentionally mention just that, so you keep them on your mind as we move along.</p>
<p>Further than legs and steps, a route description contains other useful data as well. A piece of this data is the one marked as <em>“overview_polyline”</em> in the sample response presented in the Google documentation website, and it contains the points a map needs to know about how to draw the entire route (a polyline is the set of lines needed to create a path on the map). In this demo app we are going to use that, but I must warn you in advance that this route overview is not accurate; it’s an approximation to the real route. For relatively short distances containing a few legs, it seems to be working well, however there are cases that the drawn route based on the points of this overview polyline misses turns or roads. Actually, the more the legs and the steps are, the less accurate the overview polyline is. The solution to that problem is to make loops so to access and get the polyline points of each step for each leg, and then draw the route line by line based on those points. However, we won’t apply that solution here, as we’ll end up with an app quite complicated, and we must keep it simple so everything is easy to be understood. We’ll stick to the overview polyline so you see how it’s used, and then you’ll be able to do any changes and improvements in the code on your own.</p>
<p>Let’s do some coding now, and let’s go to the <em>MapTasks.swift</em> file. Initially, we have to declare the following properties to the class:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">let baseURLDirections <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">"https://maps.googleapis.com/maps/api/directions/json?"</span><br>
<br>
var selectedRoute<span style="color: #002200;">:</span> Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<span style="color: #002200;">!</span><br>
<br>
var overviewPolyline<span style="color: #002200;">:</span> Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<span style="color: #002200;">!</span><br>
<br>
var originCoordinate<span style="color: #002200;">:</span> CLLocationCoordinate2D<span style="color: #002200;">!</span><br>
<br>
var destinationCoordinate<span style="color: #002200;">:</span> CLLocationCoordinate2D<span style="color: #002200;">!</span><br>
<br>
var originAddress<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span><br>
<br>
var destinationAddress<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span></div></td></tr></tbody></table></div>
<p>Let’s see the above properties what they’re for:</p>
<ul>
<li>To the <em>selectedRoute</em> we’ll store the first route (among the total number of routes) that will be returned from the Directions API. It’s a dictionary, which contains other dictionaries and arrays.</li>
<li>To the <em>overviewPolyline</em> property we’ll hold the overview polyline dictionary, which contains just another dictionary with the points of the lines that should be drawn.</li>
<li>Both the <em>originCoordinate</em> and the <em>destinationCoordinate</em> are <em>CLLocationCoordinate2D</em> objects that represent the longitude and latitude of the origin and the destination locations respectively.</li>
<li>The <em>originAddress</em> and the <em>destinationAddress</em> are going to hold the origin and destination addresses as string values and as they’re contained in the APIs response.</li>
</ul>
<p>Having all the above declared, we can go and define the following method:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func getDirections<span style="color: #002200;">(</span>origin<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span>, destination<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span>, waypoints<span style="color: #002200;">:</span> Array&lt;String&gt;<span style="color: #002200;">!</span>, travelMode<span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">!</span>, completionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">(</span><span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> String, success<span style="color: #002200;">:</span> Bool<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void<span style="color: #002200;">)</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Besides the origin and destination locations (expressed as addresses), the above method also accepts and array with the waypoints (the intermediate points in a route), and the <em>travel mode</em> of the journey that will be drawn on the map. With the travel mode, we’ll be able to define whether we want directions for driving, walking, or bicycling. At the end, we have the (already known) completion handler that we’ll call when we’ll have data to use on the map.</p>
<p>At the moment we won’t bother with the waypoints and the travel mode, we’ll just use the origin and destination addresses. As I already said previously, you’re going to see several similarities with the Geocode API, at least in the beginning. So, first of all we have to compose the request URL string using those two addresses and then convert it to a <em>NSURL</em> object:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func getDirections<span style="color: #002200;">(</span>origin<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span>, destination<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span>, waypoints<span style="color: #002200;">:</span> Array&lt;String&gt;<span style="color: #002200;">!</span>, travelMode<span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">!</span>, completionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">(</span><span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> String, success<span style="color: #002200;">:</span> Bool<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void<span style="color: #002200;">)</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> let originLocation <span style="color: #002200;">=</span> origin <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> let destinationLocation <span style="color: #002200;">=</span> destination <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var directionsURLString <span style="color: #002200;">=</span> baseURLDirections <span style="color: #002200;">+</span> <span style="color: #bf1d1a;">"origin="</span> <span style="color: #002200;">+</span> originLocation <span style="color: #002200;">+</span> <span style="color: #bf1d1a;">"&amp;destination="</span> <span style="color: #002200;">+</span> destinationLocation <br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; directionsURLString <span style="color: #002200;">=</span> directionsURLString.stringByAddingPercentEscapesUsingEncoding<span style="color: #002200;">(</span>NSUTF8StringEncoding<span style="color: #002200;">)</span><span style="color: #002200;">!</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let directionsURL <span style="color: #002200;">=</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/"><span style="color: #400080;">NSURL</span></a><span style="color: #002200;">(</span><span style="color: #a61390;">string</span><span style="color: #002200;">:</span> directionsURLString<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Destination is nil."</span>, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Origin is nil"</span>, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Notice that in case the origin or the destination address is nil, we use the completion handler in the respective <em>else</em> case indicating that getting directions failed, and at the same time we pass a custom message.</p>
<p>The next step is to ask the Directions API for directions by using the URL we created right above. As we said, the returned data will be in JSON format, and our whole work will take place asynchronously. In the snippet that follows, at first we get the JSON data and then we convert it to a dictionary. Also, we cover the case where an error might have occurred:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">dispatch_async<span style="color: #002200;">(</span>dispatch_get_main_queue<span style="color: #002200;">(</span><span style="color: #002200;">)</span>, <span style="color: #002200;">{</span> <span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; let directionsData <span style="color: #002200;">=</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/"><span style="color: #400080;">NSData</span></a><span style="color: #002200;">(</span>contentsOfURL<span style="color: #002200;">:</span> directionsURL<span style="color: #002200;">!</span><span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; var error<span style="color: #002200;">:</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/"><span style="color: #400080;">NSError</span></a>?<br>
&nbsp; &nbsp; let dictionary<span style="color: #002200;">:</span> Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt; <span style="color: #002200;">=</span> NSJSONSerialization.JSONObjectWithData<span style="color: #002200;">(</span>directionsData<span style="color: #002200;">!</span>, options<span style="color: #002200;">:</span> NSJSONReadingOptions.MutableContainers, error<span style="color: #002200;">:</span> <span style="color: #002200;">&amp;</span>error<span style="color: #002200;">)</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<br>
<br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>error <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; println<span style="color: #002200;">(</span>error<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">""</span>, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span><span style="color: #002200;">)</span></div></td></tr></tbody></table></div>
<p>The above has nothing new or difficult. The interesting part is the code that we’re adding in the <em>else</em> case right next:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">let status <span style="color: #002200;">=</span> dictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"status"</span><span style="color: #002200;">]</span> as String<br>
<br>
<span style="color: #a61390;">if</span> status <span style="color: #002200;">==</span> <span style="color: #bf1d1a;">"OK"</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; self.selectedRoute <span style="color: #002200;">=</span> <span style="color: #002200;">(</span>dictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"routes"</span><span style="color: #002200;">]</span> as Array&lt;Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;&gt;<span style="color: #002200;">)</span><span style="color: #002200;">[</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span><br>
&nbsp; &nbsp; self.overviewPolyline <span style="color: #002200;">=</span> self.selectedRoute<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"overview_polyline"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<br>
<br>
&nbsp; &nbsp; let legs <span style="color: #002200;">=</span> self.selectedRoute<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"legs"</span><span style="color: #002200;">]</span> as Array&lt;Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;&gt;<br>
<br>
&nbsp; &nbsp; let startLocationDictionary <span style="color: #002200;">=</span> legs<span style="color: #002200;">[</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"start_location"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<br>
&nbsp; &nbsp; self.originCoordinate <span style="color: #002200;">=</span> CLLocationCoordinate2DMake<span style="color: #002200;">(</span>startLocationDictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"lat"</span><span style="color: #002200;">]</span> as Double, startLocationDictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"lng"</span><span style="color: #002200;">]</span> as Double<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; let endLocationDictionary <span style="color: #002200;">=</span> legs<span style="color: #002200;">[</span>legs.count <span style="color: #002200;">-</span> <span style="color: #2400d9;">1</span><span style="color: #002200;">]</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"end_location"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<br>
&nbsp; &nbsp; self.destinationCoordinate <span style="color: #002200;">=</span> CLLocationCoordinate2DMake<span style="color: #002200;">(</span>endLocationDictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"lat"</span><span style="color: #002200;">]</span> as Double, endLocationDictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"lng"</span><span style="color: #002200;">]</span> as Double<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; self.originAddress <span style="color: #002200;">=</span> legs<span style="color: #002200;">[</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"start_address"</span><span style="color: #002200;">]</span> as String<br>
&nbsp; &nbsp; self.destinationAddress <span style="color: #002200;">=</span> legs<span style="color: #002200;">[</span>legs.count <span style="color: #002200;">-</span> <span style="color: #2400d9;">1</span><span style="color: #002200;">]</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"end_address"</span><span style="color: #002200;">]</span> as String<br>
<br>
&nbsp; &nbsp; self.calculateTotalDistanceAndDuration<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> status, success<span style="color: #002200;">:</span> <span style="color: #a61390;">true</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span><br>
<span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> status, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Let’s go through that code for a while. First of all, we get the response status, and obviously we proceed if only it has the “OK” value. In that case, the first thing we do is to hold the first found route (if there are more will be ignored just for the sake of the tutorial’s simplicity) to the <em>selectedRoute</em> dictionary. Using this dictionary, we access directly the polyline overview, so we get the points needed to draw the route (even approximately). Then, in the <em>legs</em> array that is declared locally we store all the legs of the route, because we’ll need them for getting some data regarding the start and end locations. Notice how we access the coordinate for both the origin and the destination, and also how we get their names as they’re returned in the response. Note that for the start location we use the first leg of the route, while for the end location we use the last leg of the route (<em>legs.count – 1</em>).</p>
<p>Right before we call the completion handler, we make a call to a custom method that you see for first time here, the <em>calculateTotalDistanceAndDuration()</em>. We’ll see it in just a while, and as you assume it will help us to calculate the journey’s distance and travel duration.</p>
<p>At this point, let me give you the method we just implemented in one piece:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func getDirections<span style="color: #002200;">(</span>origin<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span>, destination<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span>, waypoints<span style="color: #002200;">:</span> Array&lt;String&gt;<span style="color: #002200;">!</span>, travelMode<span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">!</span>, completionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">(</span><span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> String, success<span style="color: #002200;">:</span> Bool<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void<span style="color: #002200;">)</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> let originLocation <span style="color: #002200;">=</span> origin <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> let destinationLocation <span style="color: #002200;">=</span> destination <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var directionsURLString <span style="color: #002200;">=</span> baseURLDirections <span style="color: #002200;">+</span> <span style="color: #bf1d1a;">"origin="</span> <span style="color: #002200;">+</span> originLocation <span style="color: #002200;">+</span> <span style="color: #bf1d1a;">"&amp;destination="</span> <span style="color: #002200;">+</span> destinationLocation<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; directionsURLString <span style="color: #002200;">=</span> directionsURLString.stringByAddingPercentEscapesUsingEncoding<span style="color: #002200;">(</span>NSUTF8StringEncoding<span style="color: #002200;">)</span><span style="color: #002200;">!</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let directionsURL <span style="color: #002200;">=</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/"><span style="color: #400080;">NSURL</span></a><span style="color: #002200;">(</span><span style="color: #a61390;">string</span><span style="color: #002200;">:</span> directionsURLString<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dispatch_async<span style="color: #002200;">(</span>dispatch_get_main_queue<span style="color: #002200;">(</span><span style="color: #002200;">)</span>, <span style="color: #002200;">{</span> <span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let directionsData <span style="color: #002200;">=</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/"><span style="color: #400080;">NSData</span></a><span style="color: #002200;">(</span>contentsOfURL<span style="color: #002200;">:</span> directionsURL<span style="color: #002200;">!</span><span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var error<span style="color: #002200;">:</span> <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/"><span style="color: #400080;">NSError</span></a>?<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let dictionary<span style="color: #002200;">:</span> Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt; <span style="color: #002200;">=</span> NSJSONSerialization.JSONObjectWithData<span style="color: #002200;">(</span>directionsData<span style="color: #002200;">!</span>, options<span style="color: #002200;">:</span> NSJSONReadingOptions.MutableContainers, error<span style="color: #002200;">:</span> <span style="color: #002200;">&amp;</span>error<span style="color: #002200;">)</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> <span style="color: #002200;">(</span>error <span style="color: #002200;">!=</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; println<span style="color: #002200;">(</span>error<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">""</span>, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let status <span style="color: #002200;">=</span> dictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"status"</span><span style="color: #002200;">]</span> as String<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> status <span style="color: #002200;">==</span> <span style="color: #bf1d1a;">"OK"</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.selectedRoute <span style="color: #002200;">=</span> <span style="color: #002200;">(</span>dictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"routes"</span><span style="color: #002200;">]</span> as Array&lt;Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;&gt;<span style="color: #002200;">)</span><span style="color: #002200;">[</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.overviewPolyline <span style="color: #002200;">=</span> self.selectedRoute<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"overview_polyline"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let legs <span style="color: #002200;">=</span> self.selectedRoute<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"legs"</span><span style="color: #002200;">]</span> as Array&lt;Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;&gt;<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let startLocationDictionary <span style="color: #002200;">=</span> legs<span style="color: #002200;">[</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"start_location"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.originCoordinate <span style="color: #002200;">=</span> CLLocationCoordinate2DMake<span style="color: #002200;">(</span>startLocationDictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"lat"</span><span style="color: #002200;">]</span> as Double, startLocationDictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"lng"</span><span style="color: #002200;">]</span> as Double<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let endLocationDictionary <span style="color: #002200;">=</span> legs<span style="color: #002200;">[</span>legs.count <span style="color: #002200;">-</span> <span style="color: #2400d9;">1</span><span style="color: #002200;">]</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"end_location"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.destinationCoordinate <span style="color: #002200;">=</span> CLLocationCoordinate2DMake<span style="color: #002200;">(</span>endLocationDictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"lat"</span><span style="color: #002200;">]</span> as Double, endLocationDictionary<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"lng"</span><span style="color: #002200;">]</span> as Double<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.originAddress <span style="color: #002200;">=</span> legs<span style="color: #002200;">[</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"start_address"</span><span style="color: #002200;">]</span> as String<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.destinationAddress <span style="color: #002200;">=</span> legs<span style="color: #002200;">[</span>legs.count <span style="color: #002200;">-</span> <span style="color: #2400d9;">1</span><span style="color: #002200;">]</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"end_address"</span><span style="color: #002200;">]</span> as String<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.calculateTotalDistanceAndDuration<span style="color: #002200;">(</span><span style="color: #002200;">)</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> status, success<span style="color: #002200;">:</span> <span style="color: #a61390;">true</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> status, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Destination is nil."</span>, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; completionHandler<span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Origin is nil"</span>, success<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Now, right before we implement the new custom method to calculate the distance and duration, we need to declare at the top of the class the following properties:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">var totalDistanceInMeters<span style="color: #002200;">:</span> UInt <span style="color: #002200;">=</span> <span style="color: #2400d9;">0</span><br>
<br>
var totalDistance<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span><br>
<br>
var totalDurationInSeconds<span style="color: #002200;">:</span> UInt <span style="color: #002200;">=</span> <span style="color: #2400d9;">0</span><br>
<br>
var totalDuration<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span></div></td></tr></tbody></table></div>
<p>Let’s implement the new method now. Unfortunately there’s not straight way to calculate the distance and the duration of the route; instead we must go through all legs and add them one by one. The distance is calculated in meters, and the duration in seconds. In the next implementation you’ll notice that after we’ve calculated the respective summaries, we convert the distance in Kilometers and the duration in Days, Hours, Minutes and Seconds. Here we go:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func calculateTotalDistanceAndDuration<span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; let legs <span style="color: #002200;">=</span> self.selectedRoute<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"legs"</span><span style="color: #002200;">]</span> as Array&lt;Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;&gt;<br>
<br>
&nbsp; &nbsp; totalDistanceInMeters <span style="color: #002200;">=</span> <span style="color: #2400d9;">0</span><br>
&nbsp; &nbsp; totalDurationInSeconds <span style="color: #002200;">=</span> <span style="color: #2400d9;">0</span><br>
<br>
&nbsp; &nbsp; <span style="color: #a61390;">for</span> leg <span style="color: #a61390;">in</span> legs <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; totalDistanceInMeters <span style="color: #002200;">+=</span> <span style="color: #002200;">(</span>leg<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"distance"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<span style="color: #002200;">)</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"value"</span><span style="color: #002200;">]</span> as UInt<br>
&nbsp; &nbsp; &nbsp; &nbsp; totalDurationInSeconds <span style="color: #002200;">+=</span> <span style="color: #002200;">(</span>leg<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"duration"</span><span style="color: #002200;">]</span> as Dictionary&lt;<a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/"><span style="color: #400080;">NSObject</span></a>, AnyObject&gt;<span style="color: #002200;">)</span><span style="color: #002200;">[</span><span style="color: #bf1d1a;">"value"</span><span style="color: #002200;">]</span> as UInt<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
<br>
&nbsp; &nbsp; let distanceInKilometers<span style="color: #002200;">:</span> Double <span style="color: #002200;">=</span> Double<span style="color: #002200;">(</span>totalDistanceInMeters <span style="color: #002200;">/</span> <span style="color: #2400d9;">1000</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; totalDistance <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">"Total Distance: <span style="color: #2400d9;">\(</span>distanceInKilometers) Km"</span><br>
<br>
<br>
&nbsp; &nbsp; let mins <span style="color: #002200;">=</span> totalDurationInSeconds <span style="color: #002200;">/</span> <span style="color: #2400d9;">60</span><br>
&nbsp; &nbsp; let hours <span style="color: #002200;">=</span> mins <span style="color: #002200;">/</span> <span style="color: #2400d9;">60</span><br>
&nbsp; &nbsp; let days <span style="color: #002200;">=</span> hours <span style="color: #002200;">/</span> <span style="color: #2400d9;">24</span><br>
&nbsp; &nbsp; let remainingHours <span style="color: #002200;">=</span> hours <span style="color: #002200;">%</span> <span style="color: #2400d9;">24</span><br>
&nbsp; &nbsp; let remainingMins <span style="color: #002200;">=</span> mins <span style="color: #002200;">%</span> <span style="color: #2400d9;">60</span><br>
&nbsp; &nbsp; let remainingSecs <span style="color: #002200;">=</span> totalDurationInSeconds <span style="color: #002200;">%</span> <span style="color: #2400d9;">60</span><br>
<br>
&nbsp; &nbsp; totalDuration <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">"Duration: <span style="color: #2400d9;">\(</span>days) d, <span style="color: #2400d9;">\(</span>remainingHours) h, <span style="color: #2400d9;">\(</span>remainingMins) mins, <span style="color: #2400d9;">\(</span>remainingSecs) secs"</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Let’s head back to the <em>ViewController</em> class, and for starters let’s declare the next properties:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">var originMarker<span style="color: #002200;">:</span> GMSMarker<span style="color: #002200;">!</span><br>
<br>
var destinationMarker<span style="color: #002200;">:</span> GMSMarker<span style="color: #002200;">!</span><br>
<br>
var routePolyline<span style="color: #002200;">:</span> GMSPolyline<span style="color: #002200;">!</span></div></td></tr></tbody></table></div>
<p>The first two markers will indicate the origin and destination locations, and the <em>routePolyline</em> is the line that will represent the route.</p>
<p>In the <em>createRoute(_:)</em> IBAction method now, we’ll present an alert controller with two textfields. In the first one, the use will type in the origin location, and in the second the destination. By accepting to create the route, we’ll make a call to the Directions API and based on the results we’ll get back, we’ll design the route and we’ll add the markers.</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">@IBAction func createRoute<span style="color: #002200;">(</span>sender<span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; let addressAlert <span style="color: #002200;">=</span> UIAlertController<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Create Route"</span>, message<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Connect locations with a route:"</span>, preferredStyle<span style="color: #002200;">:</span> UIAlertControllerStyle.Alert<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; addressAlert.addTextFieldWithConfigurationHandler <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>textField<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; textField.placeholder <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">"Origin?"</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; addressAlert.addTextFieldWithConfigurationHandler <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>textField<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; textField.placeholder <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">"Destination?"</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
<br>
&nbsp; &nbsp; let createRouteAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Create Route"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Default<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; let origin <span style="color: #002200;">=</span> <span style="color: #002200;">(</span>addressAlert.textFields<span style="color: #002200;">!</span><span style="color: #002200;">[</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span> as UITextField<span style="color: #002200;">)</span>.text as String<br>
&nbsp; &nbsp; &nbsp; &nbsp; let destination <span style="color: #002200;">=</span> <span style="color: #002200;">(</span>addressAlert.textFields<span style="color: #002200;">!</span><span style="color: #002200;">[</span><span style="color: #2400d9;">1</span><span style="color: #002200;">]</span> as UITextField<span style="color: #002200;">)</span>.text as String<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.mapTasks.getDirections<span style="color: #002200;">(</span>origin, destination<span style="color: #002200;">:</span> destination, waypoints<span style="color: #002200;">:</span> <span style="color: #a61390;">nil</span>, travelMode<span style="color: #002200;">:</span> <span style="color: #a61390;">nil</span>, completionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>status, success<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> success <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.configureMapAndMarkersForRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.drawRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.displayRouteInfo<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; println<span style="color: #002200;">(</span>status<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; let closeAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Close"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Cancel<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; addressAlert.addAction<span style="color: #002200;">(</span>createRouteAction<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; addressAlert.addAction<span style="color: #002200;">(</span>closeAction<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; presentViewController<span style="color: #002200;">(</span>addressAlert, animated<span style="color: #002200;">:</span> <span style="color: #a61390;">true</span>, completion<span style="color: #002200;">:</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>As you notice, if the directions request is successful we call three new custom methods. By their names is easy to guess their purpose, therefore let’s implement them one by one.</p>
<p>In the <em>configureMapAndMarkersForRoute()</em> method we’ll perform three distinct tasks:</p>
<ol>
<li>We’ll center the map to the beginning of the route.</li>
<li>We’ll add a marker to the origin point.</li>
<li>We’ll add a marker to the destination point.
<p>func configureMapAndMarkersForRoute() {<br>
 viewMap.camera = GMSCameraPosition.cameraWithTarget(mapTasks.originCoordinate, zoom: 9.0)</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">originMarker <span style="color: #002200;">=</span> GMSMarker<span style="color: #002200;">(</span>position<span style="color: #002200;">:</span> self.mapTasks.originCoordinate<span style="color: #002200;">)</span><br>
originMarker.map <span style="color: #002200;">=</span> self.viewMap<br>
originMarker.icon <span style="color: #002200;">=</span> GMSMarker.markerImageWithColor<span style="color: #002200;">(</span>UIColor.greenColor<span style="color: #002200;">(</span><span style="color: #002200;">)</span><span style="color: #002200;">)</span><br>
originMarker.title <span style="color: #002200;">=</span> self.mapTasks.originAddress<br>
<br>
destinationMarker <span style="color: #002200;">=</span> GMSMarker<span style="color: #002200;">(</span>position<span style="color: #002200;">:</span> self.mapTasks.destinationCoordinate<span style="color: #002200;">)</span><br>
destinationMarker.map <span style="color: #002200;">=</span> self.viewMap<br>
destinationMarker.icon <span style="color: #002200;">=</span> GMSMarker.markerImageWithColor<span style="color: #002200;">(</span>UIColor.redColor<span style="color: #002200;">(</span><span style="color: #002200;">)</span><span style="color: #002200;">)</span><br>
destinationMarker.title <span style="color: #002200;">=</span> self.mapTasks.destinationAddress</div></td></tr></tbody></table></div>
<p>}</p></li>
</ol>
<p>Note that we set different colors to the markers. Further than that, there’s no something new here.</p>
<p>In the <em>drawRoute()</em> method we are going to draw the route lines on the map. Just notice how easy it’s to create the route using the <em>GMSPath</em> and <em>GMSPolyline</em> classes, as well as the route points we acquired in the <em>MapTasks</em> class:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func drawRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; let route <span style="color: #002200;">=</span> mapTasks.overviewPolyline<span style="color: #002200;">[</span><span style="color: #bf1d1a;">"points"</span><span style="color: #002200;">]</span> as String<br>
<br>
&nbsp; &nbsp; let path<span style="color: #002200;">:</span> GMSPath <span style="color: #002200;">=</span> GMSPath<span style="color: #002200;">(</span>fromEncodedPath<span style="color: #002200;">:</span> route<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; routePolyline <span style="color: #002200;">=</span> GMSPolyline<span style="color: #002200;">(</span>path<span style="color: #002200;">:</span> path<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; routePolyline.map <span style="color: #002200;">=</span> viewMap<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>At the end of the above snippet, we necessarily have to set the map to the <em>routePolyline</em> property.</p>
<p>The <em>displayRouteInfo()</em> method is pretty simple. We just display to the label at the bottom side of the screen the calculated distance and location:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func displayRouteInfo<span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; lblInfo.text <span style="color: #002200;">=</span> mapTasks.totalDistance <span style="color: #002200;">+</span> <span style="color: #bf1d1a;">"<span style="color: #2400d9;">\n</span>"</span> <span style="color: #002200;">+</span> mapTasks.totalDuration<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>That’s all! We’ve gone through many new things, but once you get the meaning of them, it’s easy to manage everything. You can test the app once again now. Specify an origin and a destination location, and let the route be created. I just have to repeat that the overview polyline is not as accurate as you would expect in some cases, so if it’s not good for you, consider to implement the solution I described earlier; go through all steps of all legs, gather the points of all steps, and draw them one by one on the map.</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_2_route.png" alt="t33_2_route" class="aligncenter size-full wp-image-5330" style="width:NaN%;"></div>
<h2>Adding Waypoints to a Route</h2>
<p>Waypoints are locations between the origin and the destination point of a route, and are actually part of the route. So far, we managed to create a route with the start and end points, but nothing between them. Now, we’re about to add that feature too. So, we’ll make the app a bit more interesting, and this time instead of using an alert controller to type in an address as a waypoint of the route, we’ll just <em>tap</em> on the map and the route will be re-calculated. Once that happens, a new marker will be placed on the map, pointing to the tapped location.</p>
<p>With that in mind, the first thing we need here is to declare and initialize two new arrays in the class:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">var markersArray<span style="color: #002200;">:</span> Array&lt;GMSMarker&gt; <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">]</span><br>
<br>
var waypointsArray<span style="color: #002200;">:</span> Array&lt;String&gt; <span style="color: #002200;">=</span> <span style="color: #002200;">[</span><span style="color: #002200;">]</span></div></td></tr></tbody></table></div>
<p>The first one will hold all the markers pointing to waypoints. The second one, we’ll hold the waypoints formed as string objects.</p>
<p>Moving forward now, in order to handle the taps on the map and get the exact tapped location, we need to use a delegate method of the <em>GMSMapViewDelegate</em> protocol (existing in the Google Maps SDK). Before we implement it though, we have to adopt that protocol:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">class ViewController<span style="color: #002200;">:</span> UIViewController, CLLocationManagerDelegate, GMSMapViewDelegate <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ...<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Also, we must make the <em>ViewController</em> class the delegate of the map view. In the <em>viewDidLoad</em> add the next simple line:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">override func viewDidLoad<span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ...<br>
&nbsp; &nbsp; viewMap.delegate <span style="color: #002200;">=</span> self<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Let’ s see the delegate method I said about now, and then we’ll discuss about it:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func mapView<span style="color: #002200;">(</span>mapView<span style="color: #002200;">:</span> GMSMapView<span style="color: #002200;">!</span>, didTapAtCoordinate coordinate<span style="color: #002200;">:</span> CLLocationCoordinate2D<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> let polyline <span style="color: #002200;">=</span> routePolyline <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; let positionString <span style="color: #002200;">=</span> String<span style="color: #002200;">(</span>format<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"%f"</span>, coordinate.latitude<span style="color: #002200;">)</span> <span style="color: #002200;">+</span> <span style="color: #bf1d1a;">","</span> <span style="color: #002200;">+</span> String<span style="color: #002200;">(</span>format<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"%f"</span>, coordinate.longitude<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; waypointsArray.append<span style="color: #002200;">(</span>positionString<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; recreateRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>The first important details here is to make sure that there’s a route so we can add waypoints. That’s easy to check, as we just have to make sure that the polyline of the route isn’t nil. In that case, we compose a string that contains the longitude and latitude of the tapped location simply by using the parameter coordinate. Make sure that no space characters exist in the string, otherwise the request to the Directions API will fail. Once the string describing the location is ready, we append it to the <em>waypointsArray</em> and we make a call to a brand new custom method, the <em>recreateRoute()</em> (which obviously will re-create the route).</p>
<p>Before we re-draw the route with the new waypoint contained in it, we must clear the existing one. So, instead of implementing the <em>recreateRoute()</em> method, initially we’ll create a new one, named <em>clearRoute()</em>. Let’s see it:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func clearRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; originMarker.map <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span><br>
&nbsp; &nbsp; destinationMarker.map <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span><br>
&nbsp; &nbsp; routePolyline.map <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span><br>
<br>
&nbsp; &nbsp; originMarker <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span><br>
&nbsp; &nbsp; destinationMarker <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span><br>
&nbsp; &nbsp; routePolyline <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span><br>
<br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> markersArray.count &gt; <span style="color: #2400d9;">0</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">for</span> marker <span style="color: #a61390;">in</span> markersArray <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; marker.map <span style="color: #002200;">=</span> <span style="color: #a61390;">nil</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; markersArray.removeAll<span style="color: #002200;">(</span>keepCapacity<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>As you can see, every object that is part of the drawn route becomes nil and removed from the map. Note that we even make nil the <em>map</em> property of the markers that exist in the <em>markersArray</em> (we haven’t written the code that adds markers to it yet, but still we can do that).</p>
<p>Now, we can implement the <em>recreateRoute()</em>:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func recreateRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> let polyline <span style="color: #002200;">=</span> routePolyline <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; clearRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; mapTasks.getDirections<span style="color: #002200;">(</span>mapTasks.originAddress, destination<span style="color: #002200;">:</span> mapTasks.destinationAddress, waypoints<span style="color: #002200;">:</span> waypointsArray, travelMode<span style="color: #002200;">:</span> <span style="color: #a61390;">nil</span>, completionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>status, success<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> success <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.configureMapAndMarkersForRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.drawRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.displayRouteInfo<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">else</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; println<span style="color: #002200;">(</span>status<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>First of all, we make sure that there’s a route so we clear it. Then we make the request to the Directions API, and this time note that in the parameters we specify the <em>waypointsArray</em> as well. If everything is okay, we call the same methods we called in the previous part, so the route to be drawn.</p>
<p>The most of our work here is now ready, but still we have a couple of tasks to do. The first one is to pay a visit to the <em>configureMapAndMarkersForRoute()</em> method, and make it capable of adding the waypoint markers too. Let’s see the required addition:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func configureMapAndMarkersForRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ...<br>
<br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> waypointsArray.count &gt; <span style="color: #2400d9;">0</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">for</span> waypoint <span style="color: #a61390;">in</span> waypointsArray <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let lat<span style="color: #002200;">:</span> Double <span style="color: #002200;">=</span> <span style="color: #002200;">(</span>waypoint.componentsSeparatedByString<span style="color: #002200;">(</span><span style="color: #bf1d1a;">","</span><span style="color: #002200;">)</span><span style="color: #002200;">[</span><span style="color: #2400d9;">0</span><span style="color: #002200;">]</span> as <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a><span style="color: #002200;">)</span>.doubleValue<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let lng<span style="color: #002200;">:</span> Double <span style="color: #002200;">=</span> <span style="color: #002200;">(</span>waypoint.componentsSeparatedByString<span style="color: #002200;">(</span><span style="color: #bf1d1a;">","</span><span style="color: #002200;">)</span><span style="color: #002200;">[</span><span style="color: #2400d9;">1</span><span style="color: #002200;">]</span> as <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/"><span style="color: #400080;">NSString</span></a><span style="color: #002200;">)</span>.doubleValue<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let marker <span style="color: #002200;">=</span> GMSMarker<span style="color: #002200;">(</span>position<span style="color: #002200;">:</span> CLLocationCoordinate2DMake<span style="color: #002200;">(</span>lat, lng<span style="color: #002200;">)</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; marker.map <span style="color: #002200;">=</span> viewMap<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; marker.icon <span style="color: #002200;">=</span> GMSMarker.markerImageWithColor<span style="color: #002200;">(</span>UIColor.purpleColor<span style="color: #002200;">(</span><span style="color: #002200;">)</span><span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; markersArray.append<span style="color: #002200;">(</span>marker<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Notice how we break each waypoint string to its components, and then we convert the longitude and latitude in double values, so we can use them in the new marker initialization. Once each marker matching to a waypoint has been configured, we append it to the <em>markersArray</em> array.</p>
<p>The second task remaining to be done, is to update the <em>getDirections(…)</em> method in the <em>MapTasks.swift</em> file. In the beginning of the method, it’s mandatory to update the <em>directionsURLString</em> string, so we include the desired waypoints in the request that will be done. Note that besides than passing the waypoints, we also specify one more parameter to the query, asking for optimization of the route when using the waypoints:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func getDirections<span style="color: #002200;">(</span>origin<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span>, destination<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span>, waypoints<span style="color: #002200;">:</span> Array&lt;String&gt;<span style="color: #002200;">!</span>, travelMode<span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">!</span>, completionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">(</span><span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> String, success<span style="color: #002200;">:</span> Bool<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void<span style="color: #002200;">)</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> let originLocation <span style="color: #002200;">=</span> origin <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> let destinationLocation <span style="color: #002200;">=</span> destination <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var directionsURLString <span style="color: #002200;">=</span> baseURLDirections <span style="color: #002200;">+</span> <span style="color: #bf1d1a;">"origin="</span> <span style="color: #002200;">+</span> originLocation <span style="color: #002200;">+</span> <span style="color: #bf1d1a;">"&amp;destination="</span> <span style="color: #002200;">+</span> destinationLocation<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> let routeWaypoints <span style="color: #002200;">=</span> waypoints <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; directionsURLString <span style="color: #002200;">+=</span> <span style="color: #bf1d1a;">"&amp;waypoints=optimize:true"</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">for</span> waypoint <span style="color: #a61390;">in</span> routeWaypoints <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; directionsURLString <span style="color: #002200;">+=</span> <span style="color: #bf1d1a;">"|"</span> <span style="color: #002200;">+</span> waypoint<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ... &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; ...<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; ...<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Now you can go ahead and try once again the app. After you’ve created a route, tap on any point around it so the tapped location to be included to the route as a waypoint.</p>
<div class="figure"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/t33_26_waypoint.png" alt="t33_26_waypoint" class="aligncenter size-full wp-image-5355" style="width:NaN%;"></div>
<h2>Travel Modes</h2>
<p>By default when creating a route, the <em>driving</em> mode is used by the Directions API. As I already said, the following are the supported <em>travel modes</em> by the Google Maps SDK in iOS:</p>
<ul>
<li>Driving mode</li>
<li>Walking mode</li>
<li>Bicycling mode</li>
</ul>
<p>Changing the travel mode is an interesting matter, and it would be a great feature for this demo app too, therefore let’s go for it in this part. The first thing we’ll do is to create an <em>enum</em> that will contain all the supported travel modes. In the <em>ViewController.swift</em> file, go to the top of the file, before the class opening, and add the next lines:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap"><span style="color: #a61390;">enum</span> TravelModes<span style="color: #002200;">:</span> Int <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">case</span> driving<br>
&nbsp; &nbsp; <span style="color: #a61390;">case</span> walking<br>
&nbsp; &nbsp; <span style="color: #a61390;">case</span> bicycling<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Inside the class now, let’s declare the default travel mode:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">var travelMode <span style="color: #002200;">=</span> TravelModes.driving</div></td></tr></tbody></table></div>
<p>In order to change the travel mode, we’ll use the <em>changeTravelMode(_:)</em> IBAction method. In it, we’ll create a new action sheet providing to the user all the possible options, and depending on the choice that is made we’ll set the travel mode accordingly. Let’s see that in code:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">@IBAction func changeTravelMode<span style="color: #002200;">(</span>sender<span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; let actionSheet <span style="color: #002200;">=</span> UIAlertController<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Travel Mode"</span>, message<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Select travel mode:"</span>, preferredStyle<span style="color: #002200;">:</span> UIAlertControllerStyle.ActionSheet<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; let drivingModeAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Driving"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Default<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; self.travelMode <span style="color: #002200;">=</span> TravelModes.driving<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.recreateRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; let walkingModeAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Walking"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Default<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; self.travelMode <span style="color: #002200;">=</span> TravelModes.walking<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.recreateRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; let bicyclingModeAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Bicycling"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Default<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; self.travelMode <span style="color: #002200;">=</span> TravelModes.bicycling<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.recreateRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; let closeAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Close"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Cancel<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; actionSheet.addAction<span style="color: #002200;">(</span>drivingModeAction<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; actionSheet.addAction<span style="color: #002200;">(</span>walkingModeAction<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; actionSheet.addAction<span style="color: #002200;">(</span>bicyclingModeAction<span style="color: #002200;">)</span><br>
&nbsp; &nbsp; actionSheet.addAction<span style="color: #002200;">(</span>closeAction<span style="color: #002200;">)</span><br>
<br>
&nbsp; &nbsp; presentViewController<span style="color: #002200;">(</span>actionSheet, animated<span style="color: #002200;">:</span> <span style="color: #a61390;">true</span>, completion<span style="color: #002200;">:</span> <span style="color: #a61390;">nil</span><span style="color: #002200;">)</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>As you notice, in each action we set the respective travel mode and we call the <em>recreateRoute()</em> method we implemented in the previous part. Of course, we don’t do anything like that in the close action that is used to simply dismiss the action sheet.</p>
<p>All the above won’t have any effect at all, because the <em>recreateRoute()</em> method needs to be updated. In the current implementation, and while calling the <em>getDirections(…)</em> method of the <em>MapTasks</em> class, we don’t provide the travel mode as an argument; instead we just set the nil value. So, let’s fix this:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func recreateRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> let polyline <span style="color: #002200;">=</span> routePolyline <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; ...<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; mapTasks.getDirections<span style="color: #002200;">(</span>mapTasks.originAddress, destination<span style="color: #002200;">:</span> mapTasks.destinationAddress, waypoints<span style="color: #002200;">:</span> waypointsArray, travelMode<span style="color: #002200;">:</span> travelMode, completionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>status, success<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>The only change here is the <em>travelMode</em> argument. Now, we need to update the <em>getDirections(…)</em> method too, so it takes under consideration the travel mode we set. So, go to the <em>MapTasks.swift</em> file, and make the next additions:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;height:300px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">func getDirections<span style="color: #002200;">(</span>origin<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span>, destination<span style="color: #002200;">:</span> String<span style="color: #002200;">!</span>, waypoints<span style="color: #002200;">:</span> Array&lt;String&gt;<span style="color: #002200;">!</span>, travelMode<span style="color: #002200;">:</span> TravelModes<span style="color: #002200;">!</span>, completionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">(</span><span style="color: #002200;">(</span>status<span style="color: #002200;">:</span> String, success<span style="color: #002200;">:</span> Bool<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void<span style="color: #002200;">)</span><span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; <span style="color: #a61390;">if</span> let originLocation <span style="color: #002200;">=</span> origin <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> let destinationLocation <span style="color: #002200;">=</span> destination <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var directionsURLString <span style="color: #002200;">=</span> baseURLDirections <span style="color: #002200;">+</span> <span style="color: #bf1d1a;">"origin="</span> <span style="color: #002200;">+</span> originLocation <span style="color: #002200;">+</span> <span style="color: #bf1d1a;">"&amp;destination="</span> <span style="color: #002200;">+</span> destinationLocation<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> let travel <span style="color: #002200;">=</span> travelMode <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; var travelModeString <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">""</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">switch</span> travelMode.rawValue <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> TravelModes.walking.rawValue<span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; travelModeString <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">"walking"</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">case</span> TravelModes.bicycling.rawValue<span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; travelModeString <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">"bicycling"</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">default</span><span style="color: #002200;">:</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; travelModeString <span style="color: #002200;">=</span> <span style="color: #bf1d1a;">"driving"</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; directionsURLString <span style="color: #002200;">+=</span> <span style="color: #bf1d1a;">"&amp;mode="</span> <span style="color: #002200;">+</span> travelModeString<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; ...<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
&nbsp; &nbsp; ...<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Note that further than adding the <em>if let travel = travelMode{ … }</em> statement, we also have to change the <em>travelMode</em> parameter type from <em>AnyObject!</em> to <em>TravelModes!</em> (the enum type we created earlier).</p>
<p>Now we’re good enough to test for one more time the app. Go to change the travel mode, and notice how the route info gets changed, especially the duration of the journey.</p>
<h2>Final Touches</h2>
<p>At this point our demo app is almost ready. I’m saying almost, because there are a couple of details that should be added to our code, so we make it work as good as possible.</p>
<p>The first thing we must do, is to clear the route if exists, right before creating a new one. So, in the <em>createRoute(_:)</em> method, and inside the <em>createRouteAction</em> block, we need to check if there’s an existing route, and then to clear it:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">@IBAction func createRoute<span style="color: #002200;">(</span>sender<span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ... &nbsp; &nbsp;<br>
<br>
&nbsp; &nbsp; let createRouteAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Create Route"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Default<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #a61390;">if</span> let polyline <span style="color: #002200;">=</span> self.routePolyline <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.clearRoute<span style="color: #002200;">(</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.waypointsArray.removeAll<span style="color: #002200;">(</span>keepCapacity<span style="color: #002200;">:</span> <span style="color: #a61390;">false</span><span style="color: #002200;">)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; ...<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; ...<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>Note that except for just clearing the route, we also remove all objects from the <em>waypointsArray</em>. There’s no point to keep any existing waypoints since we’re about to create a new route.</p>
<p>The second thing is to specify the travel mode as an argument in this IBAction method again, because right now we just set the nil as the respective parameter’s value:</p>
<div class="codecolorer-container objc geshi" style="overflow:auto;white-space:nowrap;width:750px;"><table cellspacing="0" cellpadding="0"><tbody><tr><td class="line-numbers"><div>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br></div></td><td><div class="objc codecolorer" style="white-space:nowrap">@IBAction func createRoute<span style="color: #002200;">(</span>sender<span style="color: #002200;">:</span> AnyObject<span style="color: #002200;">)</span> <span style="color: #002200;">{</span><br>
&nbsp; &nbsp; ... &nbsp; &nbsp;<br>
<br>
&nbsp; &nbsp; let createRouteAction <span style="color: #002200;">=</span> UIAlertAction<span style="color: #002200;">(</span>title<span style="color: #002200;">:</span> <span style="color: #bf1d1a;">"Create Route"</span>, style<span style="color: #002200;">:</span> UIAlertActionStyle.Default<span style="color: #002200;">)</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>alertAction<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; ...<br>
<br>
&nbsp; &nbsp; &nbsp; &nbsp; self.mapTasks.getDirections<span style="color: #002200;">(</span>origin, destination<span style="color: #002200;">:</span> destination, waypoints<span style="color: #002200;">:</span> <span style="color: #a61390;">nil</span>, travelMode<span style="color: #002200;">:</span> self.travelMode, completionHandler<span style="color: #002200;">:</span> <span style="color: #002200;">{</span> <span style="color: #002200;">(</span>status, success<span style="color: #002200;">)</span> <span style="color: #002200;">-</span>&gt; Void <span style="color: #a61390;">in</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...<br>
&nbsp; &nbsp; <span style="color: #002200;">}</span><br>
<br>
&nbsp; &nbsp; ...<br>
<span style="color: #002200;">}</span></div></td></tr></tbody></table></div>
<p>After having performed the above two tasks, we can say that our demo app is finally ready!</p>
<h2>Summary</h2>
<p>In the parts of this tutorial we managed to go through the most important tasks that a developer can perform when working with maps, and in this case, with the Google Maps SDK for iOS. What you’ve read in all the previous sections can put you on the right track if you want to deal with Google maps, and definitely you now have a starting point to work with. Undoubtably there are a lot more details regarding the Google Maps SDK that were impossible to be covered in this (just one) tutorial. However, now that you know the basics and the most important aspects of the SDK, you can dive in the <a href="https://developers.google.com/maps/documentation/ios/">Google documentation</a> and search for any extra information you might need. Surely working with maps is an interesting topic, and no matter any difficulties that may arise, at the end it is still good material to work with. Anyway, if you’re currently working or if you’re planning to work with the Google Maps SDK, I hope you find the information provided in this post useful. Having it as a guide, nothing stops you from jumping right into it and taking full advantage of all the given APIs!</p>
<p>For your reference, you can refer to the <a href="https://github.com/appcoda/google-maps-api-demo">complete Xcode project here</a>. As always, leave me comment and share your thought about the tutorial.</p>
<p><em>Icons copyright: <a href="http://icons8.com/">icons8</a></em></p>

<!-- Quick Adsense WordPress Plugin: http://quicksense.net/ -->
<div style="float:none;margin:20px 0 20px 0;text-align:center;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8501671653071605";
/* Appcoda_336_280_Ad */
google_ad_slot = "4009415334";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/show_ads.js">
</script><ins id="aswift_2_expand" style="display:inline-table;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><ins id="aswift_2_anchor" style="display:block;border:none;height:280px;margin:0;padding:0;position:relative;visibility:visible;width:336px;background-color:transparent"><iframe width="336" height="280" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;"></iframe></ins></ins>
</div>

<div style="font-size:0px;height:0px;line-height:0px;margin:0;padding:0;clear:both"></div><h3>You May Like These:</h3><div style="clear: both"></div><div style="border: 0pt none ; margin: 0pt; padding: 0pt;"><a onmouseout="this.style.backgroundColor=&#39;#FFFFFF&#39;" onmouseover="this.style.backgroundColor=&#39;#EEEEEF&#39;" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/why-launching-appcoda/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2012/03/appcoda-launch1-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">Why Launching AppCoda?</div></div></a><a onmouseout="this.style.backgroundColor=&#39;#FFFFFF&#39;" onmouseover="this.style.backgroundColor=&#39;#EEEEEF&#39;" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/ios-programming-101-drop-a-pin-on-map-with-mapkit-api/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2012/10/MyLocationMap-Project-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">iOS Programming 101: Intro to MapKit API and Add an Annotation on Map</div></div></a><a onmouseout="this.style.backgroundColor=&#39;#FFFFFF&#39;" onmouseover="this.style.backgroundColor=&#39;#EEEEEF&#39;" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/core-data-tutorial-update-delete/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2012/12/MyStore-Delete-Device-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">Core Data Part 2: Update, Delete Managed Objects and View Raw SQL Statement</div></div></a><a onmouseout="this.style.backgroundColor=&#39;#FFFFFF&#39;" onmouseover="this.style.backgroundColor=&#39;#EEEEEF&#39;" style="background-color: #FFFFFF; border-right: 1px solid #DDDDDD; border-bottom: medium none; margin: 0pt; padding: 6px; display: block; float: left; text-decoration: none; text-align: left; cursor: pointer;" href="http://www.appcoda.com/ios8-share-extension-swift/"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; width: 150px; height: 225px;"><div style="border: 0pt none ; margin: 0pt; padding: 0pt; background: transparent url(http://www.appcoda.com/wp-content/uploads/2015/04/share-extension-1024-150x150.jpg) no-repeat scroll 0% 0%; -moz-background-clip: border; -moz-background-origin: padding; -moz-background-inline-policy: continuous; width: 150px; height: 150px;"></div><div style="border: 0pt none; margin: 3px 0pt 0pt; padding: 0pt; font-family: ; font-style: normal; font-variant: normal; font-weight: normal; font-size: 16px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: #333333;">Building a Simple Share Extension in iOS 8 App</div></div></a></div><div style="clear: both"></div><span class="et_social_bottom_trigger"></span><!--<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.appcoda.com/google-maps-api-tutorial/"
    dc:identifier="http://www.appcoda.com/google-maps-api-tutorial/"
    dc:title="A Swift Tutorial for Google Maps SDK"
    trackback:ping="http://www.appcoda.com/google-maps-api-tutorial/trackback/" />
</rdf:RDF>-->
</div><div class="post-meta"><span class="categories">Filed Under: <a href="http://www.appcoda.com/course/" rel="category tag">Course</a>, <a href="http://www.appcoda.com/course/intermediate/" rel="category tag">Intermediate</a>, <a href="http://www.appcoda.com/swift-2/" rel="category tag">Swift</a>, <a href="http://www.appcoda.com/tutorials/" rel="category tag">Tutorials</a></span> <span class="tags">Tagged With: <a href="http://www.appcoda.com/tag/apple-maps/" rel="tag">Apple Maps</a>, <a href="http://www.appcoda.com/tag/google-maps/" rel="tag">Google Maps</a>, <a href="http://www.appcoda.com/tag/ios-programming/" rel="tag">iOS Programming</a>, <a href="http://www.appcoda.com/tag/swift/" rel="tag">swift</a></span></div><div class="after-post widget-area"><div id="text-8" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Get Free Chapters of Our Swift Book</h4>
			<div class="textwidget"><a href="http://www.appcoda.com/swift/"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/swift-book-cover-227x300.png" alt="Beginning iOS 8 Programming with Swift" class="alignright size-medium wp-image-4153" style="width:26.31578947368421%;"></a>If you want to create an app but don't know where to begin, this book covers the whole aspect of Swift programming and iOS 8 development and shows you every step from an idea to a real app on App Store. This book features a lot of hands-on exercises and projects. You will first create a simple app, then prototype an app idea, and later add some features to it in each chapter, until a real app is built. Want to learn more? <a href="http://www.appcoda.com/swift/">Check it out here and get three free chapters.</a>
<p></p>
<br></div>
		</div></div>
<div id="featured-page-2" class="widget featured-content featuredpage"><div class="widget-wrap"><h4 class="widget-title widgettitle">Sign Up for our Free Tutorials</h4>
<div class="post-38 page type-page status-publish has-post-thumbnail hentry entry"><ul>
<li>Learn iOS Programming From Scratch</li>
<li>Step by Step Guide to Build Your First iPhone App</li>
<li>Complete Source Code for Your Reference</li>
<li>More Programming Tips and Tutorials to Come</li>
</ul>
<div class="enews">
<h4 class="widgettitle">Whatcha waiting for?</h4>
<form action="http://sendy.appcoda.com/sendy/subscribe" method="post" id="subscribe" name="mc-embedded-subscribe-form" class="validate" target="_blank" accept-charset="utf-8">
	<input type="email" id="subbox" value="" name="email" class="email" placeholder="Enter your email address" required=""><input type="submit" value="Subscribe" name="subscribe" id="subbutton" class="button"><br>
	<input type="hidden" name="list" value="KEdC8BeT8EC8znOnfjSQAw"><br>
</form>
</div>
</div></div></div>
</div></div><div class="author-box"><div><img alt="" src="./A Swift Tutorial for Google Maps SDK on iOS_files/582c964c3dafd700a4df627225d859fe" srcset="http://2.gravatar.com/avatar/582c964c3dafd700a4df627225d859fe?s=140&amp;d=mm&amp;r=g 2x" class="avatar avatar-70 photo" height="70" width="70"> <strong>About Gabriel Theodoropoulos</strong><br><p>Gabriel has been a software developer for about two decades. He has long experience in developing software solutions for various platforms in many programming languages. Since middle-2010 he has been developing almost exclusively for iOS. Tutorials consist of the best way to share knowledge with people all over the world. Follow Gabriel at <a href="http://plus.google.com/+gabrieltheodoropoulos">Google+</a> and <a href="https://twitter.com/gabtheodor">Twitter</a>.</p>
</div></div>
<div id="disqus_thread"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./A Swift Tutorial for Google Maps SDK on iOS_files/saved_resource.html" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 2044px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe><iframe id="dsq-indicator-north" data-disqus-uid="indicator-north" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 760px !important; border: none !important; overflow: hidden !important; top: 0px !important; min-width: 760px !important; max-width: 760px !important; position: fixed !important; z-index: 2147483646 !important; height: 29px !important; min-height: 29px !important; max-height: 29px !important; display: none !important;"></iframe><iframe id="dsq-indicator-south" data-disqus-uid="indicator-south" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 760px !important; border: none !important; overflow: hidden !important; bottom: 0px !important; min-width: 760px !important; max-width: 760px !important; position: fixed !important; z-index: 2147483646 !important; height: 29px !important; min-height: 29px !important; max-height: 29px !important; display: none !important;"></iframe></div>

<script type="text/javascript">
var disqus_url = 'http://www.appcoda.com/google-maps-api-tutorial/';
var disqus_identifier = '5324 http://www.appcoda.com/?p=5324';
var disqus_container_id = 'disqus_thread';
var disqus_shortname = 'appcoda';
var disqus_title = "A Swift Tutorial for Google Maps SDK";
var disqus_config_custom = window.disqus_config;
var disqus_config = function () {
    /*
    All currently supported events:
    onReady: fires when everything is ready,
    onNewComment: fires when a new comment is posted,
    onIdentify: fires when user is authenticated
    */
    
    
    this.language = '';
        this.callbacks.onReady.push(function () {

        // sync comments in the background so we don't block the page
        var script = document.createElement('script');
        script.async = true;
        script.src = '?cf_action=sync_comments&post_id=5324';

        var firstScript = document.getElementsByTagName('script')[0];
        firstScript.parentNode.insertBefore(script, firstScript);
    });
    
    if (disqus_config_custom) {
        disqus_config_custom.call(this);
    }
};

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>

</div><div id="sidebar" class="sidebar widget-area"><div id="search-4" class="widget widget_search"><div class="widget-wrap"><form role="search" method="get" id="searchform" class="searchform" action="http://www.appcoda.com/">
                    <div><label class="screen-reader-text" for="s">Search for:</label>
                    <input type="text" value="" name="s" id="s">
                    <input type="submit" id="searchsubmit" value="Search">
                    </div>
                    </form></div></div>
<div id="text-2" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Sign Up for Our Free Tutorials</h4>
			<div class="textwidget"><div class="enews"><form action="http://sendy.appcoda.com/sendy/subscribe" method="post" id="subscribe" name="mc-embedded-subscribe-form" class="validate" target="_blank" accept-charset="utf-8">
	<input type="email" id="subbox" value="" name="email" class="email" placeholder="Enter your email address" required=""><input type="submit" value="Subscribe" name="subscribe" id="subbutton" class="button">
	<input type="hidden" name="list" value="KEdC8BeT8EC8znOnfjSQAw">
</form>
</div></div>
		</div></div>
<div id="text-6" class="widget widget_text"><div class="widget-wrap">			<div class="textwidget"><!-- BuySellAds Zone Code -->
<div id="bsap_1283996" class="bsap bsap_1283996" data-serve="CYAD42T">
<style type="text/css">
div.bsap_1283996{width:100%;display:block;}div.bsap_1283996 a{width:125px;}div.bsap_1283996 a img{padding:0;}div.bsap_1283996 a em{font-style:normal;}div.bsap_1283996 a{display:block;font-size:11px;color:#888;font-family:verdana,sans-serif;margin:0 4px 10px 0;text-align:center;text-decoration:none;overflow:hidden;float:left;}
div.bsap_1283996 img{border:0;clear:right;}
div.bsap_1283996 a.adhere{color:#666;font-weight:bold;font-size:12px;border:1px solid #ccc;background:#e7e7e7;text-align:center;}
div.bsap_1283996 a.adhere:hover{border:1px solid #999;background:#ddd;color:#333;}div.bsap_1283996 a{line-height:100%;}div.bsap_1283996 a.adhere{width:125px;height:125px;line-height:1000%;}html>body div.bsap_1283996 a.adhere{width:123px;height:123px;}div.bsap_1283996 img.s{height:0;width:0;}
</style>
<a href="http://srv.buysellads.com/ads/click/x/GTND423ICTADCKQLC6B4YKQWCKYDEKJNCYAIEZ3JCE7IT53EF6BI45QKC6BDCK3YCKADTK3EHJNCLSIZ" class="ad0 odd " title="Easy way from YouTube to iTunes!" id="bsa_5575428" target="_blank" rel="nofollow">
<img src="./A Swift Tutorial for Google Maps SDK on iOS_files/264766-1428073634.png" width="" height="" alt=""></a><a href="http://srv.buysellads.com/ads/click/x/GTND423ICTADCKQLC6B4YKQWCKYDEKJJCABDEZ3JCE7IT53JCEAIKK3KC6BDCK3YCKADTK3EHJNCLSIZ" class="ad1  even" title="Native, Instant, Automatic iOS to Android Code Conversion" id="bsa_5269316" target="_blank" rel="nofollow">
<img src="./A Swift Tutorial for Google Maps SDK on iOS_files/248127-1416917132.gif" width="" height="" alt=""></a><iframe width="125" height="125" id="ad_4768828_frame" src="./A Swift Tutorial for Google Maps SDK on iOS_files/raw_42c0cf2a90cc2f5010ffba311bdd2af7.html" frameborder="0" class="bsap_adframe" scrolling="no"></iframe>

<script type="text/javascript" id="auto_1" class="ignoreme"> if (typeof(_bsap_serving_callback) !== 'undefined') _bsap_serving_callback(16771, 'CYAD42T', ''); </script><a href="http://srv.buysellads.com/ads/click/x/GTND423ICTADCKQLC6B4YKQWCKYDEKJJCABITZ3JCE7IT53JCEAIKK7KC6BDCK3YCKADTK3EHJNCLSIZ" class="ad3  even" title="Design iOS apps with Swift" id="bsa_4974784" target="_blank" rel="nofollow">
<img src="./A Swift Tutorial for Google Maps SDK on iOS_files/233738-1407626335.png" width="" height="" alt=""></a><!-- no ad --><a href="http://srv.buysellads.com/ads/click/x/GTND423ICTADCKQLC6B4YKQWCKYDEKJJCABDLZ3JCE7IT53JCEAIKKQKC6BDCK3YCKADTK3EHJNCLSIZ" class="ad5 odd " title="Advanced prototyping app for iOS." id="bsa_4893276" target="_blank" rel="nofollow">
<img src="./A Swift Tutorial for Google Maps SDK on iOS_files/229192-1404346054.png" width="" height="" alt=""></a>
<script type="text/javascript" id="auto_2" class="ignoreme"> if (typeof(BSACallback) !== 'undefined') BSACallback(); </script></div>
<!-- End BuySellAds Zone Code --></div>
		</div></div>
<div id="text-4" class="widget widget_text"><div class="widget-wrap">			<div class="textwidget"><div class="fb-like-box fb_iframe_widget" data-href="http://www.facebook.com/appcodamobile" data-width="300" data-height="260" data-show-faces="true" data-border-color="#F1F1F1" data-stream="false" data-header="false" fb-xfbml-state="parsed" fb-iframe-plugin-query="app_id=&amp;container_width=300&amp;header=false&amp;height=260&amp;href=http%3A%2F%2Fwww.facebook.com%2Fappcodamobile&amp;locale=en_US&amp;sdk=joey&amp;show_faces=true&amp;stream=false&amp;width=300"><span style="vertical-align: top; width: 0px; height: 0px; overflow: hidden;"><iframe name="fc39897bc" width="300px" height="260px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like_box Facebook Social Plugin" src="about:blank" style="border: none; visibility: hidden; width: 0px; height: 0px;"></iframe></span></div></div>
		</div></div>
		<div id="recent-posts-3" class="widget widget_recent_entries"><div class="widget-wrap">		<h4 class="widget-title widgettitle">Recent Posts</h4>
		<ul>
					<li>
				<a href="http://www.appcoda.com/react-native-introduction/">Introduction to React Native: Building iOS Apps with JavaScript</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/cloudkit-introduction-tutorial/">Working with CloudKit in iOS 8</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/instagram-app-parse-swift/">Building an Instagram-Like App with Parse and Swift</a>
						</li>
					<li>
				<a href="./A Swift Tutorial for Google Maps SDK on iOS_files/A Swift Tutorial for Google Maps SDK on iOS.html">A Swift Tutorial for Google Maps SDK</a>
						</li>
					<li>
				<a href="http://www.appcoda.com/ios8-share-extension-swift/">Building a Simple Share Extension in iOS 8 App</a>
						</li>
				</ul>
		</div></div>
<div id="wp_insert_ad_widget-3" class="widget widget_wp_insert_ad_widget"><div class="widget-wrap"><div class="wpInsert wpInsertAdWidget" style="margin: 5px; padding: 0px;"><script async="" src="./A Swift Tutorial for Google Maps SDK on iOS_files/adsbygoogle.js"></script>
<!-- Premium Large Skyscraper -->
<ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-8501671653071605" data-ad-slot="6120307730" data-adsbygoogle-status="done"><ins id="aswift_3_expand" style="display:inline-table;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><ins id="aswift_3_anchor" style="display:block;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent"><iframe width="300" height="600" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_3" name="aswift_3" style="left:0;position:absolute;top:0;"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div></div></div>
<div id="nav_menu-3" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Connect With Us</h4>
<div class="menu-sidebar-container"><ul id="menu-sidebar" class="menu"><li id="menu-item-57" class="social-twitter menu-item menu-item-type-custom menu-item-object-custom menu-item-57"><a href="http://twitter.com/appcodamobile">Twitter</a></li>
<li id="menu-item-58" class="social-facebook menu-item menu-item-type-custom menu-item-object-custom menu-item-58"><a href="http://facebook.com/appcodamobile">Facebook</a></li>
<li id="menu-item-59" class="social-rss menu-item menu-item-type-custom menu-item-object-custom menu-item-59"><a href="http://feeds.feedburner.com/appcoda">RSS</a></li>
<li id="menu-item-68" class="social-plus menu-item menu-item-type-custom menu-item-object-custom menu-item-68"><a href="https://plus.google.com/b/118438564257465271998/">Google Plus</a></li>
</ul></div></div></div>
</div></div></div></div><div id="footer-widgets" class="footer-widgets"><div class="wrap"><div class="footer-widgets-1 widget-area"><div id="nav_menu-4" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">About AppCoda</h4>
<div class="menu-default-container"><ul id="menu-default-1" class="menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26"><a href="http://www.appcoda.com/about/">About</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-28"><a href="http://www.appcoda.com/tutorials/">Tutorials</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-530"><a href="http://www.appcoda.com/ios-programming-course/">Course</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3045"><a title="Swift Programming Book for iOS 8" href="http://www.appcoda.com/swift">Book</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2140"><a href="http://www.appcoda.com/ios-app-kit/ios-game-kit.html">Game Kit</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-710"><a href="http://www.appcoda.com/marketplace/">Marketplace</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-34"><a href="http://www.appcoda.com/contact/">Contact</a></li>
</ul></div></div></div>
</div><div class="footer-widgets-2 widget-area"><div id="text-9" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Get Our New Book</h4>
			<div class="textwidget"><a href="http://www.appcoda.com/swift/"><img src="./A Swift Tutorial for Google Maps SDK on iOS_files/swift-book-cover-227x300.png" alt="Beginning iOS 8 Programming with Swift" class="alignleft size-medium wp-image-4153"></a></div>
		</div></div>
</div><div class="footer-widgets-3 widget-area"><div id="nav_menu-5" class="widget widget_nav_menu"><div class="widget-wrap"><h4 class="widget-title widgettitle">Connect With Us</h4>
<div class="menu-sidebar-container"><ul id="menu-sidebar-1" class="menu"><li class="social-twitter menu-item menu-item-type-custom menu-item-object-custom menu-item-57"><a href="http://twitter.com/appcodamobile">Twitter</a></li>
<li class="social-facebook menu-item menu-item-type-custom menu-item-object-custom menu-item-58"><a href="http://facebook.com/appcodamobile">Facebook</a></li>
<li class="social-rss menu-item menu-item-type-custom menu-item-object-custom menu-item-59"><a href="http://feeds.feedburner.com/appcoda">RSS</a></li>
<li class="social-plus menu-item menu-item-type-custom menu-item-object-custom menu-item-68"><a href="https://plus.google.com/b/118438564257465271998/">Google Plus</a></li>
</ul></div></div></div>
<div id="text-3" class="widget widget_text"><div class="widget-wrap"><h4 class="widget-title widgettitle">Email Newsletter</h4>
			<div class="textwidget"><p>Sign up to receive free tutorial and
to hear what's going on with AppCoda!</p>
<div class="enews"><form action="http://sendy.appcoda.com/sendy/subscribe" method="post" id="subscribe" name="mc-embedded-subscribe-form" class="validate" target="_blank" accept-charset="utf-8">
	<input type="email" id="subbox" value="" name="email" class="email" placeholder="Enter your email address" required=""><input type="submit" value="Subscribe" name="subscribe" id="subbutton" class="button">
	<input type="hidden" name="list" value="KEdC8BeT8EC8znOnfjSQAw">
</form>
</div></div>
		</div></div>
</div></div></div><div id="footer" class="footer"><div class="wrap">    <p>© Copyright 2015 <a href="http://appcoda.com/">AppCoda</a> · All Rights Reserved · Powered by <a href="http://wordpress.org/">WordPress · </a><a href="http://www.appcoda.com/privacy-policy">Privacy Policy</a> · <a href="http://www.appcoda.com/terms-of-service/">Terms of Service</a></p>
    </div></div></div><!-- BuySellAds Ad Code -->
<script type="text/javascript">
(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = 'http://s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();
</script>
<!-- End BuySellAds Ad Code -->
<script src="./A Swift Tutorial for Google Maps SDK on iOS_files/prism.js"></script>        <script type="text/javascript">
        // <![CDATA[
        var disqus_shortname = 'appcoda';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('data-dsqidentifier'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) { url = url[0]; }
                    else { url = url[1]; }
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script'); 
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        // ]]>
        </script>
                    <!-- Version: 0.3.3 -->
            <script type="text/javascript">
                var EjSocialSlideoutJsApi_Settings =
                {
                    SliderImage: "<img width=\"150\" height=\"150\" src=\"http:\/\/www.appcoda.com\/wp-content\/uploads\/2015\/04\/appcoda-300-150x150.png\" class=\"attachment-thumbnail\" alt=\"appcoda-300\" \/>",
                    SocialProfiles: {"Facebook":{"Name":"Facebook","NetworkId":"Facebook","IsActive":true,"Id":"appcodamobile","Title":"Follow Us on Facebook","Description":"And get free tutorial updates"},"Twitter":{"Name":"Twitter","NetworkId":"Twitter","IsActive":true,"Id":"appcodamobile","Title":"Follow Us on Twitter","Description":"And get free tutorial updates"}},
                    Preview: false
                                    };

                if (typeof (EjSocialSlideoutJsApi) !== "undefined")
                    EjSocialSlideoutJsApi.SettingsLoaded(EjSocialSlideoutJsApi_Settings);
            </script>
            <div id="ej-ss-slideout-dom-templates" style="display:none"><div id="ej-ss-slideout-dom-template-facebook"><div class="fb-follow fb_iframe_widget" data-href="https://www.facebook.com/appcodamobile" data-width="210" data-colorscheme="light" data-layout="standard" data-show-faces="true" fb-xfbml-state="parsed" fb-iframe-plugin-query="app_id=&amp;color_scheme=light&amp;container_width=0&amp;href=https%3A%2F%2Fwww.facebook.com%2Fappcodamobile&amp;layout=standard&amp;locale=en_US&amp;sdk=joey&amp;show_faces=true&amp;width=210"><span style="vertical-align: top; width: 0px; height: 0px; overflow: hidden;"><iframe name="f3dc09198" width="210px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:follow Facebook Social Plugin" src="about:blank" style="border: none; visibility: hidden; width: 0px; height: 0px;"></iframe></span></div></div><div id="ej-ss-slideout-dom-template-twitter"><a href="https://twitter.com/appcodamobile" class="twitter-follow-button" data-show-count="true" data-size="medium">Follow @appcodamobile</a></div></div><div class="et_social_sidebar_networks et_social_visible_sidebar et_social_slideright et_social_animated et_social_rectangle et_social_sidebar_flip et_social_sidebar_withcounts et_social_withtotalcount et_social_mobile_off" style="top: 197.5px;">
					<div class="et_social_totalcount et_social_dark">
							<span class="et_social_totalcount_count et_social_total_share" data-post_id="5324"><span class="et_social_placeholder"></span></span>
							<span class="et_social_totalcount_label">Shares</span>
						</div>
					<ul class="et_social_icons_container"><li class="et_social_facebook">
									<a href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.appcoda.com%2Fgoogle-maps-api-tutorial%2F&t=A%20Swift%20Tutorial%20for%20Google%20Maps%20SDK" class="et_social_share" rel="nofollow" data-social_name="facebook" data-post_id="5324" data-social_type="share">
										<i class="et_social_icon et_social_icon_facebook"></i>
										
										<div class="et_social_count"><span>103</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li><li class="et_social_twitter">
									<a href="http://twitter.com/share?text=A%20Swift%20Tutorial%20for%20Google%20Maps%20SDK&url=http%3A%2F%2Fwww.appcoda.com%2Fgoogle-maps-api-tutorial%2F&via=appcodamobile" class="et_social_share" rel="nofollow" data-social_name="twitter" data-post_id="5324" data-social_type="share">
										<i class="et_social_icon et_social_icon_twitter"></i>
										
										<div class="et_social_count"><span>43</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li><li class="et_social_googleplus">
									<a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.appcoda.com%2Fgoogle-maps-api-tutorial%2F&t=A%20Swift%20Tutorial%20for%20Google%20Maps%20SDK" class="et_social_share" rel="nofollow" data-social_name="googleplus" data-post_id="5324" data-social_type="share">
										<i class="et_social_icon et_social_icon_googleplus"></i>
										
										<div class="et_social_count"><span>5</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li><li class="et_social_linkedin">
									<a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fwww.appcoda.com%2Fgoogle-maps-api-tutorial%2F&title=A%20Swift%20Tutorial%20for%20Google%20Maps%20SDK" class="et_social_share" rel="nofollow" data-social_name="linkedin" data-post_id="5324" data-social_type="share">
										<i class="et_social_icon et_social_icon_linkedin"></i>
										
										<div class="et_social_count"><span>6</span></div>
										<span class="et_social_overlay"></span>
									</a>
								</li></ul>
					<span class="et_social_hide_sidebar et_social_icon"></span>
				</div><div class="et_social_flyin et_social_resize et_social_flyin_bottom_right et_social_slideup et_social_trigger_bottom et_social_mobile_on">
					<a href="http://www.appcoda.com/google-maps-api-tutorial/#" class="et_social_icon et_social_icon_cancel"></a>
					<div class="et_social_header">
						<h3>Share This</h3>
						<p>Share this post with your friends!</p>
					</div>
					<div class="et_social_networks et_social_2col et_social_slide et_social_rectangle et_social_left et_social_withnetworknames">
						
						<ul class="et_social_icons_container"><li class="et_social_facebook"><a href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.appcoda.com%2Fgoogle-maps-api-tutorial%2F&t=A%20Swift%20Tutorial%20for%20Google%20Maps%20SDK" class="et_social_share" rel="nofollow" data-social_name="facebook" data-post_id="5324" data-social_type="share"><i class="et_social_icon et_social_icon_facebook"></i><div class="et_social_network_label"><div class="et_social_networkname">Facebook</div></div><span class="et_social_overlay"></span></a></li><li class="et_social_twitter"><a href="http://twitter.com/share?text=A%20Swift%20Tutorial%20for%20Google%20Maps%20SDK&url=http%3A%2F%2Fwww.appcoda.com%2Fgoogle-maps-api-tutorial%2F&via=appcodamobile" class="et_social_share" rel="nofollow" data-social_name="twitter" data-post_id="5324" data-social_type="share"><i class="et_social_icon et_social_icon_twitter"></i><div class="et_social_network_label"><div class="et_social_networkname">Twitter</div></div><span class="et_social_overlay"></span></a></li><li class="et_social_googleplus"><a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.appcoda.com%2Fgoogle-maps-api-tutorial%2F&t=A%20Swift%20Tutorial%20for%20Google%20Maps%20SDK" class="et_social_share" rel="nofollow" data-social_name="googleplus" data-post_id="5324" data-social_type="share"><i class="et_social_icon et_social_icon_googleplus"></i><div class="et_social_network_label"><div class="et_social_networkname">Google+</div></div><span class="et_social_overlay"></span></a></li><li class="et_social_linkedin"><a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fwww.appcoda.com%2Fgoogle-maps-api-tutorial%2F&title=A%20Swift%20Tutorial%20for%20Google%20Maps%20SDK" class="et_social_share" rel="nofollow" data-social_name="linkedin" data-post_id="5324" data-social_type="share"><i class="et_social_icon et_social_icon_linkedin"></i><div class="et_social_network_label"><div class="et_social_networkname">LinkedIn</div></div><span class="et_social_overlay"></span></a></li></ul>
					</div>
				</div><span></span><style type="text/css" class="fluid-images">img{max-width:100%;height:auto;}</style><div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./A Swift Tutorial for Google Maps SDK on iOS_files/6p3So0GhyQP.html" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./A Swift Tutorial for Google Maps SDK on iOS_files/6p3So0GhyQP(1).html" style="border: none;"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script><script type="text/javascript">
/* <![CDATA[ */
var mejsL10n = {"language":"en-US","strings":{"Close":"Close","Fullscreen":"Fullscreen","Download File":"Download File","Download Video":"Download Video","Play\/Pause":"Play\/Pause","Mute Toggle":"Mute Toggle","None":"None","Turn off Fullscreen":"Turn off Fullscreen","Go Fullscreen":"Go Fullscreen","Unmute":"Unmute","Mute":"Mute","Captions\/Subtitles":"Captions\/Subtitles"}};
var _wpmejsSettings = {"pluginPath":"\/wp-includes\/js\/mediaelement\/"};
/* ]]> */
</script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/mediaelement-and-player.min.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/wp-mediaelement.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/jquery.form.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/www.appcoda.com\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","sending":"Sending ...","cached":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/scripts.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/idle-timer.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var monarchSettings = {"ajaxurl":"http:\/\/www.appcoda.com\/wp-admin\/admin-ajax.php","pageurl":"http:\/\/www.appcoda.com\/google-maps-api-tutorial\/","stats_nonce":"3c279d6f27","share_counts":"41afbcf48b","follow_counts":"80583e3ade","total_counts":"861aff4fd8","media_single":"ed7cd3edd6","media_total":"e88d48f2ea","generate_all_window_nonce":"6da8221303","no_img_message":"No images available for sharing on this page"};
/* ]]> */
</script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/custom.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/comment-reply.min.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/superfish.min.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/superfish.args.min.js"></script>
<script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/superfish.compat.min.js"></script>
<!-- This site converts visitors into subscribers and customers with the OptinMonster WordPress plugin v2.1.6.6 - http://optinmonster.com/ -->
<div id="om-d7egu9k5k9-lightbox" class="optin-monster-overlay" style="display:none;"><script type="text/javascript" src="./A Swift Tutorial for Google Maps SDK on iOS_files/webfont.js"></script><style type="text/css" class="om-theme-case-study-styles">.optin-monster-success-message {font-size: 21px;font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;color: #282828;font-weight: 300;text-align: center;margin: 0 auto;}.optin-monster-success-overlay .om-success-close {font-size: 32px !important;font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif !important;color: #282828 !important;font-weight: 300 !important;position: absolute !important;top: 0px !important;right: 10px !important;background: none !important;text-decoration: none !important;width: auto !important;height: auto !important;display: block !important;line-height: 32px !important;padding: 0 !important;}.om-helper-field {display: none !important;visibility: hidden !important;opacity: 0 !important;height: 0 !important;line-height: 0 !important;}html div#om-d7egu9k5k9-lightbox * {box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;}html div#om-d7egu9k5k9-lightbox {background:none;border:0;border-radius:0;-webkit-border-radius:0;-moz-border-radius:0;float:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing: grayscale;height:auto;letter-spacing:normal;outline:none;position:static;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;width:auto;visibility:visible;overflow:visible;margin:0;padding:0;line-height:1;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-shadow:none;-moz-box-shadow:none;-ms-box-shadow:none;-o-box-shadow:none;box-shadow:none;-webkit-appearance:none;}html div#om-d7egu9k5k9-lightbox {background: rgb(0, 0, 0);background: rgba(0, 0, 0, .7);font-family: helvetica,arial,sans-serif;-moz-osx-font-smoothing: grayscale;-webkit-font-smoothing: antialiased;line-height: 1;width: 100%;height: 100%;}html div#om-d7egu9k5k9-lightbox .om-clearfix {clear: both;}html div#om-d7egu9k5k9-lightbox .om-clearfix:after {clear: both;content: ".";display: block;height: 0;line-height: 0;overflow: auto;visibility: hidden;zoom: 1;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin {background: #fff;display: none;position: absolute;top: 50%;left: 50%;min-height: 175px;max-width: 700px;width: 100%;z-index: 734626274;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-wrap {position: relative;height: 100%;}html div#om-d7egu9k5k9-lightbox .om-close {position: absolute;top: -12px;right: -12px;text-decoration: none !important;display: block;width: 35px;height: 35px;background: url("http://www.appcoda.com/wp-content/plugins/optin-monster/assets/css/images/close.png") no-repeat scroll 0 0;z-index: 1500;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-bar {margin-bottom: 20px;clear: both;}html div#om-d7egu9k5k9-lightbox .om-bar {float: left;width: 25%;height: 11px;display: block;}html div#om-d7egu9k5k9-lightbox .om-red-bar {background-color: #ef3e36;}html div#om-d7egu9k5k9-lightbox .om-green-bar {background-color: #abb92e;}html div#om-d7egu9k5k9-lightbox .om-orange-bar {background-color: #f57826;}html div#om-d7egu9k5k9-lightbox .om-blue-bar {background-color: #17b4e9;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-header {min-height: 30px;padding: 15px;width: 100%;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-title {font-size: 24px;color: #484848;width: 100%;margin-bottom: 15px;text-shadow: 0 1px #fff;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-tagline {font-size: 16px;line-height: 1.25;color: #484848;width: 100%;margin-bottom: 30px;text-shadow: 0 1px #fff;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-content {padding: 15px;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-left {float: left;max-width: 280px;width: 100%;position: relative;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-image-container {position: relative;max-width: 280px;max-height: 245px;margin: 0 auto;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-image-container img {display: block;margin: 0 auto;text-align: center;height: auto;max-width: 100%;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-right {float: right;max-width: 370px;width: 100%;background-color: #dadada;margin-right: -15px;padding: 20px;position: relative;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-arrow {position: absolute;width: 49px;height: 56px;left: -40px;top: -40px;}html div#om-d7egu9k5k9-lightbox label {color: #333;}html div#om-d7egu9k5k9-lightbox input,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-name,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-email {background-color: #fff;width: 100%;border: 1px solid #ccc;font-size: 16px;line-height: 24px;padding: 10px 6px;overflow: hidden;outline: none;margin: 0 0 15px;vertical-align: middle;height: 46px;}html div#om-d7egu9k5k9-lightbox input[type=submit],html div#om-d7egu9k5k9-lightbox button,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-submit {background: #484848;border: 1px solid #484848;width: 100%;color: #fff;font-size: 20px;padding: 12px 6px;line-height: 28px;text-align: center;vertical-align: middle;cursor: pointer;margin: 0;height: 54px;}html div#om-d7egu9k5k9-lightbox input[type=checkbox],html div#om-d7egu9k5k9-lightbox input[type=radio] {-webkit-appearance: checkbox;width: auto;outline: invert none medium;padding: 0;margin: 0;}@media (max-width: 700px) {html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin[style] {width: 100%;position: relative;}html div#om-d7egu9k5k9-lightbox .om-close {right: 9px;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-left,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-right,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-name,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-email,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-submit,html div#om-d7egu9k5k9-lightbox .om-has-email #om-lightbox-case-study-optin-email {float: none;width: 100%;max-width: 100%;}html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-left,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-name,html div#om-d7egu9k5k9-lightbox #om-lightbox-case-study-optin-email {margin-bottom: 15px;}}@media only screen and (-webkit-min-device-pixel-ratio: 2),only screen and (min--moz-device-pixel-ratio: 2),only screen and (-o-min-device-pixel-ratio: 2/1),only screen and (min-device-pixel-ratio: 2),only screen and (min-resolution: 192dpi),only screen and (min-resolution: 2dppx) {html div#om-d7egu9k5k9-lightbox .om-close {background-image: url("http://www.appcoda.com/wp-content/plugins/optin-monster/assets/css/images/<a class="__cf_email__" href="/cdn-cgi/l/email-protection" data-cfemail="6f0c03001c0a2f5d17411f0108">[email&#160;protected]</a><script cf-hash='f9e31' type="text/javascript">
/* <![CDATA[ */!function(){try{var t="currentScript"in document?document.currentScript:function(){for(var t=document.getElementsByTagName("script"),e=t.length;e--;)if(t[e].getAttribute("cf-hash"))return t[e]}();if(t&&t.previousSibling){var e,r,n,i,c=t.previousSibling,a=c.getAttribute("data-cfemail");if(a){for(e="",r=parseInt(a.substr(0,2),16),n=2;a.length-n;n+=2)i=parseInt(a.substr(n,2),16)^r,e+=String.fromCharCode(i);e=document.createTextNode(e),c.parentNode.replaceChild(e,c)}}}catch(u){}}();/* ]]> */</script>");background-size: 35px 35px;}}</style><div id="om-lightbox-case-study-optin" class="om-lightbox-case-study om-clearfix om-theme-case-study om-custom-html-form"><div id="om-lightbox-case-study-optin-wrap" class="om-clearfix"><a href="http://www.appcoda.com/google-maps-api-tutorial/#" class="om-close" title="Close"></a><div id="om-lightbox-case-study-optin-bar" class="om-clearfix"><span class="om-bar om-red-bar"></span><span class="om-bar om-green-bar"></span><span class="om-bar om-orange-bar"></span><span class="om-bar om-blue-bar"></span></div><div id="om-lightbox-case-study-header" class="om-clearfix"><div id="om-lightbox-case-study-optin-title" data-om-action="editable" data-om-field="title" style="color:#484848;font-family:Bree Serif;font-size:32px;text-align:center;"><span style="font-family:montserrat;">FREE Swift Programming Course</span></div><div id="om-lightbox-case-study-optin-tagline" data-om-action="editable" data-om-field="tagline" style="color:#484848;font-family:Open Sans;font-size:24px;text-align:center;"><span style="font-family:montserrat;">Sign up today and get a 7 day email course with free tips and ebook chapters for starting app development.</span></div></div><div id="om-lightbox-case-study-content" class="om-clearfix"><div id="om-lightbox-case-study-left"><div id="om-lightbox-case-study-optin-image-container" class="om-image-container om-clearfix"><img class="optin-monster-image optin-monster-image-lightbox-case-study" src="./A Swift Tutorial for Google Maps SDK on iOS_files/swift-free-course-280x245.jpg" alt="" title="swift-free-course"></div></div><div id="om-lightbox-case-study-right"><img id="om-lightbox-case-study-arrow" src="./A Swift Tutorial for Google Maps SDK on iOS_files/arrow.png" alt="Arrow"><form action="http://sendy.appcoda.com/sendy/subscribe" method="POST" accept-charset="utf-8">
<input id="om-lightbox-case-study-optin-name" type="text" name="name" value="" data-om-action="selectable" data-om-target="#optin-monster-field-name_field" placeholder="Enter your name here..." style="color:#484848;font-family:Montserrat;">
<input id="om-lightbox-case-study-optin-email" type="email" name="email" value="" data-om-action="selectable" data-om-target="#optin-monster-field-email_field" placeholder="Enter your email address here..." style="color:#484848;font-family:Montserrat;">
<input id="om-lightbox-case-study-optin-submit" type="submit" data-om-action="selectable" data-om-target="#optin-monster-field-submit_field" value="Send me the course" style="color:#ffffff;background-color:#484848;border-color:#484848;font-family:Montserrat;">
<input type="hidden" name="list" value="neAW97jagVmb3C3O892VnnLA">
</form></div></div></div><input type="email" name="email" value="" class="om-helper-field"><input type="text" name="website" value="" class="om-helper-field"></div><script type="text/javascript">jQuery(document).ready(function($){WebFont.load({google: {families: ['Montserrat%7CBree+Serif%7COpen+Sans']}});});</script></div>
<script type="text/javascript">var d7egu9k5k9_lightbox, omo = {"id":4744,"optin":"d7egu9k5k9-lightbox","campaign":"Free Swift Programming Course","clones":[""],"hash":"d7egu9k5k9-lightbox","optin_js":"d7egu9k5k9_lightbox","type":"lightbox","theme":"case-study","cookie":30,"delay":5000,"second":0,"exit":1,"redirect":"","redirect_pass":false,"custom":true,"test":false,"global_cookie":23320,"preview":false,"ajax":"http:\/\/www.appcoda.com\/?optin-monster-ajax-route=1","mobile":false,"post_id":5324,"preloader":"http:\/\/www.appcoda.com\/wp-content\/plugins\/optin-monster\/assets\/css\/images\/preloader.gif","error":"There was an error with your submission. Please try again.","ajax_error":"There was an error with the AJAX request: ","name_error":"Please enter a valid name.","email_error":"Please enter a valid email address.","bot_error":"Honeypot fields have been activated. Your submission is being flagged as potential spam.","success":"Thanks for subscribing! Please check your email for further instructions.","exit_sensitivity":20}; d7egu9k5k9_lightbox = new OptinMonster(); d7egu9k5k9_lightbox.init(omo);</script>
<!--[if lte IE 9]><script type="text/javascript">var om_ie_browser = true;</script><![endif]--><!-- / OptinMonster WordPress plugin. -->



<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Page Caching using disk: enhanced

 Served from: www.appcoda.com @ 2015-05-04 12:24:26 by W3 Total Cache --></body></html>